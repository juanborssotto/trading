{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./src/components/charts/PlotConfigurator.vue?c425","webpack:///./node_modules/core-js/modules/es.object.entries.js","webpack:///./node_modules/core-js/internals/object-to-array.js","webpack:///./src/components/charts/CandleChart.vue?7d83","webpack:///./node_modules/core-js/modules/es.array.find-index.js","webpack:///./src/components/charts/CandleChartContainer.vue?adf7","webpack:///./src/components/charts/CandleChart.vue?c8b9","webpack:///./src/shared/randomColor.ts","webpack:///./src/shared/timemath.ts","webpack:///./node_modules/echarts/lib/chart/candlestick/CandlestickView.js","webpack:///./node_modules/echarts/lib/chart/helper/createListSimply.js","webpack:///./node_modules/echarts/lib/chart/helper/whiskerBoxCommon.js","webpack:///./node_modules/echarts/lib/chart/candlestick/CandlestickSeries.js","webpack:///./node_modules/echarts/lib/chart/candlestick/preprocessor.js","webpack:///./node_modules/echarts/lib/chart/candlestick/candlestickVisual.js","webpack:///./node_modules/echarts/lib/chart/candlestick/candlestickLayout.js","webpack:///./node_modules/echarts/lib/chart/candlestick/install.js","webpack:///./node_modules/echarts/lib/chart/scatter/ScatterSeries.js","webpack:///./node_modules/echarts/lib/chart/helper/LargeSymbolDraw.js","webpack:///./node_modules/echarts/lib/chart/scatter/ScatterView.js","webpack:///./node_modules/echarts/lib/coord/cartesian/GridModel.js","webpack:///./node_modules/echarts/lib/coord/axisModelCommonMixin.js","webpack:///./node_modules/echarts/lib/coord/cartesian/AxisModel.js","webpack:///./node_modules/echarts/lib/coord/axisDefault.js","webpack:///./node_modules/echarts/lib/coord/axisCommonTypes.js","webpack:///./node_modules/echarts/lib/coord/axisModelCreator.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Cartesian.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","webpack:///./node_modules/echarts/lib/coord/axisTickLabelBuilder.js","webpack:///./node_modules/echarts/lib/coord/Axis.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Axis2D.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Grid.js","webpack:///./node_modules/echarts/lib/component/axis/axisSplitHelper.js","webpack:///./node_modules/echarts/lib/component/axis/CartesianAxisView.js","webpack:///./node_modules/echarts/lib/component/grid/installSimple.js","webpack:///./node_modules/echarts/lib/chart/scatter/install.js","webpack:///./node_modules/echarts/lib/coord/calendar/CalendarModel.js","webpack:///./node_modules/echarts/lib/component/calendar/CalendarView.js","webpack:///./node_modules/echarts/lib/coord/calendar/Calendar.js","webpack:///./node_modules/echarts/lib/component/calendar/install.js","webpack:///./node_modules/echarts/lib/component/dataset/install.js","webpack:///./node_modules/echarts/lib/component/dataZoom/helper.js","webpack:///./node_modules/echarts/lib/component/dataZoom/DataZoomModel.js","webpack:///./node_modules/echarts/lib/component/dataZoom/InsideZoomModel.js","webpack:///./node_modules/echarts/lib/component/dataZoom/DataZoomView.js","webpack:///./node_modules/echarts/lib/component/helper/interactionMutex.js","webpack:///./node_modules/echarts/lib/component/helper/RoamController.js","webpack:///./node_modules/echarts/lib/component/dataZoom/roams.js","webpack:///./node_modules/echarts/lib/component/dataZoom/InsideZoomView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/AxisProxy.js","webpack:///./node_modules/echarts/lib/component/dataZoom/dataZoomProcessor.js","webpack:///./node_modules/echarts/lib/component/dataZoom/dataZoomAction.js","webpack:///./node_modules/echarts/lib/component/dataZoom/installCommon.js","webpack:///./node_modules/echarts/lib/component/dataZoom/installDataZoomInside.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SliderZoomModel.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SliderZoomView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/installDataZoomSlider.js","webpack:///./node_modules/echarts/lib/component/dataZoom/install.js","webpack:///./node_modules/echarts/lib/component/grid/install.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SelectZoomModel.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SelectZoomView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/installDataZoomSelect.js","webpack:///./node_modules/echarts/lib/component/toolbox/featureManager.js","webpack:///./node_modules/echarts/lib/component/toolbox/ToolboxModel.js","webpack:///./node_modules/echarts/lib/component/toolbox/ToolboxView.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/MagicType.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/DataView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/history.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/Restore.js","webpack:///./node_modules/echarts/lib/component/helper/BrushController.js","webpack:///./node_modules/echarts/lib/component/helper/cursorHelper.js","webpack:///./node_modules/echarts/lib/component/helper/brushHelper.js","webpack:///./node_modules/echarts/lib/component/helper/BrushTargetManager.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/DataZoom.js","webpack:///./node_modules/echarts/lib/component/toolbox/install.js","webpack:///./node_modules/echarts/lib/component/timeline/TimelineModel.js","webpack:///./node_modules/echarts/lib/component/timeline/SliderTimelineModel.js","webpack:///./node_modules/echarts/lib/component/timeline/TimelineView.js","webpack:///./node_modules/echarts/lib/component/timeline/TimelineAxis.js","webpack:///./node_modules/echarts/lib/component/timeline/SliderTimelineView.js","webpack:///./node_modules/echarts/lib/component/timeline/timelineAction.js","webpack:///./node_modules/echarts/lib/component/timeline/preprocessor.js","webpack:///./node_modules/echarts/lib/component/timeline/install.js","webpack:///./src/components/charts/CandleChart.vue","webpack:///./src/components/charts/CandleChart.vue?556a","webpack:///./src/components/charts/CandleChart.vue?a6ee","webpack:///./src/components/charts/PlotConfigurator.vue?f4a5","webpack:///./src/components/charts/PlotConfigurator.vue","webpack:///./src/components/charts/PlotConfigurator.vue?30e6","webpack:///./src/components/charts/PlotConfigurator.vue?8e39","webpack:///./src/components/charts/CandleChartContainer.vue","webpack:///./src/components/charts/CandleChartContainer.vue?0dc4","webpack:///./src/components/charts/CandleChartContainer.vue?c33c"],"names":["_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","i","_i","Symbol","iterator","_s","_e","_arr","_n","_d","call","next","done","push","value","length","err","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","$","$entries","entries","target","stat","O","DESCRIPTORS","objectKeys","toIndexedObject","propertyIsEnumerable","f","createMethod","TO_ENTRIES","it","key","keys","result","module","exports","values","$findIndex","findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES","proto","forced","callbackfn","this","arguments","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","datasetColumns","model","callback","$$v","plotConfig","expression","availablePairs","on","refresh","pair","_v","dataset","buy_signals","sell_signals","availablePlotConfigNames","plotConfigChanged","plotConfigName","useUTC","showConfigurator","trades","getChartTheme","staticStyle","staticRenderFns","ref","theme","Math","random","toString","ROUND_UP","ROUND_DOWN","roundTimeframe","timeframems","timestamp","direction","offset","SKIP_PROPS","_super","CandlestickView","_this","apply","type","prototype","seriesModel","ecModel","api","group","removeClipPath","_updateDrawMode","_isLargeDraw","_renderLarge","_renderNormal","incrementalPrepareRender","_clear","incrementalRender","params","_incrementalRenderLarge","_incrementalRenderNormal","isLargeDraw","pipelineContext","large","data","getData","oldData","_data","isSimpleBox","getLayout","needsClip","get","coord","coordinateSystem","clipArea","getArea","removeAll","diff","add","newIdx","hasValue","itemLayout","getItemLayout","isNormalBoxClipped","el","createNormalBox","graphic","shape","points","ends","setBoxCommon","setItemGraphicEl","update","oldIdx","getItemGraphicEl","remove","execute","createLarge","clipPath","setClipPath","dataIndex","incremental","Chart","NormalBoxPathShape","NormalBoxPath","opts","getDefaultShape","buildPath","ctx","__simpleBox","moveTo","lineTo","closePath","Path","isInit","transInit","z2","clipped","contain","itemModel","getItemModel","useStyle","getItemVisual","style","strokeNoScale","point","slice","initBaseline","LargeBoxPathShape","LargeBoxPath","__sign","x","largePoints","elP","elN","setLargeStyle","sign","borderColor","itemStyle","getModel","getItemStyle","fill","stroke","createListSimply","opt","nameList","coordDimensions","source","getSource","dimensionsInfo","createDimensions","list","List","initData","WhiskerBoxCommonMixin","getInitialData","option","ordinalMeta","addOrdinal","xAxisModel","getComponent","yAxisModel","xAxisType","yAxisType","layout","getOrdinalMeta","coordDims","baseAxisDimIndex","baseAxisDim","_baseAxisDim","otherAxisDim","axisModels","baseAxisType","otherAxisType","newOptionData_1","item","index","newItem","unshift","defaultValueDimensions","name","otherDims","tooltip","itemName","dimsDef","dimensionsCount","encodeDefaulter","getBaseAxis","dim","axis","CandlestickSeriesModel","defaultTooltip","getShadowDim","brushSelector","selectors","rect","brushRect","dependencies","defaultOption","zlevel","z","legendHoverLink","clip","color","color0","borderColor0","borderWidth","emphasis","scale","barMaxWidth","barMinWidth","barWidth","largeThreshold","progressive","progressiveThreshold","progressiveChunkMode","animationEasing","animationDuration","Series","CandlestickSeries","candlestickPreprocessor","series","seriesItem","positiveBorderColorQuery","negativeBorderColorQuery","positiveColorQuery","negativeColorQuery","candlestickVisual","seriesType","plan","createRenderPlanner","performRawSeries","reset","getColor","getBorderColor","isSeriesFiltered","isLargeRender","progress","existsStyle","ensureUniqueItemVisual","LargeArr","Float32Array","candlestickLayout","coordSys","candleWidth","calculateCandleWidth","cDimIdx","vDimIdx","cDim","mapDimension","vDims","mapDimensionsAll","openDim","closeDim","lowestDim","highestDim","setLayout","largeProgress","normalProgress","axisDimVal","openVal","closeVal","lowestVal","highestVal","ocLow","min","ocHigh","max","ocLowPoint","getPoint","ocHighPoint","lowestPoint","highestPoint","addBodyEnd","subPixelOptimizePoint","setItemLayout","getSign","makeBrushRect","val","p","isNaN","NaN","dataToPoint","start","point1","point2","pmin","pmax","y","width","height","count","tmpIn","tmpOut","extent","baseAxis","bandWidth","getBandWidth","getExtent","abs","install","registers","registerChartView","registerSeriesModel","registerPreprocessor","registerVisual","registerLayout","ScatterSeriesModel","hasSymbolVisual","createListFromArray","useEncodeDefaulter","getProgressive","getProgressiveThreshold","symbolSize","opacity","select","ScatterSeries","BOOST_SIZE_THRESHOLD","LargeSymbolPathShape","LargeSymbolPath","path","size","symbolProxy","symbolProxyShape","getContext","canBoost","_ctx","softClipShape","afterBrush","fillRect","findDataIndex","w","h","idx","x0","y0","LargeSymbolDraw","isPersistent","_incremental","updateData","symbolEl","rectHover","cursor","setShape","_setCommon","updateLayout","eachChild","child","startIndex","len","endIndex","byteOffset","buffer","incrementalPrepareUpdate","_clearIncremental","IncrementalDisplayable","silent","incrementalUpdate","taskParams","addDisplayable","end","isIncremental","hostModel","getVisual","clipShape","setColor","extrudeShadow","globalStyle","visualColor","ecData_1","seriesIndex","e","offsetX","offsetY","clearDisplaybles","ScatterView","symbolDraw","_updateSymbolDraw","_getClipShape","_finished","_symbolDraw","updateTransform","dirty","res","SymbolDraw","dispose","GridModel","layoutMode","show","left","top","right","bottom","containLabel","backgroundColor","AxisModelCommonMixin","getNeedCrossZero","getCoordSysModel","CartesianAxisModel","getReferringComponents","models","inverse","nameLocation","nameRotate","nameTruncate","maxWidth","ellipsis","placeholder","nameTextStyle","nameGap","triggerEvent","axisPointer","axisLine","onZero","onZeroAxisIndex","lineStyle","symbol","axisTick","inside","axisLabel","rotate","showMinLabel","showMaxLabel","margin","fontSize","splitLine","splitArea","areaStyle","boundaryGap","deduplication","alignWithLabel","interval","splitNumber","minorTick","minorSplitLine","timeAxis","rich","primary","fontWeight","logAxis","logBase","category","time","log","AXIS_TYPES","axisModelCreator","axisName","BaseAxisModelClass","extraDefaultOption","v","axisType","axisDefault","AxisModel","args","mergeDefaultAndTheme","inputPositionParams","themeModel","getTheme","getDefaultOption","getAxisType","optionUpdated","thisOption","__ordinalMeta","OrdinalMeta","createByAxisModel","getCategories","rawData","categories","registerComponentModel","registerSubTypeDefaulter","Cartesian","_dimList","_axes","getAxis","getAxes","getAxesByScale","scaleType","toLowerCase","addAxis","cartesian2DDimensions","canCalculateAffineTransform","Cartesian2D","dimensions","calcAffineTransform","_transform","_invTransform","xAxisScale","yAxisScale","xScaleExtent","yScaleExtent","xScaleSpan","yScaleSpan","scaleX","scaleY","translateX","translateY","m","containPoint","axisX","axisY","toLocalCoord","containData","clamp","out","xVal","yVal","isFinite","xAxis","yAxis","toGlobalCoord","dataToCoord","clampData","xScale","yScale","xAxisExtent","yAxisExtent","parse","pointToData","coordToData","getOtherAxis","xExtent","getGlobalExtent","yExtent","BoundingRect","inner","createAxisLabels","makeCategoryLabels","makeRealNumberLabels","createAxisTicks","tickModel","makeCategoryTicks","ticks","getTicks","tick","labelModel","getLabelModel","makeCategoryLabelsActually","isBlank","labels","labelCategoryInterval","numericLabelInterval","labelsCache","getListCache","optionLabelInterval","listCacheGet","makeLabelsByCustomizedCategoryInterval","makeAutoCategoryInterval","makeLabelsByNumericCategoryInterval","listCacheSet","tickCategoryInterval","ticksCache","optionTickInterval","labelsResult","labelItem","tickValue","labelFormatter","formattedLabel","rawLabel","getLabel","prop","cache","autoInterval","calculateCategoryInterval","fetchAutoCategoryIntervalCalculationParams","rotation","axisRotate","labelRotate","PI","ordinalScale","ordinalExtent","tickCount","step","floor","unitSpan","unitW","cos","unitH","sin","maxW","maxH","font","dw","dh","Infinity","axisExtent","lastAutoInterval","lastTickCount","axisExtent0","axisExtent1","getRotate","isHorizontal","getFont","categoryInterval","onlyTick","startTick","round","ceil","showAllLabel","includeMinLabel","includeMaxLabel","addItem","tickObj","NORMALIZED_EXTENT","Axis","onBand","_extent","getPixelPrecision","dataExtent","setExtent","normalize","fixExtentWithBands","t","getTicksCoords","getTickModel","ticksCoords","tickVal","getRawOrdinalNumber","fixOnBandTicksCoords","getMinorTicksCoords","minorTickModel","minorTicks","getMinorTicks","minorTicksCoords","minorTicksGroup","getViewLabels","nTick","ticksLen","last","diffSize","crossLen","shift_1","ticksItem","littleThan","shift","pop","a","b","Axis2D","coordExtent","position","asc","ret","reverse","setCategorySortInfo","info","categorySortInfo","setSortInfo","Grid","gridModel","_coordsMap","_coordsList","_axesMap","_axesList","axisPointerEnabled","_initCartesian","getRect","_rect","axesMap","_updateScale","onZeroRecords","fixAxisOnZero","resize","ignoreContainLabel","boxLayoutParams","getBoxLayoutParams","isContainLabel","gridRect","getWidth","getHeight","axesList","adjustAxes","updateAxisTransform","labelUnionRect","axisIndex","axesMapOnDim","getCartesian","xAxisIndex","yAxisIndex","coordList","getCartesians","convertToPixel","finder","_findConvertTarget","cartesian","convertFromPixel","coordsList","componentIndex","grid","axisPositionUsed","axesCount","eachComponent","createAxisCreator","dimName","axisModel","isAxisUsedInTheGrid","axisPosition","isCategory","master","unionExtent","unionExtentFromData","eachSeries","axesModelMap","getTooltipAxes","baseAxes","otherAxes","otherAxis","create","grids","getAxesOnZeroOf","otherAxisOnZeroOf","canOnZeroToAxis","hasOwnProperty","getOnZeroRecordKey","coordBase","axisExtentSum","rectCoordAxisBuildSplitArea","axisView","axisGroup","splitAreaModel","areaStyleModel","areaColors","areaColorsLen","lastSplitAreaColors","splitAreaColors","newSplitAreaColors","colorIndex","cIndex","prev","getAreaStyle","tickCoord","set","anid","autoBatch","rectCoordAxisHandleRemove","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","axisPointerClass","payload","oldAxisGroup","_axisGroup","cartesianAxisHelper","axisBuilder","AxisBuilder","handleAutoShown","elementType","cartesians","getGroup","axisElementBuilders","AxisView","splitLineModel","lineStyleModel","lineColors","lineCount","p1","p2","getLineStyle","subPixelOptimize","x1","y1","x2","y2","minorSplitLineModel","k","CartesianXAxisView","CartesianYAxisView","GridView","Rect","Component","extraOption","registerComponentView","registerCoordinateSystem","CalendarModel","init","parentModel","mergeAndNormalizeLayoutParams","mergeOption","getCellSize","cellSize","orient","dayLabel","firstDay","nameMap","monthLabel","align","formatter","yearLabel","fontFamily","raw","cellSizeArr","ignoreSize","hvIdx","MONTH_TEXT","EN","CN","WEEK_TEXT","CalendarView","calendarModel","rangeData","getRangeInfo","getOrient","_renderDayRect","_renderLines","_renderYearText","_renderMonthText","_renderWeekText","itemRectStyleModel","sw","getCellWidth","sh","getCellHeight","getNextNDay","dataToRect","tl","self","lineWidth","_tlpoints","_blpoints","_firstDayOfMonth","_firstDayPoints","addPoints","formatedDate","getDateInfo","date","setMonth","getMonth","_getLinePointsOfOneWeek","_drawSplitline","_getEdgesPoints","rs","poyline","parsedDate","tmpD","day","_formatterLabel","format","_yearTextPositionControl","textEl","aligns","verticalAlign","pos","xc","yc","posPoints","content","yearText","text","attr","_monthTextPositionControl","isCenter","vAlign","termPoints","toUpperCase","tmp","firstDayPoints","name_1","yyyy","yy","MM","M","monthText","_weekTextPositionControl","isStart","firstDayOfWeek","getFirstDayOfWeek","lweek","number","fweek","center","weekText","PROXIMATE_ONE_DAY","Calendar","getDimensionsInfo","_model","_rangeInfo","_sw","_sh","_orient","_firstDayOfWeek","getFullYear","mStr","d","getDate","dStr","getDay","getTime","n","Date","setDate","_lineWidth","_getRangeInfo","_initRangeOption","weeks","whNames","layoutParams","cellNumbers","cellSizeSpecified","whGlobal","calendarRect","dayInfo","range","week","nthWeek","pointToDate","contentShape","tr","br","bl","nthX","nthY","_getDateByWeeksAndDay","getCoordSys","pixel","console","warn","normalizedRange","rangeStr","test","reversed","parsedRange","allDay","startDateNum","endDateNum","dateNum","rangeInfo","nthDay","calendarList","calendar","calendarSeries","DatasetModel","_sourceManager","newOption","getSourceManager","seriesLayoutBy","DatasetView","DATA_ZOOM_AXIS_DIMENSIONS","SERIES_COORDS","isCoordSupported","coordType","getAxisMainType","axisDim","findEffectedDataZooms","foundNewLink","axisRecords","effectedModels","effectedModelMap","mainType","query","dataZoomModel","uid","addToEffected","processSingle","isLinked","dataZoom","markAxisControlled","isLink","eachTargetAxis","axisIdxArr","collectReferCoordSysModelInfo","coordSysInfoWrap","infoList","infoMap","coordSysModel","coordSysUid","coordSysInfo","DataZoomAxisInfo","indexList","indexMap","axisCmptIdx","DataZoomModel","_autoThrottle","_noTarget","_rangePropMode","inputRawOption","retrieveRawOption","settledOption","_doInit","_setDefaultThrottle","_updateRangeUse","names","_resetTarget","optionOrient","targetAxisIndexMap","_targetAxisInfoMap","hasAxisSpecified","_fillSpecifiedTargetAxis","_makeAutoOrientByTargetAxis","_fillAutoTargetAxisByOrient","each","axisInfo","refering","specified","needAuto","findComponents","setParallelAxis","filter","gridModel_1","axModel","globalOption","throttle","animation","animationDurationUpdate","rangePropMode","rangeModeInOption","percentSpecified","valueSpecified","noTarget","getFirstTargetAxisModel","firstAxisModel","context","getAxisProxy","getAxisModel","__dzAxisProxy","setRawRange","setCalculatedRange","getPercentRange","axisProxy","findRepresentativeAxisProxy","getDataPercentWindow","getValueRange","getDataValueWindow","firstProxy","axisDimList","j","proxy","hostedBy","getRangePropMode","filterMode","InsideZoomModel","disabled","zoomLock","zoomOnMouseWheel","moveOnMouseMove","moveOnMouseWheel","preventDefaultMouseMove","DataZoomView","ATTR","take","zr","resourceKey","userKey","store","getStore","release","uKey","isTaken","echarts","event","RoamController","_zr","mousedownHandler","_mousedownHandler","mousemoveHandler","_mousemoveHandler","mouseupHandler","_mouseupHandler","mousewheelHandler","_mousewheelHandler","pinchHandler","_pinchHandler","enable","controlType","disable","_opt","off","isDragging","_dragging","isPinching","_pinching","setPointerChecker","pointerChecker","draggable","_x","_y","isAvailableBehavior","gestureEvent","oldX","oldY","dx","dy","newX","newY","shouldZoom","shouldMove","wheelDelta","absWheelDeltaDelta","originX","originY","factor","checkPointerAndTrigger","absDelta","scrollDelta","pinchScale","pinchX","pinchY","Eventful","controller","eventName","behaviorToCheck","contollerEvent","trigger","settings","setting","setViewInfoToCoordSysRecord","getRange","coordSysRecordMap","coordSysRecord","dzInfo","dataZoomInfoMap","disposeCoordSysRecordIfNeeded","coordSysKeyArr","coordSysKey","dzUid","removeKey","disposeCoordSysRecord","createCoordSysRecord","containsPoint","dispatchAction","getZr","batch","method","dzReferCoordSysInfo","dataZoomId","id","easing","duration","mergeControllerParams","prefix","typePriority","dataZoomInfo","oneType","installDataZoomRoamProcessor","registerProcessor","PRIORITY","PROCESSOR","FILTER","apiInner","subType","dzReferCoordSysWrap","dzCoordSysInfo","firstDzInfo","firstDzKey","controllerParams","InsideZoomView","pan","getRangeHandlers","zoom","scrollMove","coordSysMainType","lastRange","directionInfo","getDirectionInfo","percentPoint","signal","pixelStart","pixelLength","minMaxSpan","getMinMaxSpan","sliderMove","minSpan","maxSpan","makeMover","getPercentDelta","percentDelta","oldPoint","newPoint","polar","radiusExtent","getRadiusAxis","angleExtent","getAngleAxis","pointToCoord","singleAxis","AxisProxy","_dimName","_axisIndex","_dataZoomModel","_valueWindow","_percentWindow","getTargetSeriesModels","seriesModels","axisMainType","_minMaxSpan","calculateDataWindow","hasPropModeValue","_dataExtent","percentExtent","percentWindow","valueWindow","boundPercent","boundValue","spans","restrictSet","fromWindow","toWindow","fromExtent","toExtent","toValue","suffix","targetSeries","calculateDataExtent","_updateMinMaxSpan","dataWindow","_setAxisModel","filterData","seriesData","dataDims","filterSelf","leftOut","rightOut","thisHasValue","thisLeftOut","thisRightOut","setData","map","isInWindow","selectRange","setApproximateExtent","minMax","percentSpan","valueSpan","precision","rawExtentInfo","setDeterminedMinMax","toFixed","freeze","rawExtentResult","calculate","dataZoomProcessor","getTargetSeries","eachAxisModel","cb","proxyList","seriesModelMap","overallReset","percentRange","valueRange","startValue","endValue","installDataZoomAction","registerAction","installed","installCommon","SliderZoomModel","borderRadius","dataBackground","selectedDataBackground","fillerColor","handleIcon","handleSize","handleStyle","moveHandleSize","moveHandleIcon","moveHandleStyle","showDetail","showDataShadow","realtime","textStyle","brushSelect","brushStyle","DEFAULT_LOCATION_EDGE_GAP","DEFAULT_FRAME_BORDER_WIDTH","DEFAULT_FILLER_SIZE","DEFAULT_MOVE_HANDLE_SIZE","HORIZONTAL","VERTICAL","LABEL_GAP","SHOW_DATA_SHADOW_SERIES_TYPE","REALTIME_ANIMATION_CONFIG","SliderZoomView","_displayables","_onBrush","_onBrushEnd","from","_buildView","_updateView","thisGroup","_brushing","_resetLocation","_resetInterval","barGroup","sliderGroup","_renderBackground","_renderHandle","_renderDataShadow","_positionGroup","showMoveHandle","coordRect","_findCoordRect","ecSize","positionInfo","layoutRect","_location","_size","location","targetAxisModel","otherAxisInverse","_dataShadowInfo","getBoundingRect","markRedraw","_getViewExtent","clickPanel","onclick","_onClickPanel","_onBrushStart","_prepareDataShadowInfo","dataShadowSegs","getRawData","otherDim","otherDataExtent","getDataExtent","otherOffset","lastIsEmpty","otherShadowExtent","thisShadowExtent","areaPoints","linePoints","thisCoord","stride","isEmpty","otherCoord","createDataShadowGroup","isSelectedArea","polygon","segmentIgnoreThreshold","polyline","thisAxis","getOtherDim","thisDim","displayables","handles","handleLabels","filler","textConfig","r","handleIndex","iconStr","indexOf","getCursor","drift","_onDragMove","ondragend","_onDragEnd","onmouseover","_showDataInfo","onmouseout","bRect","_handleHeight","_handleWidth","setStyle","ensureState","handleColor","textStyleModel","invisible","getTextColor","actualMoveZone","moveHandleHeight","moveHandle_1","moveHandle","iconSize","moveZoneExpandSize","moveZone","enterEmphasis","leaveEmphasis","ondragstart","_range","viewExtent","_handleEnds","_updateInterval","delta","handleEnds","viewExtend","nonRealtime","displaybles","handleInterval","handle","handleHeight","segIntervals","segGroup","getClipPath","_updateDataInfo","labelTexts","dataInterval","_formatLabel","orderedHandleEnds","setLabel","barTransform","parent","textPoint","labelPrecision","valueStr","replace","showOrHide","getLocalTransform","vertex","changed","_dispatchZoomAction","localPoint","transformCoordToLocal","_brushStart","_brushStartTime","brushShape","brushEndTime","_updateBrushRect","mouseX","mouseY","brushStart","endPoint","startPoint","coordSysInfoList","radius","angle","SelectDataZoomModel","SelectDataZoomView","SelectZoomModel","SelectZoomView","ToolboxFeature","registerFeature","ctor","getFeature","ToolboxModel","feature","featureOpt","featureName","Feature","padding","itemSize","itemGap","showTitle","iconStyle","ToolboxView","toolboxModel","featureOpts","features","_features","featureNames","DataDiffer","_featureNames","processFeature","listComponent","icon","titleText","__title","emphasisState","emphasisTextConfig","textContent","getTextContent","emphasisTextState","states","emphasisTextStyle","makeFont","needPutOnTop","topOffset","newIndex","oldIndex","oldName","featureModel","Model","newTitle","title","isUserFeatureName","isToolboxFeature","unusable","createIconPaths","setIconStatus","iconName","status","iconPaths","iconStatus","iconsMap","titlesMap","iconStyleModel","iconStyleEmphasisModel","icons","getIcons","titles","pathEmphasisState","ignore","setTextContent","componentModel","formatterParamsExtra","hoverStyle","defaultTextPosition","setTextConfig","hide","updateView","SaveAsImage","isSvg","painter","getType","url","getConnectedDataURL","connectedBackgroundColor","excludeComponents","pixelRatio","MouseEvent","env","browser","newEdge","ie","edge","window","navigator","msSaveOrOpenBlob","parts","split","base64Encoded","bstr","decodeURIComponent","atob","filename","u8arr","Uint8Array","charCodeAt","blob","Blob","frame","document","createElement","body","appendChild","cw","contentWindow","doc","open","write","close","focus","execCommand","removeChild","lang","html","tab","$a","download","href","evt","view","defaultView","bubbles","cancelable","dispatchEvent","getLocale","canvasSupported","INNER_STACK_KEYWORD","radioTypes","MagicType","availableIcons","line","bar","stack","seriesOptGenreator","generateNewSeriesTypes","seriesId","newSeriesOpt","categoryAxis","radio","currentType","tiled","markPoint","markLine","isStack","BLOCK_SPLITER","join","ITEM_SPLITER","groupSeries","seriesGroupByCategoryAxis","otherSeries","meta","eachRawSeries","valueAxis","other","assembleSeriesWithCategoryAxis","groups","tables","valueAxisDim","headers","concat","columns","mapArray","lines","items","assembleOtherSeries","vals","argLen","getName","getContentFromModel","str","trim","isTSVFormat","block","firstLine","itemSplitRegex","RegExp","parseTSVContents","tsv","tsvLines","header","parseListContents","seriesName","hasName","parseContents","blockMetaList","blocks","blockMeta","axisKey","DataView","container","getDom","_dom","root","cssText","innerHTML","viewMain","textarea","optionToContent","contentToOption","htmlOrDom","getOption","readOnly","buttonContainer","buttonStyle","closeButton","refreshButton","Error","clientHeight","textColor","textareaColor","textareaBorderColor","buttonColor","buttonTextColor","tryMergeDataOption","newData","originalData","newVal","original","newValIsObject","shouldDeleteName","newSeriesOptList","seriesOpt","getSeriesByName","newSnapshot","storedSnapshots","getStoreSnapshots","batchItem","snapshot","queryComponents","head","clear","snapshots","RestoreOption","resetOption","Restore","BRUSH_PANEL_GLOBAL","mathMin","mathMax","mathPow","pow","COVER_Z","UNSELECT_THRESHOLD","MIN_RESIZE_LINE_WIDTH","MUTEX_RESOURCE_KEY","DIRECTION_MAP","s","CURSOR_MAP","ne","nw","se","DEFAULT_BRUSH_OPT","transformable","brushMode","removeOnClick","baseUID","BrushController","_track","_covers","_handlers","_uid","pointerHandlers","handler","enableBrush","brushOption","_brushType","_doDisableBrush","brushType","_doEnableBrush","_enableGlobalPan","_brushOption","setPanels","panelOpts","panels_1","_panels","panelId","mount","enableGlobalPan","updateCovers","coverConfigList","coverConfig","tmpIdPrefix","oldCovers","newCovers","creatingCover","_creatingCover","oldGetKey","getKey","addOrUpdate","cover","__brushOption","newBrushInternal","endCreating","createCover","updateCoverAfterCreation","unmount","clearCovers","coverRenderers","updateZ","coverRenderer","getCoverRenderer","updateCoverShape","traverse","updateCommon","getPanelByPoint","localCursorPoint","panel","panels","transform","pn","isTargetByCursor","getPanelByCover","covers","originalLength","areas","isEnd","shouldShowCover","track","dist","getTrackEnds","tail","createBaseRectCover","rectRangeConverter","edgeNameSequences","makeStyle","driftRect","nameSequence","updateBaseRect","localRange","xa","ya","x2a","y2a","widtha","heighta","updateRectShape","mainEl","childAt","childOfName","globalDir","getGlobalDirection1","getGlobalDirection2","pointsToRect","clipByPanel","formatRectRange","getTransform","localDirName","inverseMap","dir","localDirNameSeq","dirNameSequence","rectRange","toRectRange","localDelta","toLocalDelta","dirName","ind","fromRectRange","driftPolygon","localD","localZero","xmin","ymin","xmax","ymax","resetCursor","isOutsideZrArea","currPanel","setCursorStyle","preventDefault","rawE","mainShapeContain","updateCoverByMouse","eventParams","_creatingPanel","thisBrushOption","determineBrushType","coverBrushOption","getCreatingRange","defaultBrushType","mousedown","handleDragEnd","mousemove","mouseup","lineX","getLineRenderer","lineY","returnInput","localTrack","xyIndex","otherExtent","getLinearBrushOtherExtent","IRRELEVANT_EXCLUDES","onIrrelevantElement","targetCoordSysModel","getComponentByElement","topTarget","makeRectPanelClipPath","normalizeRect","localPoints","makeLinearBrushOtherExtent","specifiedXYIndex","brushWidth","base","makeRectIsTargetByCursor","targetModel","boundingRect","INCLUDE_FINDER_MAIN_TYPES","BrushTargetManager","_targetInfoList","foundCpts","parseFinder","targetInfoBuilders","builder","include","setOutputRanges","matchOutputRanges","area","coordRange","coordRanges","coordConvert","__rangeOffset","diffProcessor","xyMinMax","targetInfo","findTargetInfo","coordSyses","setInputRanges","rangeOffset","getScales","makePanelOpts","getDefaultBrushType","getPanelRect","controlSeries","targetInfoList","areaPanelId","targetInfoMatchers","formatMinMax","includeMainTypes","xAxisModels","yAxisModels","gridModels","gridModelMap","xAxesHas","yAxesHas","panelRectBuilders","xAxisDeclared","yAxisDeclared","geo","geoModels","geoModel","clone","applyTransform","axisConvert","to","rangeOrCoordRange","xminymin","xmaxymax","axisNameIndex","axisDiffProcessor","refer","scales","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","getSize","sizeOrigin","DATA_ZOOM_ID_BASE","DataZoomFeature","_brushController","updateZoomBtnStatus","updateBackBtnStatus","handlers","eventParam","brushTargetManager","makeAxisFinder","setBatch","findDataZoom","minValueSpan","maxValueSpan","found","dzModel","has","back","nextActive","_isZoomActive","dataZoomSelectActive","dzFeatureModel","xAxisId","yAxisId","zoomActive","featureDataZoomPath","dzOptions","finderResult","buildInternalOptions","axisIndexPropName","newOpt","$fromToolbox","DataZoom","TimelineModel","_initData","setCurrentIndex","currentIndex","loop","getCurrentIndex","isIndexMax","setPlayState","state","autoPlay","getPlayState","processedDataArr","dataArr","_names","dimType","controlPosition","rewind","playInterval","label","SliderTimelineModel","checkpointStyle","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","controlStyle","showPlayBtn","showPrevBtn","showNextBtn","playIcon","stopIcon","nextIcon","prevIcon","prevBtnSize","nextBtnSize","TimelineView","TimelineAxis","labelDataIndexStore","SliderTimelineView","timelineModel","layoutInfo_1","_layout","mainGroup_1","_createGroup","labelGroup","axis_1","_axis","_createAxis","formatTooltip","noName","_renderAxisLabel","_position","_doPlayStop","_updateTicksStatus","_clearTimer","parsedLabelPos","labelPosOpt","viewRect","getViewRect","horizontal","vertical","playPosition","prevBtnPosition","nextBtnPosition","labelAlignMap","labelBaselineMap","rotationMap","mainLength","controlModel","showControl","controlSize","controlGap","sizePlusGap","labelRotation","xLeft","xRight","labelAlign","labelBaseline","layoutInfo","mainGroup","_mainGroup","_labelGroup","matrix","rotateOriginX","rotateOriginY","viewBound","getBound","mainBound","labelBound","mainPosition","labelsPosition","mainBoundIdx","toBound","setOrigin","targetGroup","fromPos","dimIdx","boundIdx","setPosition","createScaleByModel","niceTicks","newGroup","_renderAxisLine","lineCap","progressLine","_progressLine","_currentPointer","_renderAxisTick","_tickSymbols","itemStyleModel","hoverStyleModel","progressStyleModel","symbolOpt","_changeTimeline","giveSymbol","ecData","dataModel","_tickLabels","normalLabelModel","hoverLabelModel","progressLabelModel","_renderControl","playState","makeBtn","willRotate","btn","makeControlIcon","_handlePlayClick","_renderCurrentPointer","pointerModel","me","onCreate","pointer","_handlePointerDrag","_handlePointerDragend","pointerMoveTo","onUpdate","nextState","_pointerChangeTimeline","mousePos","toCoord","_toAxisCoord","targetDataIndex","_findNearestTick","_timer","setTimeout","trans","axisCoord","clearTimeout","nextIndex","tickSymbols","tickLabels","toggleState","Ordinal","Time","locale","getLocaleModel","Interval","objPath","symbolType","symbolOffset","symbolRotate","noAnimation","dragging","animationCfg","stopAnimation","animateTo","installTimelineAction","replaceMerge","timelinePreprocessor","timelineOpt","timeline","compatibleEC2","ec2Types","transferItem","dataItem","itemStyleEmphasis","labelNormal","normal","excludeLabelAttr","obj","MARGINLEFT","MARGINRIGHT","upColor","upBorderColor","downColor","downBorderColor","buySignalColor","sellSignalColor","tradeBuyColor","tradeSellColor","buyData","sellData","chartOptions","updateChart","initializeChartOptions","strategy","timeframe","timeframe_ms","chartTitle","legend","dom","viewSize","link","gridIndex","initial","hasData","colDate","colOpen","colHigh","colLow","colClose","colVolume","colBuyData","colSellData","subplotCount","Object","subplots","startingZoom","forEach","options","encode","assign","main_plot","col","showSymbol","plotIndex","sk","sv","randomColor","getTradeEntries","tradesClose","nameClose","sp","closeSeries","$refs","candleChart","setOption","filteredTrades","trade","open_timestamp","data_start_ts","data_stop_ts","open_rate","close_timestamp","close_date","close_rate","required","default","components","plotOptions","plotOption","selSubPlot","newSubplotName","addSubplot","delSubplot","selAvailableIndicator","addIndicator","selIndicator","removeIndicator","usedColumns","availableGraphTypes","graphType","selColor","newColor","loadPlotConfig","loadPlotConfigFromStrategy","savePlotConfig","$event","showConfig","loadConfigFromString","tempPlotConfigValid","plotConfigJson","ftbot","tempPlotConfig","JSON","stringify","newValue","isMainPlot","usedPlotConfigName","emitPlotConfig","saveCustomPlotConfig","getStrategyPlotConfig","strategyPlotConfig","Action","State","Mutation","historicView","history","candleData","setPlotConfigName","$bvModal","getPairHistory","timerange","getPairCandles","limit","find","selectedPair","Getter","CandleChart","PlotConfigurator"],"mappings":"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","file":"js/graph~trade.54d06ff3.js","sourcesContent":["export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]);\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlotConfigurator.vue?vue&type=style&index=0&id=b343617c&scoped=true&lang=css&\"","var $ = require('../internals/export');\nvar $entries = require('../internals/object-to-array').entries;\n\n// `Object.entries` method\n// https://tc39.es/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar objectKeys = require('../internals/object-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar propertyIsEnumerable = require('../internals/object-property-is-enumerable').f;\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(O, key)) {\n        result.push(TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.es/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.es/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CandleChart.vue?vue&type=style&index=0&id=45287fd8&scoped=true&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid flex-column align-items-stretch d-flex h-100\"},[_c('b-modal',{attrs:{\"id\":\"plotConfiguratorModal\",\"title\":\"Plot Configurator\",\"ok-only\":\"\",\"hide-backdrop\":\"\",\"button-size\":\"sm\"}},[_c('PlotConfigurator',{attrs:{\"columns\":_vm.datasetColumns},model:{value:(_vm.plotConfig),callback:function ($$v) {_vm.plotConfig=$$v},expression:\"plotConfig\"}})],1),_c('div',{staticClass:\"row mr-0\"},[_c('div',{staticClass:\"col-mb-2 ml-2\"},[_c('b-select',{attrs:{\"options\":_vm.availablePairs,\"size\":\"sm\"},on:{\"change\":_vm.refresh},model:{value:(_vm.pair),callback:function ($$v) {_vm.pair=$$v},expression:\"pair\"}})],1),_c('div',{staticClass:\"col-mb-2 ml-2 mr-2\"},[_c('b-button',{attrs:{\"disabled\":!!!_vm.pair,\"size\":\"sm\"},on:{\"click\":_vm.refresh}},[_vm._v(\"↻\")])],1),(_vm.hasDataset)?_c('div',{staticClass:\"col-mb-2 ml-2 mr-2\"},[_c('small',[_vm._v(\"Buysignals: \"+_vm._s(_vm.dataset.buy_signals))]),_c('small',{staticClass:\"ml-2\"},[_vm._v(\"SellSignals: \"+_vm._s(_vm.dataset.sell_signals))])]):_vm._e(),_c('div',{staticClass:\"col-mb-2 ml-auto mr-2\"},[_c('b-select',{attrs:{\"options\":_vm.availablePlotConfigNames,\"size\":\"sm\"},on:{\"change\":_vm.plotConfigChanged},model:{value:(_vm.plotConfigName),callback:function ($$v) {_vm.plotConfigName=$$v},expression:\"plotConfigName\"}})],1),_c('div',{staticClass:\"col-mb-2 mr-2 d-flex align-items-center\"},[_c('b-checkbox',{attrs:{\"title\":\"Use UTC for graph\"},model:{value:(_vm.useUTC),callback:function ($$v) {_vm.useUTC=$$v},expression:\"useUTC\"}},[_vm._v(\"useUTC\")])],1),_c('div',{staticClass:\"col-mb-2 mr-1\"},[_c('b-button',{attrs:{\"size\":\"sm\",\"title\":\"Plot configurator\"},on:{\"click\":_vm.showConfigurator}},[_vm._v(\"⚙\")])],1)]),_c('div',{staticClass:\"row mr-1 ml-1 h-100\"},[(_vm.hasDataset)?_c('CandleChart',{attrs:{\"dataset\":_vm.dataset,\"trades\":_vm.trades,\"plot-config\":_vm.plotConfig,\"use-u-t-c\":_vm.useUTC,\"theme\":_vm.getChartTheme}}):_c('label',{staticStyle:{\"margin\":\"auto auto\",\"font-size\":\"1.5rem\"}},[_vm._v(\"No data available\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row flex-grow-1 chart-wrapper\"},[(_vm.hasData)?_c('v-chart',{ref:\"candleChart\",attrs:{\"theme\":_vm.theme,\"autoresize\":\"\",\"manual-update\":\"\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function () {\n  // eslint-disable-next-line no-bitwise\n  return `#${((Math.random() * 0xffffff) << 0).toString(16)}`;\n}\n","const ROUND_UP = 2;\nconst ROUND_DOWN = 3;\n\nexport function roundTimeframe(\n  timeframems: number,\n  timestamp: number,\n  direction: number = ROUND_DOWN,\n) {\n  const offset = timestamp % timeframems;\n  return timestamp - offset + (direction === ROUND_UP ? timeframems : 0);\n}\n\nexport default {\n  ROUND_UP,\n  ROUND_DOWN,\n  roundTimeframe,\n};\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ChartView from '../../view/Chart';\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel } from '../../util/states';\nimport Path from 'zrender/lib/graphic/Path';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys';\nvar SKIP_PROPS = ['color', 'borderColor'];\n\nvar CandlestickView =\n/** @class */\nfunction (_super) {\n  __extends(CandlestickView, _super);\n\n  function CandlestickView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CandlestickView.type;\n    return _this;\n  }\n\n  CandlestickView.prototype.render = function (seriesModel, ecModel, api) {\n    // If there is clipPath created in large mode. Remove it.\n    this.group.removeClipPath();\n\n    this._updateDrawMode(seriesModel);\n\n    this._isLargeDraw ? this._renderLarge(seriesModel) : this._renderNormal(seriesModel);\n  };\n\n  CandlestickView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this._clear();\n\n    this._updateDrawMode(seriesModel);\n  };\n\n  CandlestickView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\n    this._isLargeDraw ? this._incrementalRenderLarge(params, seriesModel) : this._incrementalRenderNormal(params, seriesModel);\n  };\n\n  CandlestickView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n\n      this._clear();\n    }\n  };\n\n  CandlestickView.prototype._renderNormal = function (seriesModel) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var needsClip = seriesModel.get('clip', true);\n    var coord = seriesModel.coordinateSystem;\n    var clipArea = coord.getArea && coord.getArea(); // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n    if (!this._data) {\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n\n        if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n          return;\n        }\n\n        var el = createNormalBox(itemLayout, newIdx, true);\n        graphic.initProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        setBoxCommon(el, data, newIdx, isSimpleBox);\n        group.add(el);\n        data.setItemGraphicEl(newIdx, el);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx); // Empty data\n\n      if (!data.hasValue(newIdx)) {\n        group.remove(el);\n        return;\n      }\n\n      var itemLayout = data.getItemLayout(newIdx);\n\n      if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n        group.remove(el);\n        return;\n      }\n\n      if (!el) {\n        el = createNormalBox(itemLayout, newIdx);\n      } else {\n        graphic.updateProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n      }\n\n      setBoxCommon(el, data, newIdx, isSimpleBox);\n      group.add(el);\n      data.setItemGraphicEl(newIdx, el);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n\n  CandlestickView.prototype._renderLarge = function (seriesModel) {\n    this._clear();\n\n    createLarge(seriesModel, this.group);\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n  };\n\n  CandlestickView.prototype._incrementalRenderNormal = function (params, seriesModel) {\n    var data = seriesModel.getData();\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var dataIndex;\n\n    while ((dataIndex = params.next()) != null) {\n      var itemLayout = data.getItemLayout(dataIndex);\n      var el = createNormalBox(itemLayout, dataIndex);\n      setBoxCommon(el, data, dataIndex, isSimpleBox);\n      el.incremental = true;\n      this.group.add(el);\n    }\n  };\n\n  CandlestickView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    createLarge(seriesModel, this.group, true);\n  };\n\n  CandlestickView.prototype.remove = function (ecModel) {\n    this._clear();\n  };\n\n  CandlestickView.prototype._clear = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  CandlestickView.type = 'candlestick';\n  return CandlestickView;\n}(ChartView);\n\nvar NormalBoxPathShape =\n/** @class */\nfunction () {\n  function NormalBoxPathShape() {}\n\n  return NormalBoxPathShape;\n}();\n\nvar NormalBoxPath =\n/** @class */\nfunction (_super) {\n  __extends(NormalBoxPath, _super);\n\n  function NormalBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'normalCandlestickBox';\n    return _this;\n  }\n\n  NormalBoxPath.prototype.getDefaultShape = function () {\n    return new NormalBoxPathShape();\n  };\n\n  NormalBoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n\n    if (this.__simpleBox) {\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[6][0], ends[6][1]);\n    } else {\n      ctx.moveTo(ends[0][0], ends[0][1]);\n      ctx.lineTo(ends[1][0], ends[1][1]);\n      ctx.lineTo(ends[2][0], ends[2][1]);\n      ctx.lineTo(ends[3][0], ends[3][1]);\n      ctx.closePath();\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[5][0], ends[5][1]);\n      ctx.moveTo(ends[6][0], ends[6][1]);\n      ctx.lineTo(ends[7][0], ends[7][1]);\n    }\n  };\n\n  return NormalBoxPath;\n}(Path);\n\nfunction createNormalBox(itemLayout, dataIndex, isInit) {\n  var ends = itemLayout.ends;\n  return new NormalBoxPath({\n    shape: {\n      points: isInit ? transInit(ends, itemLayout) : ends\n    },\n    z2: 100\n  });\n}\n\nfunction isNormalBoxClipped(clipArea, itemLayout) {\n  var clipped = true;\n\n  for (var i = 0; i < itemLayout.ends.length; i++) {\n    // If any point are in the region.\n    if (clipArea.contain(itemLayout.ends[i][0], itemLayout.ends[i][1])) {\n      clipped = false;\n      break;\n    }\n  }\n\n  return clipped;\n}\n\nfunction setBoxCommon(el, data, dataIndex, isSimpleBox) {\n  var itemModel = data.getItemModel(dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.__simpleBox = isSimpleBox;\n  setStatesStylesFromModel(el, itemModel);\n}\n\nfunction transInit(points, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[1] = itemLayout.initBaseline;\n    return point;\n  });\n}\n\nvar LargeBoxPathShape =\n/** @class */\nfunction () {\n  function LargeBoxPathShape() {}\n\n  return LargeBoxPathShape;\n}();\n\nvar LargeBoxPath =\n/** @class */\nfunction (_super) {\n  __extends(LargeBoxPath, _super);\n\n  function LargeBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'largeCandlestickBox';\n    return _this;\n  }\n\n  LargeBoxPath.prototype.getDefaultShape = function () {\n    return new LargeBoxPathShape();\n  };\n\n  LargeBoxPath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n\n    for (var i = 0; i < points.length;) {\n      if (this.__sign === points[i++]) {\n        var x = points[i++];\n        ctx.moveTo(x, points[i++]);\n        ctx.lineTo(x, points[i++]);\n      } else {\n        i += 3;\n      }\n    }\n  };\n\n  return LargeBoxPath;\n}(Path);\n\nfunction createLarge(seriesModel, group, incremental) {\n  var data = seriesModel.getData();\n  var largePoints = data.getLayout('largePoints');\n  var elP = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 1\n  });\n  group.add(elP);\n  var elN = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: -1\n  });\n  group.add(elN);\n  setLargeStyle(1, elP, seriesModel, data);\n  setLargeStyle(-1, elN, seriesModel, data);\n\n  if (incremental) {\n    elP.incremental = true;\n    elN.incremental = true;\n  }\n}\n\nfunction setLargeStyle(sign, el, seriesModel, data) {\n  // TODO put in visual?\n  var borderColor = seriesModel.get(['itemStyle', sign > 0 ? 'borderColor' : 'borderColor0']) || seriesModel.get(['itemStyle', sign > 0 ? 'color' : 'color0']); // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n\n  var itemStyle = seriesModel.getModel('itemStyle').getItemStyle(SKIP_PROPS);\n  el.useStyle(itemStyle);\n  el.style.fill = null;\n  el.style.stroke = borderColor;\n}\n\nexport default CandlestickView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createDimensions from '../../data/helper/createDimensions';\nimport List from '../../data/List';\nimport { extend, isArray } from 'zrender/lib/core/util';\n/**\n * [Usage]:\n * (1)\n * createListSimply(seriesModel, ['value']);\n * (2)\n * createListSimply(seriesModel, {\n *     coordDimensions: ['value'],\n *     dimensionsCount: 5\n * });\n */\n\nexport default function createListSimply(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({}, opt);\n  var source = seriesModel.getSource();\n  var dimensionsInfo = createDimensions(source, opt);\n  var list = new List(dimensionsInfo, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createListSimply from '../helper/createListSimply';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper';\n\nvar WhiskerBoxCommonMixin =\n/** @class */\nfunction () {\n  function WhiskerBoxCommonMixin() {}\n  /**\n   * @override\n   */\n\n\n  WhiskerBoxCommonMixin.prototype.getInitialData = function (option, ecModel) {\n    // When both types of xAxis and yAxis are 'value', layout is\n    // needed to be specified by user. Otherwise, layout can be\n    // judged by which axis is category.\n    var ordinalMeta;\n    var xAxisModel = ecModel.getComponent('xAxis', this.get('xAxisIndex'));\n    var yAxisModel = ecModel.getComponent('yAxis', this.get('yAxisIndex'));\n    var xAxisType = xAxisModel.get('type');\n    var yAxisType = yAxisModel.get('type');\n    var addOrdinal; // FIXME\n    // Consider time axis.\n\n    if (xAxisType === 'category') {\n      option.layout = 'horizontal';\n      ordinalMeta = xAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else if (yAxisType === 'category') {\n      option.layout = 'vertical';\n      ordinalMeta = yAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else {\n      option.layout = option.layout || 'horizontal';\n    }\n\n    var coordDims = ['x', 'y'];\n    var baseAxisDimIndex = option.layout === 'horizontal' ? 0 : 1;\n    var baseAxisDim = this._baseAxisDim = coordDims[baseAxisDimIndex];\n    var otherAxisDim = coordDims[1 - baseAxisDimIndex];\n    var axisModels = [xAxisModel, yAxisModel];\n    var baseAxisType = axisModels[baseAxisDimIndex].get('type');\n    var otherAxisType = axisModels[1 - baseAxisDimIndex].get('type');\n    var data = option.data; // ??? FIXME make a stage to perform data transfrom.\n    // MUST create a new data, consider setOption({}) again.\n\n    if (data && addOrdinal) {\n      var newOptionData_1 = [];\n      zrUtil.each(data, function (item, index) {\n        var newItem;\n\n        if (zrUtil.isArray(item)) {\n          newItem = item.slice();\n          item.unshift(index);\n        } else if (zrUtil.isArray(item.value)) {\n          newItem = item.value.slice();\n          item.value.unshift(index);\n        } else {\n          newItem = item;\n        }\n\n        newOptionData_1.push(newItem);\n      });\n      option.data = newOptionData_1;\n    }\n\n    var defaultValueDimensions = this.defaultValueDimensions;\n    var coordDimensions = [{\n      name: baseAxisDim,\n      type: getDimensionTypeByAxis(baseAxisType),\n      ordinalMeta: ordinalMeta,\n      otherDims: {\n        tooltip: false,\n        itemName: 0\n      },\n      dimsDef: ['base']\n    }, {\n      name: otherAxisDim,\n      type: getDimensionTypeByAxis(otherAxisType),\n      dimsDef: defaultValueDimensions.slice()\n    }];\n    return createListSimply(this, {\n      coordDimensions: coordDimensions,\n      dimensionsCount: defaultValueDimensions.length + 1,\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordDimensions, this)\n    });\n  };\n  /**\n   * If horizontal, base axis is x, otherwise y.\n   * @override\n   */\n\n\n  WhiskerBoxCommonMixin.prototype.getBaseAxis = function () {\n    var dim = this._baseAxisDim;\n    return this.ecModel.getComponent(dim + 'Axis', this.get(dim + 'AxisIndex')).axis;\n  };\n\n  return WhiskerBoxCommonMixin;\n}();\n\n;\nexport { WhiskerBoxCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon';\nimport { mixin } from 'zrender/lib/core/util';\n\nvar CandlestickSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(CandlestickSeriesModel, _super);\n\n  function CandlestickSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CandlestickSeriesModel.type;\n    _this.defaultValueDimensions = [{\n      name: 'open',\n      defaultTooltip: true\n    }, {\n      name: 'close',\n      defaultTooltip: true\n    }, {\n      name: 'lowest',\n      defaultTooltip: true\n    }, {\n      name: 'highest',\n      defaultTooltip: true\n    }];\n    return _this;\n  }\n  /**\n   * Get dimension for shadow in dataZoom\n   * @return dimension name\n   */\n\n\n  CandlestickSeriesModel.prototype.getShadowDim = function () {\n    return 'open';\n  };\n\n  CandlestickSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    var itemLayout = data.getItemLayout(dataIndex);\n    return itemLayout && selectors.rect(itemLayout.brushRect);\n  };\n\n  CandlestickSeriesModel.type = 'series.candlestick';\n  CandlestickSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  CandlestickSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    layout: null,\n    clip: true,\n    itemStyle: {\n      color: '#eb5454',\n      color0: '#47b262',\n      borderColor: '#eb5454',\n      borderColor0: '#47b262',\n      // borderColor: '#d24040',\n      // borderColor0: '#398f4f',\n      borderWidth: 1\n    },\n    emphasis: {\n      scale: true,\n      itemStyle: {\n        borderWidth: 2\n      }\n    },\n    barMaxWidth: null,\n    barMinWidth: null,\n    barWidth: null,\n    large: true,\n    largeThreshold: 600,\n    progressive: 3e3,\n    progressiveThreshold: 1e4,\n    progressiveChunkMode: 'mod',\n    animationEasing: 'linear',\n    animationDuration: 300\n  };\n  return CandlestickSeriesModel;\n}(SeriesModel);\n\nmixin(CandlestickSeriesModel, WhiskerBoxCommonMixin, true);\nexport default CandlestickSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nexport default function candlestickPreprocessor(option) {\n  if (!option || !zrUtil.isArray(option.series)) {\n    return;\n  } // Translate 'k' to 'candlestick'.\n\n\n  zrUtil.each(option.series, function (seriesItem) {\n    if (zrUtil.isObject(seriesItem) && seriesItem.type === 'k') {\n      seriesItem.type = 'candlestick';\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createRenderPlanner from '../helper/createRenderPlanner';\nimport { extend } from 'zrender/lib/core/util';\nvar positiveBorderColorQuery = ['itemStyle', 'borderColor'];\nvar negativeBorderColorQuery = ['itemStyle', 'borderColor0'];\nvar positiveColorQuery = ['itemStyle', 'color'];\nvar negativeColorQuery = ['itemStyle', 'color0'];\nvar candlestickVisual = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    function getColor(sign, model) {\n      return model.get(sign > 0 ? positiveColorQuery : negativeColorQuery);\n    }\n\n    function getBorderColor(sign, model) {\n      return model.get(sign > 0 ? positiveBorderColorQuery : negativeBorderColorQuery);\n    } // Only visible series has each data be visual encoded\n\n\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n\n    var isLargeRender = seriesModel.pipelineContext.large;\n    return !isLargeRender && {\n      progress: function (params, data) {\n        var dataIndex;\n\n        while ((dataIndex = params.next()) != null) {\n          var itemModel = data.getItemModel(dataIndex);\n          var sign = data.getItemLayout(dataIndex).sign;\n          var style = itemModel.getItemStyle();\n          style.fill = getColor(sign, itemModel);\n          style.stroke = getBorderColor(sign, itemModel) || style.fill;\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\n          extend(existsStyle, style);\n        }\n      }\n    };\n  }\n};\nexport default candlestickVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\nimport { subPixelOptimize } from '../../util/graphic';\nimport createRenderPlanner from '../helper/createRenderPlanner';\nimport { parsePercent } from '../../util/number';\nimport { retrieve2 } from 'zrender/lib/core/util';\nvar LargeArr = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nvar candlestickLayout = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  reset: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var data = seriesModel.getData();\n    var candleWidth = calculateCandleWidth(seriesModel, data);\n    var cDimIdx = 0;\n    var vDimIdx = 1;\n    var coordDims = ['x', 'y'];\n    var cDim = data.mapDimension(coordDims[cDimIdx]);\n    var vDims = data.mapDimensionsAll(coordDims[vDimIdx]);\n    var openDim = vDims[0];\n    var closeDim = vDims[1];\n    var lowestDim = vDims[2];\n    var highestDim = vDims[3];\n    data.setLayout({\n      candleWidth: candleWidth,\n      // The value is experimented visually.\n      isSimpleBox: candleWidth <= 1.3\n    });\n\n    if (cDim == null || vDims.length < 4) {\n      return;\n    }\n\n    return {\n      progress: seriesModel.pipelineContext.large ? largeProgress : normalProgress\n    };\n\n    function normalProgress(params, data) {\n      var dataIndex;\n\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = data.get(cDim, dataIndex);\n        var openVal = data.get(openDim, dataIndex);\n        var closeVal = data.get(closeDim, dataIndex);\n        var lowestVal = data.get(lowestDim, dataIndex);\n        var highestVal = data.get(highestDim, dataIndex);\n        var ocLow = Math.min(openVal, closeVal);\n        var ocHigh = Math.max(openVal, closeVal);\n        var ocLowPoint = getPoint(ocLow, axisDimVal);\n        var ocHighPoint = getPoint(ocHigh, axisDimVal);\n        var lowestPoint = getPoint(lowestVal, axisDimVal);\n        var highestPoint = getPoint(highestVal, axisDimVal);\n        var ends = [];\n        addBodyEnd(ends, ocHighPoint, 0);\n        addBodyEnd(ends, ocLowPoint, 1);\n        ends.push(subPixelOptimizePoint(highestPoint), subPixelOptimizePoint(ocHighPoint), subPixelOptimizePoint(lowestPoint), subPixelOptimizePoint(ocLowPoint));\n        data.setItemLayout(dataIndex, {\n          sign: getSign(data, dataIndex, openVal, closeVal, closeDim),\n          initBaseline: openVal > closeVal ? ocHighPoint[vDimIdx] : ocLowPoint[vDimIdx],\n          ends: ends,\n          brushRect: makeBrushRect(lowestVal, highestVal, axisDimVal)\n        });\n      }\n\n      function getPoint(val, axisDimVal) {\n        var p = [];\n        p[cDimIdx] = axisDimVal;\n        p[vDimIdx] = val;\n        return isNaN(axisDimVal) || isNaN(val) ? [NaN, NaN] : coordSys.dataToPoint(p);\n      }\n\n      function addBodyEnd(ends, point, start) {\n        var point1 = point.slice();\n        var point2 = point.slice();\n        point1[cDimIdx] = subPixelOptimize(point1[cDimIdx] + candleWidth / 2, 1, false);\n        point2[cDimIdx] = subPixelOptimize(point2[cDimIdx] - candleWidth / 2, 1, true);\n        start ? ends.push(point1, point2) : ends.push(point2, point1);\n      }\n\n      function makeBrushRect(lowestVal, highestVal, axisDimVal) {\n        var pmin = getPoint(lowestVal, axisDimVal);\n        var pmax = getPoint(highestVal, axisDimVal);\n        pmin[cDimIdx] -= candleWidth / 2;\n        pmax[cDimIdx] -= candleWidth / 2;\n        return {\n          x: pmin[0],\n          y: pmin[1],\n          width: vDimIdx ? candleWidth : pmax[0] - pmin[0],\n          height: vDimIdx ? pmax[1] - pmin[1] : candleWidth\n        };\n      }\n\n      function subPixelOptimizePoint(point) {\n        point[cDimIdx] = subPixelOptimize(point[cDimIdx], 1);\n        return point;\n      }\n    }\n\n    function largeProgress(params, data) {\n      // Structure: [sign, x, yhigh, ylow, sign, x, yhigh, ylow, ...]\n      var points = new LargeArr(params.count * 4);\n      var offset = 0;\n      var point;\n      var tmpIn = [];\n      var tmpOut = [];\n      var dataIndex;\n\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = data.get(cDim, dataIndex);\n        var openVal = data.get(openDim, dataIndex);\n        var closeVal = data.get(closeDim, dataIndex);\n        var lowestVal = data.get(lowestDim, dataIndex);\n        var highestVal = data.get(highestDim, dataIndex);\n\n        if (isNaN(axisDimVal) || isNaN(lowestVal) || isNaN(highestVal)) {\n          points[offset++] = NaN;\n          offset += 3;\n          continue;\n        }\n\n        points[offset++] = getSign(data, dataIndex, openVal, closeVal, closeDim);\n        tmpIn[cDimIdx] = axisDimVal;\n        tmpIn[vDimIdx] = lowestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[0] : NaN;\n        points[offset++] = point ? point[1] : NaN;\n        tmpIn[vDimIdx] = highestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[1] : NaN;\n      }\n\n      data.setLayout('largePoints', points);\n    }\n  }\n};\n\nfunction getSign(data, dataIndex, openVal, closeVal, closeDim) {\n  var sign;\n\n  if (openVal > closeVal) {\n    sign = -1;\n  } else if (openVal < closeVal) {\n    sign = 1;\n  } else {\n    sign = dataIndex > 0 // If close === open, compare with close of last record\n    ? data.get(closeDim, dataIndex - 1) <= closeVal ? 1 : -1 : // No record of previous, set to be positive\n    1;\n  }\n\n  return sign;\n}\n\nfunction calculateCandleWidth(seriesModel, data) {\n  var baseAxis = seriesModel.getBaseAxis();\n  var extent;\n  var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : (extent = baseAxis.getExtent(), Math.abs(extent[1] - extent[0]) / data.count());\n  var barMaxWidth = parsePercent(retrieve2(seriesModel.get('barMaxWidth'), bandWidth), bandWidth);\n  var barMinWidth = parsePercent(retrieve2(seriesModel.get('barMinWidth'), 1), bandWidth);\n  var barWidth = seriesModel.get('barWidth');\n  return barWidth != null ? parsePercent(barWidth, bandWidth) // Put max outer to ensure bar visible in spite of overlap.\n  : Math.max(Math.min(bandWidth / 2, barMaxWidth), barMinWidth);\n}\n\nexport default candlestickLayout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CandlestickView from './CandlestickView';\nimport CandlestickSeriesModel from './CandlestickSeries';\nimport preprocessor from './preprocessor';\nimport candlestickVisual from './candlestickVisual';\nimport candlestickLayout from './candlestickLayout';\nexport function install(registers) {\n  registers.registerChartView(CandlestickView);\n  registers.registerSeriesModel(CandlestickSeriesModel);\n  registers.registerPreprocessor(preprocessor);\n  registers.registerVisual(candlestickVisual);\n  registers.registerLayout(candlestickLayout);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createListFromArray from '../helper/createListFromArray';\nimport SeriesModel from '../../model/Series';\n\nvar ScatterSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(ScatterSeriesModel, _super);\n\n  function ScatterSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScatterSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  ScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createListFromArray(this.getSource(), this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  ScatterSeriesModel.prototype.getProgressive = function () {\n    var progressive = this.option.progressive;\n\n    if (progressive == null) {\n      // PENDING\n      return this.option.large ? 5e3 : this.get('progressive');\n    }\n\n    return progressive;\n  };\n\n  ScatterSeriesModel.prototype.getProgressiveThreshold = function () {\n    var progressiveThreshold = this.option.progressiveThreshold;\n\n    if (progressiveThreshold == null) {\n      // PENDING\n      return this.option.large ? 1e4 : this.get('progressiveThreshold');\n    }\n\n    return progressiveThreshold;\n  };\n\n  ScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.point(data.getItemLayout(dataIndex));\n  };\n\n  ScatterSeriesModel.type = 'series.scatter';\n  ScatterSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  ScatterSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    symbolSize: 10,\n    // symbolRotate: null,  // 图形旋转控制\n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    // cursor: null,\n    itemStyle: {\n      opacity: 0.8 // color: 各异\n\n    },\n    emphasis: {\n      scale: true\n    },\n    // If clip the overflow graphics\n    // Works on cartesian / polar series\n    clip: true,\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    } // progressive: null\n\n  };\n  return ScatterSeriesModel;\n}(SeriesModel);\n\nexport default ScatterSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Float32Array */\n// TODO Batch by color\n\nimport * as graphic from '../../util/graphic';\nimport { createSymbol } from '../../util/symbol';\nimport IncrementalDisplayable from 'zrender/lib/graphic/IncrementalDisplayable';\nimport { getECData } from '../../util/innerStore';\nvar BOOST_SIZE_THRESHOLD = 4;\n\nvar LargeSymbolPathShape =\n/** @class */\nfunction () {\n  function LargeSymbolPathShape() {}\n\n  return LargeSymbolPathShape;\n}();\n\nvar LargeSymbolPath =\n/** @class */\nfunction (_super) {\n  __extends(LargeSymbolPath, _super);\n\n  function LargeSymbolPath(opts) {\n    return _super.call(this, opts) || this;\n  }\n\n  LargeSymbolPath.prototype.getDefaultShape = function () {\n    return new LargeSymbolPathShape();\n  };\n\n  LargeSymbolPath.prototype.buildPath = function (path, shape) {\n    var points = shape.points;\n    var size = shape.size;\n    var symbolProxy = this.symbolProxy;\n    var symbolProxyShape = symbolProxy.shape;\n    var ctx = path.getContext ? path.getContext() : path;\n    var canBoost = ctx && size[0] < BOOST_SIZE_THRESHOLD; // Do draw in afterBrush.\n\n    if (canBoost) {\n      this._ctx = ctx;\n      return;\n    }\n\n    this._ctx = null;\n\n    for (var i = 0; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n\n      if (this.softClipShape && !this.softClipShape.contain(x, y)) {\n        continue;\n      }\n\n      symbolProxyShape.x = x - size[0] / 2;\n      symbolProxyShape.y = y - size[1] / 2;\n      symbolProxyShape.width = size[0];\n      symbolProxyShape.height = size[1];\n      symbolProxy.buildPath(path, symbolProxyShape, true);\n    }\n  };\n\n  LargeSymbolPath.prototype.afterBrush = function () {\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var ctx = this._ctx;\n\n    if (!ctx) {\n      return;\n    } // PENDING If style or other canvas status changed?\n\n\n    for (var i = 0; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n\n      if (this.softClipShape && !this.softClipShape.contain(x, y)) {\n        continue;\n      } // fillRect is faster than building a rect path and draw.\n      // And it support light globalCompositeOperation.\n\n\n      ctx.fillRect(x - size[0] / 2, y - size[1] / 2, size[0], size[1]);\n    }\n  };\n\n  LargeSymbolPath.prototype.findDataIndex = function (x, y) {\n    // TODO ???\n    // Consider transform\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var w = Math.max(size[0], 4);\n    var h = Math.max(size[1], 4); // Not consider transform\n    // Treat each element as a rect\n    // top down traverse\n\n    for (var idx = points.length / 2 - 1; idx >= 0; idx--) {\n      var i = idx * 2;\n      var x0 = points[i] - w / 2;\n      var y0 = points[i + 1] - h / 2;\n\n      if (x >= x0 && y >= y0 && x <= x0 + w && y <= y0 + h) {\n        return idx;\n      }\n    }\n\n    return -1;\n  };\n\n  return LargeSymbolPath;\n}(graphic.Path);\n\nvar LargeSymbolDraw =\n/** @class */\nfunction () {\n  function LargeSymbolDraw() {\n    this.group = new graphic.Group();\n  }\n\n  LargeSymbolDraw.prototype.isPersistent = function () {\n    return !this._incremental;\n  };\n\n  ;\n  /**\n   * Update symbols draw by new data\n   */\n\n  LargeSymbolDraw.prototype.updateData = function (data, opt) {\n    this.group.removeAll();\n    var symbolEl = new LargeSymbolPath({\n      rectHover: true,\n      cursor: 'default'\n    });\n    symbolEl.setShape({\n      points: data.getLayout('points')\n    });\n\n    this._setCommon(symbolEl, data, false, opt);\n\n    this.group.add(symbolEl);\n    this._incremental = null;\n  };\n\n  LargeSymbolDraw.prototype.updateLayout = function (data) {\n    if (this._incremental) {\n      return;\n    }\n\n    var points = data.getLayout('points');\n    this.group.eachChild(function (child) {\n      if (child.startIndex != null) {\n        var len = (child.endIndex - child.startIndex) * 2;\n        var byteOffset = child.startIndex * 4 * 2;\n        points = new Float32Array(points.buffer, byteOffset, len);\n      }\n\n      child.setShape('points', points);\n    });\n  };\n\n  LargeSymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this.group.removeAll();\n\n    this._clearIncremental(); // Only use incremental displayables when data amount is larger than 2 million.\n    // PENDING Incremental data?\n\n\n    if (data.count() > 2e6) {\n      if (!this._incremental) {\n        this._incremental = new IncrementalDisplayable({\n          silent: true\n        });\n      }\n\n      this.group.add(this._incremental);\n    } else {\n      this._incremental = null;\n    }\n  };\n\n  LargeSymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    var symbolEl;\n\n    if (this._incremental) {\n      symbolEl = new LargeSymbolPath();\n\n      this._incremental.addDisplayable(symbolEl, true);\n    } else {\n      symbolEl = new LargeSymbolPath({\n        rectHover: true,\n        cursor: 'default',\n        startIndex: taskParams.start,\n        endIndex: taskParams.end\n      });\n      symbolEl.incremental = true;\n      this.group.add(symbolEl);\n    }\n\n    symbolEl.setShape({\n      points: data.getLayout('points')\n    });\n\n    this._setCommon(symbolEl, data, !!this._incremental, opt);\n  };\n\n  LargeSymbolDraw.prototype._setCommon = function (symbolEl, data, isIncremental, opt) {\n    var hostModel = data.hostModel;\n    opt = opt || {};\n    var size = data.getVisual('symbolSize');\n    symbolEl.setShape('size', size instanceof Array ? size : [size, size]);\n    symbolEl.softClipShape = opt.clipShape || null; // Create symbolProxy to build path for each data\n\n    symbolEl.symbolProxy = createSymbol(data.getVisual('symbol'), 0, 0, 0, 0); // Use symbolProxy setColor method\n\n    symbolEl.setColor = symbolEl.symbolProxy.setColor;\n    var extrudeShadow = symbolEl.shape.size[0] < BOOST_SIZE_THRESHOLD;\n    symbolEl.useStyle( // Draw shadow when doing fillRect is extremely slow.\n    hostModel.getModel('itemStyle').getItemStyle(extrudeShadow ? ['color', 'shadowBlur', 'shadowColor'] : ['color']));\n    var globalStyle = data.getVisual('style');\n    var visualColor = globalStyle && globalStyle.fill;\n\n    if (visualColor) {\n      symbolEl.setColor(visualColor);\n    }\n\n    if (!isIncremental) {\n      var ecData_1 = getECData(symbolEl); // Enable tooltip\n      // PENDING May have performance issue when path is extremely large\n\n      ecData_1.seriesIndex = hostModel.seriesIndex;\n      symbolEl.on('mousemove', function (e) {\n        ecData_1.dataIndex = null;\n        var dataIndex = symbolEl.findDataIndex(e.offsetX, e.offsetY);\n\n        if (dataIndex >= 0) {\n          // Provide dataIndex for tooltip\n          ecData_1.dataIndex = dataIndex + (symbolEl.startIndex || 0);\n        }\n      });\n    }\n  };\n\n  LargeSymbolDraw.prototype.remove = function () {\n    this._clearIncremental();\n\n    this._incremental = null;\n    this.group.removeAll();\n  };\n\n  LargeSymbolDraw.prototype._clearIncremental = function () {\n    var incremental = this._incremental;\n\n    if (incremental) {\n      incremental.clearDisplaybles();\n    }\n  };\n\n  return LargeSymbolDraw;\n}();\n\nexport default LargeSymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw';\nimport LargeSymbolDraw from '../helper/LargeSymbolDraw';\nimport pointsLayout from '../../layout/points';\nimport ChartView from '../../view/Chart';\n\nvar ScatterView =\n/** @class */\nfunction (_super) {\n  __extends(ScatterView, _super);\n\n  function ScatterView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScatterView.type;\n    return _this;\n  }\n\n  ScatterView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n    symbolDraw.updateData(data, {\n      // TODO\n      // If this parameter should be a shape or a bounding volume\n      // shape will be more general.\n      // But bounding volume like bounding rect will be much faster in the contain calculation\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this._finished = true;\n  };\n\n  ScatterView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n    symbolDraw.incrementalPrepareUpdate(data);\n    this._finished = false;\n  };\n\n  ScatterView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    this._symbolDraw.incrementalUpdate(taskParams, seriesModel.getData(), {\n      clipShape: this._getClipShape(seriesModel)\n    });\n\n    this._finished = taskParams.end === seriesModel.getData().count();\n  };\n\n  ScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData(); // Must mark group dirty and make sure the incremental layer will be cleared\n    // PENDING\n\n    this.group.dirty();\n\n    if (!this._finished || data.count() > 1e4 || !this._symbolDraw.isPersistent()) {\n      return {\n        update: true\n      };\n    } else {\n      var res = pointsLayout('').reset(seriesModel, ecModel, api);\n\n      if (res.progress) {\n        res.progress({\n          start: 0,\n          end: data.count(),\n          count: data.count()\n        }, data);\n      }\n\n      this._symbolDraw.updateLayout(data);\n    }\n  };\n\n  ScatterView.prototype._getClipShape = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\n    return seriesModel.get('clip', true) ? clipArea : null;\n  };\n\n  ScatterView.prototype._updateSymbolDraw = function (data, seriesModel) {\n    var symbolDraw = this._symbolDraw;\n    var pipelineContext = seriesModel.pipelineContext;\n    var isLargeDraw = pipelineContext.large;\n\n    if (!symbolDraw || isLargeDraw !== this._isLargeDraw) {\n      symbolDraw && symbolDraw.remove();\n      symbolDraw = this._symbolDraw = isLargeDraw ? new LargeSymbolDraw() : new SymbolDraw();\n      this._isLargeDraw = isLargeDraw;\n      this.group.removeAll();\n    }\n\n    this.group.add(symbolDraw.group);\n    return symbolDraw;\n  };\n\n  ScatterView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(true);\n    this._symbolDraw = null;\n  };\n\n  ScatterView.prototype.dispose = function () {};\n\n  ScatterView.type = 'scatter';\n  return ScatterView;\n}(ChartView);\n\nexport default ScatterView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component';\n\nvar GridModel =\n/** @class */\nfunction (_super) {\n  __extends(GridModel, _super);\n\n  function GridModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  GridModel.type = 'grid';\n  GridModel.dependencies = ['xAxis', 'yAxis'];\n  GridModel.layoutMode = 'box';\n  GridModel.defaultOption = {\n    show: false,\n    zlevel: 0,\n    z: 0,\n    left: '10%',\n    top: 60,\n    right: '10%',\n    bottom: 70,\n    // If grid size contain label\n    containLabel: false,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderWidth: 1,\n    borderColor: '#ccc'\n  };\n  return GridModel;\n}(ComponentModel);\n\nexport default GridModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisModelCommonMixin =\n/** @class */\nfunction () {\n  function AxisModelCommonMixin() {}\n\n  AxisModelCommonMixin.prototype.getNeedCrossZero = function () {\n    var option = this.option;\n    return !option.scale;\n  };\n  /**\n   * Should be implemented by each axis model if necessary.\n   * @return coordinate system model\n   */\n\n\n  AxisModelCommonMixin.prototype.getCoordSysModel = function () {\n    return;\n  };\n\n  return AxisModelCommonMixin;\n}();\n\nexport { AxisModelCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin';\nimport { SINGLE_REFERRING } from '../../util/model';\n\nvar CartesianAxisModel =\n/** @class */\nfunction (_super) {\n  __extends(CartesianAxisModel, _super);\n\n  function CartesianAxisModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  CartesianAxisModel.prototype.getCoordSysModel = function () {\n    return this.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n  };\n\n  CartesianAxisModel.type = 'cartesian2dAxis';\n  return CartesianAxisModel;\n}(ComponentModel);\n\nexport { CartesianAxisModel };\nzrUtil.mixin(CartesianAxisModel, AxisModelCommonMixin);\nexport default CartesianAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nvar defaultOption = {\n  show: true,\n  zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By default auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {},\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: '#6E7079',\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15]\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12\n  },\n  splitLine: {\n    show: true,\n    lineStyle: {\n      color: ['#E0E6F1'],\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: ['rgba(250,250,250,0.2)', 'rgba(210,219,238,0.2)']\n    }\n  }\n};\nvar categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  deduplication: null,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\nvar valueAxis = zrUtil.merge({\n  boundaryGap: [0, 0],\n  axisLine: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  axisTick: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  splitNumber: 5,\n  minorTick: {\n    // Minor tick, not available for cateogry axis.\n    show: false,\n    // Split number of minor ticks. The value should be in range of (0, 100)\n    splitNumber: 5,\n    // Lenght of minor tick\n    length: 3,\n    // Line style\n    lineStyle: {// Default to be same with axisTick\n    }\n  },\n  minorSplitLine: {\n    show: false,\n    lineStyle: {\n      color: '#F4F7FD',\n      width: 1\n    }\n  }\n}, defaultOption);\nvar timeAxis = zrUtil.merge({\n  scale: true,\n  splitNumber: 6,\n  axisLabel: {\n    // To eliminate labels that are not nice\n    showMinLabel: false,\n    showMaxLabel: false,\n    rich: {\n      primary: {\n        fontWeight: 'bold'\n      }\n    }\n  },\n  splitLine: {\n    show: false\n  }\n}, valueAxis);\nvar logAxis = zrUtil.defaults({\n  scale: true,\n  logBase: 10\n}, valueAxis);\nexport default {\n  category: categoryAxis,\n  value: valueAxis,\n  time: timeAxis,\n  log: logAxis\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport var AXIS_TYPES = {\n  value: 1,\n  category: 1,\n  time: 1,\n  log: 1\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport axisDefault from './axisDefault';\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout';\nimport OrdinalMeta from '../data/OrdinalMeta';\nimport { AXIS_TYPES } from './axisCommonTypes';\nimport { each, merge } from 'zrender/lib/core/util';\n/**\n * Generate sub axis model class\n * @param axisName 'x' 'y' 'radius' 'angle' 'parallel' ...\n */\n\nexport default function axisModelCreator(registers, axisName, BaseAxisModelClass, extraDefaultOption) {\n  each(AXIS_TYPES, function (v, axisType) {\n    var defaultOption = merge(merge({}, axisDefault[axisType], true), extraDefaultOption, true);\n\n    var AxisModel =\n    /** @class */\n    function (_super) {\n      __extends(AxisModel, _super);\n\n      function AxisModel() {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        var _this = _super.apply(this, args) || this;\n\n        _this.type = axisName + 'Axis.' + axisType;\n        return _this;\n      }\n\n      AxisModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n        var layoutMode = fetchLayoutMode(this);\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        merge(option, themeModel.get(axisType + 'Axis'));\n        merge(option, this.getDefaultOption());\n        option.type = getAxisType(option);\n\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      };\n\n      AxisModel.prototype.optionUpdated = function () {\n        var thisOption = this.option;\n\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      };\n      /**\n       * Should not be called before all of 'getInitailData' finished.\n       * Because categories are collected during initializing data.\n       */\n\n\n      AxisModel.prototype.getCategories = function (rawData) {\n        var option = this.option; // FIXME\n        // warning if called before all of 'getInitailData' finished.\n\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n\n          return this.__ordinalMeta.categories;\n        }\n      };\n\n      AxisModel.prototype.getOrdinalMeta = function () {\n        return this.__ordinalMeta;\n      };\n\n      AxisModel.type = axisName + 'Axis.' + axisType;\n      AxisModel.defaultOption = defaultOption;\n      return AxisModel;\n    }(BaseAxisModelClass);\n\n    registers.registerComponentModel(AxisModel);\n  });\n  registers.registerSubTypeDefaulter(axisName + 'Axis', getAxisType);\n}\n\nfunction getAxisType(option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\n\nvar Cartesian =\n/** @class */\nfunction () {\n  function Cartesian(name) {\n    this.type = 'cartesian';\n    this._dimList = [];\n    this._axes = {};\n    this.name = name || '';\n  }\n\n  Cartesian.prototype.getAxis = function (dim) {\n    return this._axes[dim];\n  };\n\n  Cartesian.prototype.getAxes = function () {\n    return zrUtil.map(this._dimList, function (dim) {\n      return this._axes[dim];\n    }, this);\n  };\n\n  Cartesian.prototype.getAxesByScale = function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  };\n\n  Cartesian.prototype.addAxis = function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n\n    this._dimList.push(dim);\n  };\n\n  return Cartesian;\n}();\n\n;\nexport default Cartesian;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport Cartesian from './Cartesian';\nimport { invert } from 'zrender/lib/core/matrix';\nimport { applyTransform } from 'zrender/lib/core/vector';\nexport var cartesian2DDimensions = ['x', 'y'];\n\nfunction canCalculateAffineTransform(scale) {\n  return scale.type === 'interval' || scale.type === 'time';\n}\n\nvar Cartesian2D =\n/** @class */\nfunction (_super) {\n  __extends(Cartesian2D, _super);\n\n  function Cartesian2D() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'cartesian2d';\n    _this.dimensions = cartesian2DDimensions;\n    return _this;\n  }\n  /**\n   * Calculate an affine transform matrix if two axes are time or value.\n   * It's mainly for accelartion on the large time series data.\n   */\n\n\n  Cartesian2D.prototype.calcAffineTransform = function () {\n    this._transform = this._invTransform = null;\n    var xAxisScale = this.getAxis('x').scale;\n    var yAxisScale = this.getAxis('y').scale;\n\n    if (!canCalculateAffineTransform(xAxisScale) || !canCalculateAffineTransform(yAxisScale)) {\n      return;\n    }\n\n    var xScaleExtent = xAxisScale.getExtent();\n    var yScaleExtent = yAxisScale.getExtent();\n    var start = this.dataToPoint([xScaleExtent[0], yScaleExtent[0]]);\n    var end = this.dataToPoint([xScaleExtent[1], yScaleExtent[1]]);\n    var xScaleSpan = xScaleExtent[1] - xScaleExtent[0];\n    var yScaleSpan = yScaleExtent[1] - yScaleExtent[0];\n\n    if (!xScaleSpan || !yScaleSpan) {\n      return;\n    } // Accelerate data to point calculation on the special large time series data.\n\n\n    var scaleX = (end[0] - start[0]) / xScaleSpan;\n    var scaleY = (end[1] - start[1]) / yScaleSpan;\n    var translateX = start[0] - xScaleExtent[0] * scaleX;\n    var translateY = start[1] - yScaleExtent[0] * scaleY;\n    var m = this._transform = [scaleX, 0, 0, scaleY, translateX, translateY];\n    this._invTransform = invert([], m);\n  };\n  /**\n   * Base axis will be used on stacking.\n   */\n\n\n  Cartesian2D.prototype.getBaseAxis = function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  };\n\n  Cartesian2D.prototype.containPoint = function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  };\n\n  Cartesian2D.prototype.containData = function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  };\n\n  Cartesian2D.prototype.dataToPoint = function (data, clamp, out) {\n    out = out || [];\n    var xVal = data[0];\n    var yVal = data[1]; // Fast path\n\n    if (this._transform // It's supported that if data is like `[Inifity, 123]`, where only Y pixel calculated.\n    && xVal != null && isFinite(xVal) && yVal != null && isFinite(yVal)) {\n      return applyTransform(out, data, this._transform);\n    }\n\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(xVal, clamp));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(yVal, clamp));\n    return out;\n  };\n\n  Cartesian2D.prototype.clampData = function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  };\n\n  Cartesian2D.prototype.pointToData = function (point, clamp) {\n    var out = [];\n\n    if (this._invTransform) {\n      return applyTransform(out, point, this._invTransform);\n    }\n\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]), clamp);\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]), clamp);\n    return out;\n  };\n\n  Cartesian2D.prototype.getOtherAxis = function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  };\n  /**\n   * Get rect area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   */\n\n\n  Cartesian2D.prototype.getArea = function () {\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]);\n    var y = Math.min(yExtent[0], yExtent[1]);\n    var width = Math.max(xExtent[0], xExtent[1]) - x;\n    var height = Math.max(yExtent[0], yExtent[1]) - y;\n    return new BoundingRect(x, y, width, height);\n  };\n\n  return Cartesian2D;\n}(Cartesian);\n\n;\nexport default Cartesian2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as textContain from 'zrender/lib/contain/text';\nimport { makeInner } from '../util/model';\nimport { makeLabelFormatter, getOptionCategoryInterval, shouldShowAllLabels } from './axisHelper';\nvar inner = makeInner();\nexport function createAxisLabels(axis) {\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryLabels(axis) : makeRealNumberLabels(axis);\n}\n/**\n * @param {module:echats/coord/Axis} axis\n * @param {module:echarts/model/Model} tickModel For example, can be axisTick, splitLine, splitArea.\n * @return {Object} {\n *     ticks: Array.<number>\n *     tickCategoryInterval: number\n * }\n */\n\nexport function createAxisTicks(axis, tickModel) {\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryTicks(axis, tickModel) : {\n    ticks: zrUtil.map(axis.scale.getTicks(), function (tick) {\n      return tick.value;\n    })\n  };\n}\n\nfunction makeCategoryLabels(axis) {\n  var labelModel = axis.getLabelModel();\n  var result = makeCategoryLabelsActually(axis, labelModel);\n  return !labelModel.get('show') || axis.scale.isBlank() ? {\n    labels: [],\n    labelCategoryInterval: result.labelCategoryInterval\n  } : result;\n}\n\nfunction makeCategoryLabelsActually(axis, labelModel) {\n  var labelsCache = getListCache(axis, 'labels');\n  var optionLabelInterval = getOptionCategoryInterval(labelModel);\n  var result = listCacheGet(labelsCache, optionLabelInterval);\n\n  if (result) {\n    return result;\n  }\n\n  var labels;\n  var numericLabelInterval;\n\n  if (zrUtil.isFunction(optionLabelInterval)) {\n    labels = makeLabelsByCustomizedCategoryInterval(axis, optionLabelInterval);\n  } else {\n    numericLabelInterval = optionLabelInterval === 'auto' ? makeAutoCategoryInterval(axis) : optionLabelInterval;\n    labels = makeLabelsByNumericCategoryInterval(axis, numericLabelInterval);\n  } // Cache to avoid calling interval function repeatly.\n\n\n  return listCacheSet(labelsCache, optionLabelInterval, {\n    labels: labels,\n    labelCategoryInterval: numericLabelInterval\n  });\n}\n\nfunction makeCategoryTicks(axis, tickModel) {\n  var ticksCache = getListCache(axis, 'ticks');\n  var optionTickInterval = getOptionCategoryInterval(tickModel);\n  var result = listCacheGet(ticksCache, optionTickInterval);\n\n  if (result) {\n    return result;\n  }\n\n  var ticks;\n  var tickCategoryInterval; // Optimize for the case that large category data and no label displayed,\n  // we should not return all ticks.\n\n  if (!tickModel.get('show') || axis.scale.isBlank()) {\n    ticks = [];\n  }\n\n  if (zrUtil.isFunction(optionTickInterval)) {\n    ticks = makeLabelsByCustomizedCategoryInterval(axis, optionTickInterval, true);\n  } // Always use label interval by default despite label show. Consider this\n  // scenario, Use multiple grid with the xAxis sync, and only one xAxis shows\n  // labels. `splitLine` and `axisTick` should be consistent in this case.\n  else if (optionTickInterval === 'auto') {\n      var labelsResult = makeCategoryLabelsActually(axis, axis.getLabelModel());\n      tickCategoryInterval = labelsResult.labelCategoryInterval;\n      ticks = zrUtil.map(labelsResult.labels, function (labelItem) {\n        return labelItem.tickValue;\n      });\n    } else {\n      tickCategoryInterval = optionTickInterval;\n      ticks = makeLabelsByNumericCategoryInterval(axis, tickCategoryInterval, true);\n    } // Cache to avoid calling interval function repeatly.\n\n\n  return listCacheSet(ticksCache, optionTickInterval, {\n    ticks: ticks,\n    tickCategoryInterval: tickCategoryInterval\n  });\n}\n\nfunction makeRealNumberLabels(axis) {\n  var ticks = axis.scale.getTicks();\n  var labelFormatter = makeLabelFormatter(axis);\n  return {\n    labels: zrUtil.map(ticks, function (tick, idx) {\n      return {\n        formattedLabel: labelFormatter(tick, idx),\n        rawLabel: axis.scale.getLabel(tick),\n        tickValue: tick.value\n      };\n    })\n  };\n}\n\nfunction getListCache(axis, prop) {\n  // Because key can be funciton, and cache size always be small, we use array cache.\n  return inner(axis)[prop] || (inner(axis)[prop] = []);\n}\n\nfunction listCacheGet(cache, key) {\n  for (var i = 0; i < cache.length; i++) {\n    if (cache[i].key === key) {\n      return cache[i].value;\n    }\n  }\n}\n\nfunction listCacheSet(cache, key, value) {\n  cache.push({\n    key: key,\n    value: value\n  });\n  return value;\n}\n\nfunction makeAutoCategoryInterval(axis) {\n  var result = inner(axis).autoInterval;\n  return result != null ? result : inner(axis).autoInterval = axis.calculateCategoryInterval();\n}\n/**\n * Calculate interval for category axis ticks and labels.\n * To get precise result, at least one of `getRotate` and `isHorizontal`\n * should be implemented in axis.\n */\n\n\nexport function calculateCategoryInterval(axis) {\n  var params = fetchAutoCategoryIntervalCalculationParams(axis);\n  var labelFormatter = makeLabelFormatter(axis);\n  var rotation = (params.axisRotate - params.labelRotate) / 180 * Math.PI;\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent(); // Providing this method is for optimization:\n  // avoid generating a long array by `getTicks`\n  // in large category data case.\n\n  var tickCount = ordinalScale.count();\n\n  if (ordinalExtent[1] - ordinalExtent[0] < 1) {\n    return 0;\n  }\n\n  var step = 1; // Simple optimization. Empirical value: tick count should less than 40.\n\n  if (tickCount > 40) {\n    step = Math.max(1, Math.floor(tickCount / 40));\n  }\n\n  var tickValue = ordinalExtent[0];\n  var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\n  var unitW = Math.abs(unitSpan * Math.cos(rotation));\n  var unitH = Math.abs(unitSpan * Math.sin(rotation));\n  var maxW = 0;\n  var maxH = 0; // Caution: Performance sensitive for large category data.\n  // Consider dataZoom, we should make appropriate step to avoid O(n) loop.\n\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    var width = 0;\n    var height = 0; // Not precise, do not consider align and vertical align\n    // and each distance from axis line yet.\n\n    var rect = textContain.getBoundingRect(labelFormatter({\n      value: tickValue\n    }), params.font, 'center', 'top'); // Magic number\n\n    width = rect.width * 1.3;\n    height = rect.height * 1.3; // Min size, void long loop.\n\n    maxW = Math.max(maxW, width, 7);\n    maxH = Math.max(maxH, height, 7);\n  }\n\n  var dw = maxW / unitW;\n  var dh = maxH / unitH; // 0/0 is NaN, 1/0 is Infinity.\n\n  isNaN(dw) && (dw = Infinity);\n  isNaN(dh) && (dh = Infinity);\n  var interval = Math.max(0, Math.floor(Math.min(dw, dh)));\n  var cache = inner(axis.model);\n  var axisExtent = axis.getExtent();\n  var lastAutoInterval = cache.lastAutoInterval;\n  var lastTickCount = cache.lastTickCount; // Use cache to keep interval stable while moving zoom window,\n  // otherwise the calculated interval might jitter when the zoom\n  // window size is close to the interval-changing size.\n  // For example, if all of the axis labels are `a, b, c, d, e, f, g`.\n  // The jitter will cause that sometimes the displayed labels are\n  // `a, d, g` (interval: 2) sometimes `a, c, e`(interval: 1).\n\n  if (lastAutoInterval != null && lastTickCount != null && Math.abs(lastAutoInterval - interval) <= 1 && Math.abs(lastTickCount - tickCount) <= 1 // Always choose the bigger one, otherwise the critical\n  // point is not the same when zooming in or zooming out.\n  && lastAutoInterval > interval // If the axis change is caused by chart resize, the cache should not\n  // be used. Otherwise some hiden labels might not be shown again.\n  && cache.axisExtent0 === axisExtent[0] && cache.axisExtent1 === axisExtent[1]) {\n    interval = lastAutoInterval;\n  } // Only update cache if cache not used, otherwise the\n  // changing of interval is too insensitive.\n  else {\n      cache.lastTickCount = tickCount;\n      cache.lastAutoInterval = interval;\n      cache.axisExtent0 = axisExtent[0];\n      cache.axisExtent1 = axisExtent[1];\n    }\n\n  return interval;\n}\n\nfunction fetchAutoCategoryIntervalCalculationParams(axis) {\n  var labelModel = axis.getLabelModel();\n  return {\n    axisRotate: axis.getRotate ? axis.getRotate() : axis.isHorizontal && !axis.isHorizontal() ? 90 : 0,\n    labelRotate: labelModel.get('rotate') || 0,\n    font: labelModel.getFont()\n  };\n}\n\nfunction makeLabelsByNumericCategoryInterval(axis, categoryInterval, onlyTick) {\n  var labelFormatter = makeLabelFormatter(axis);\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent();\n  var labelModel = axis.getLabelModel();\n  var result = []; // TODO: axisType: ordinalTime, pick the tick from each month/day/year/...\n\n  var step = Math.max((categoryInterval || 0) + 1, 1);\n  var startTick = ordinalExtent[0];\n  var tickCount = ordinalScale.count(); // Calculate start tick based on zero if possible to keep label consistent\n  // while zooming and moving while interval > 0. Otherwise the selection\n  // of displayable ticks and symbols probably keep changing.\n  // 3 is empirical value.\n\n  if (startTick !== 0 && step > 1 && tickCount / step > 2) {\n    startTick = Math.round(Math.ceil(startTick / step) * step);\n  } // (1) Only add min max label here but leave overlap checking\n  // to render stage, which also ensure the returned list\n  // suitable for splitLine and splitArea rendering.\n  // (2) Scales except category always contain min max label so\n  // do not need to perform this process.\n\n\n  var showAllLabel = shouldShowAllLabels(axis);\n  var includeMinLabel = labelModel.get('showMinLabel') || showAllLabel;\n  var includeMaxLabel = labelModel.get('showMaxLabel') || showAllLabel;\n\n  if (includeMinLabel && startTick !== ordinalExtent[0]) {\n    addItem(ordinalExtent[0]);\n  } // Optimize: avoid generating large array by `ordinalScale.getTicks()`.\n\n\n  var tickValue = startTick;\n\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    addItem(tickValue);\n  }\n\n  if (includeMaxLabel && tickValue - step !== ordinalExtent[1]) {\n    addItem(ordinalExtent[1]);\n  }\n\n  function addItem(tickValue) {\n    var tickObj = {\n      value: tickValue\n    };\n    result.push(onlyTick ? tickValue : {\n      formattedLabel: labelFormatter(tickObj),\n      rawLabel: ordinalScale.getLabel(tickObj),\n      tickValue: tickValue\n    });\n  }\n\n  return result;\n}\n\nfunction makeLabelsByCustomizedCategoryInterval(axis, categoryInterval, onlyTick) {\n  var ordinalScale = axis.scale;\n  var labelFormatter = makeLabelFormatter(axis);\n  var result = [];\n  zrUtil.each(ordinalScale.getTicks(), function (tick) {\n    var rawLabel = ordinalScale.getLabel(tick);\n    var tickValue = tick.value;\n\n    if (categoryInterval(tick.value, rawLabel)) {\n      result.push(onlyTick ? tickValue : {\n        formattedLabel: labelFormatter(tick),\n        rawLabel: rawLabel,\n        tickValue: tickValue\n      });\n    }\n  });\n  return result;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, map } from 'zrender/lib/core/util';\nimport { linearMap, getPixelPrecision, round } from '../util/number';\nimport { createAxisTicks, createAxisLabels, calculateCategoryInterval } from './axisTickLabelBuilder';\nvar NORMALIZED_EXTENT = [0, 1];\n/**\n * Base class of Axis.\n */\n\nvar Axis =\n/** @class */\nfunction () {\n  function Axis(dim, scale, extent) {\n    this.onBand = false;\n    this.inverse = false;\n    this.dim = dim;\n    this.scale = scale;\n    this._extent = extent || [0, 0];\n  }\n  /**\n   * If axis extent contain given coord\n   */\n\n\n  Axis.prototype.contain = function (coord) {\n    var extent = this._extent;\n    var min = Math.min(extent[0], extent[1]);\n    var max = Math.max(extent[0], extent[1]);\n    return coord >= min && coord <= max;\n  };\n  /**\n   * If axis extent contain given data\n   */\n\n\n  Axis.prototype.containData = function (data) {\n    return this.scale.contain(data);\n  };\n  /**\n   * Get coord extent.\n   */\n\n\n  Axis.prototype.getExtent = function () {\n    return this._extent.slice();\n  };\n  /**\n   * Get precision used for formatting\n   */\n\n\n  Axis.prototype.getPixelPrecision = function (dataExtent) {\n    return getPixelPrecision(dataExtent || this.scale.getExtent(), this._extent);\n  };\n  /**\n   * Set coord extent\n   */\n\n\n  Axis.prototype.setExtent = function (start, end) {\n    var extent = this._extent;\n    extent[0] = start;\n    extent[1] = end;\n  };\n  /**\n   * Convert data to coord. Data is the rank if it has an ordinal scale\n   */\n\n\n  Axis.prototype.dataToCoord = function (data, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n    data = scale.normalize(data);\n\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n\n    return linearMap(data, NORMALIZED_EXTENT, extent, clamp);\n  };\n  /**\n   * Convert coord to data. Data is the rank if it has an ordinal scale\n   */\n\n\n  Axis.prototype.coordToData = function (coord, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n\n    var t = linearMap(coord, extent, NORMALIZED_EXTENT, clamp);\n    return this.scale.scale(t);\n  };\n  /**\n   * Convert pixel point to data in axis\n   */\n\n\n  Axis.prototype.pointToData = function (point, clamp) {\n    // Should be implemented in derived class if necessary.\n    return;\n  };\n  /**\n   * Different from `zrUtil.map(axis.getTicks(), axis.dataToCoord, axis)`,\n   * `axis.getTicksCoords` considers `onBand`, which is used by\n   * `boundaryGap:true` of category axis and splitLine and splitArea.\n   * @param opt.tickModel default: axis.model.getModel('axisTick')\n   * @param opt.clamp If `true`, the first and the last\n   *        tick must be at the axis end points. Otherwise, clip ticks\n   *        that outside the axis extent.\n   */\n\n\n  Axis.prototype.getTicksCoords = function (opt) {\n    opt = opt || {};\n    var tickModel = opt.tickModel || this.getTickModel();\n    var result = createAxisTicks(this, tickModel);\n    var ticks = result.ticks;\n    var ticksCoords = map(ticks, function (tickVal) {\n      return {\n        coord: this.dataToCoord(this.scale.type === 'ordinal' ? this.scale.getRawOrdinalNumber(tickVal) : tickVal),\n        tickValue: tickVal\n      };\n    }, this);\n    var alignWithLabel = tickModel.get('alignWithLabel');\n    fixOnBandTicksCoords(this, ticksCoords, alignWithLabel, opt.clamp);\n    return ticksCoords;\n  };\n\n  Axis.prototype.getMinorTicksCoords = function () {\n    if (this.scale.type === 'ordinal') {\n      // Category axis doesn't support minor ticks\n      return [];\n    }\n\n    var minorTickModel = this.model.getModel('minorTick');\n    var splitNumber = minorTickModel.get('splitNumber'); // Protection.\n\n    if (!(splitNumber > 0 && splitNumber < 100)) {\n      splitNumber = 5;\n    }\n\n    var minorTicks = this.scale.getMinorTicks(splitNumber);\n    var minorTicksCoords = map(minorTicks, function (minorTicksGroup) {\n      return map(minorTicksGroup, function (minorTick) {\n        return {\n          coord: this.dataToCoord(minorTick),\n          tickValue: minorTick\n        };\n      }, this);\n    }, this);\n    return minorTicksCoords;\n  };\n\n  Axis.prototype.getViewLabels = function () {\n    return createAxisLabels(this).labels;\n  };\n\n  Axis.prototype.getLabelModel = function () {\n    return this.model.getModel('axisLabel');\n  };\n  /**\n   * Notice here we only get the default tick model. For splitLine\n   * or splitArea, we should pass the splitLineModel or splitAreaModel\n   * manually when calling `getTicksCoords`.\n   * In GL, this method may be overrided to:\n   * `axisModel.getModel('axisTick', grid3DModel.getModel('axisTick'));`\n   */\n\n\n  Axis.prototype.getTickModel = function () {\n    return this.model.getModel('axisTick');\n  };\n  /**\n   * Get width of band\n   */\n\n\n  Axis.prototype.getBandWidth = function () {\n    var axisExtent = this._extent;\n    var dataExtent = this.scale.getExtent();\n    var len = dataExtent[1] - dataExtent[0] + (this.onBand ? 1 : 0); // Fix #2728, avoid NaN when only one data.\n\n    len === 0 && (len = 1);\n    var size = Math.abs(axisExtent[1] - axisExtent[0]);\n    return Math.abs(size) / len;\n  };\n  /**\n   * Only be called in category axis.\n   * Can be overrided, consider other axes like in 3D.\n   * @return Auto interval for cateogry axis tick and label\n   */\n\n\n  Axis.prototype.calculateCategoryInterval = function () {\n    return calculateCategoryInterval(this);\n  };\n\n  return Axis;\n}();\n\nfunction fixExtentWithBands(extent, nTick) {\n  var size = extent[1] - extent[0];\n  var len = nTick;\n  var margin = size / len / 2;\n  extent[0] += margin;\n  extent[1] -= margin;\n} // If axis has labels [1, 2, 3, 4]. Bands on the axis are\n// |---1---|---2---|---3---|---4---|.\n// So the displayed ticks and splitLine/splitArea should between\n// each data item, otherwise cause misleading (e.g., split tow bars\n// of a single data item when there are two bar series).\n// Also consider if tickCategoryInterval > 0 and onBand, ticks and\n// splitLine/spliteArea should layout appropriately corresponding\n// to displayed labels. (So we should not use `getBandWidth` in this\n// case).\n\n\nfunction fixOnBandTicksCoords(axis, ticksCoords, alignWithLabel, clamp) {\n  var ticksLen = ticksCoords.length;\n\n  if (!axis.onBand || alignWithLabel || !ticksLen) {\n    return;\n  }\n\n  var axisExtent = axis.getExtent();\n  var last;\n  var diffSize;\n\n  if (ticksLen === 1) {\n    ticksCoords[0].coord = axisExtent[0];\n    last = ticksCoords[1] = {\n      coord: axisExtent[0]\n    };\n  } else {\n    var crossLen = ticksCoords[ticksLen - 1].tickValue - ticksCoords[0].tickValue;\n    var shift_1 = (ticksCoords[ticksLen - 1].coord - ticksCoords[0].coord) / crossLen;\n    each(ticksCoords, function (ticksItem) {\n      ticksItem.coord -= shift_1 / 2;\n    });\n    var dataExtent = axis.scale.getExtent();\n    diffSize = 1 + dataExtent[1] - ticksCoords[ticksLen - 1].tickValue;\n    last = {\n      coord: ticksCoords[ticksLen - 1].coord + shift_1 * diffSize\n    };\n    ticksCoords.push(last);\n  }\n\n  var inverse = axisExtent[0] > axisExtent[1]; // Handling clamp.\n\n  if (littleThan(ticksCoords[0].coord, axisExtent[0])) {\n    clamp ? ticksCoords[0].coord = axisExtent[0] : ticksCoords.shift();\n  }\n\n  if (clamp && littleThan(axisExtent[0], ticksCoords[0].coord)) {\n    ticksCoords.unshift({\n      coord: axisExtent[0]\n    });\n  }\n\n  if (littleThan(axisExtent[1], last.coord)) {\n    clamp ? last.coord = axisExtent[1] : ticksCoords.pop();\n  }\n\n  if (clamp && littleThan(last.coord, axisExtent[1])) {\n    ticksCoords.push({\n      coord: axisExtent[1]\n    });\n  }\n\n  function littleThan(a, b) {\n    // Avoid rounding error cause calculated tick coord different with extent.\n    // It may cause an extra unecessary tick added.\n    a = round(a);\n    b = round(b);\n    return inverse ? a > b : a < b;\n  }\n}\n\nexport default Axis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis';\n\nvar Axis2D =\n/** @class */\nfunction (_super) {\n  __extends(Axis2D, _super);\n\n  function Axis2D(dim, scale, coordExtent, axisType, position) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    /**\n     * Index of axis, can be used as key\n     * Injected outside.\n     */\n\n\n    _this.index = 0;\n    _this.type = axisType || 'value';\n    _this.position = position || 'bottom';\n    return _this;\n  }\n\n  Axis2D.prototype.isHorizontal = function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  };\n  /**\n   * Each item cooresponds to this.getExtent(), which\n   * means globalExtent[0] may greater than globalExtent[1],\n   * unless `asc` is input.\n   *\n   * @param {boolean} [asc]\n   * @return {Array.<number>}\n   */\n\n\n  Axis2D.prototype.getGlobalExtent = function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  };\n\n  Axis2D.prototype.pointToData = function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  };\n  /**\n   * Set ordinalSortInfo\n   * @param info new OrdinalSortInfo\n   */\n\n\n  Axis2D.prototype.setCategorySortInfo = function (info) {\n    if (this.type !== 'category') {\n      return false;\n    }\n\n    this.model.option.categorySortInfo = info;\n    this.scale.setSortInfo(info);\n  };\n\n  return Axis2D;\n}(Axis);\n\nexport default Axis2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Grid is a region which contains at most 4 cartesian systems\n *\n * TODO Default cartesian\n */\nimport { isObject, each, indexOf, retrieve3 } from 'zrender/lib/core/util';\nimport { getLayoutRect } from '../../util/layout';\nimport { createScaleByModel, ifAxisCrossZero, niceScaleExtent, estimateLabelUnionRect, getDataDimensionsOnAxis } from '../../coord/axisHelper';\nimport Cartesian2D, { cartesian2DDimensions } from './Cartesian2D';\nimport Axis2D from './Axis2D';\nimport { SINGLE_REFERRING } from '../../util/model';\nimport { isCartesian2DSeries, findAxisModels } from './cartesianAxisHelper';\n\nvar Grid =\n/** @class */\nfunction () {\n  function Grid(gridModel, ecModel, api) {\n    // FIXME:TS where used (different from registered type 'cartesian2d')?\n    this.type = 'grid';\n    this._coordsMap = {};\n    this._coordsList = [];\n    this._axesMap = {};\n    this._axesList = [];\n    this.axisPointerEnabled = true;\n    this.dimensions = cartesian2DDimensions;\n\n    this._initCartesian(gridModel, ecModel, api);\n\n    this.model = gridModel;\n  }\n\n  Grid.prototype.getRect = function () {\n    return this._rect;\n  };\n\n  Grid.prototype.update = function (ecModel, api) {\n    var axesMap = this._axesMap;\n\n    this._updateScale(ecModel, this.model);\n\n    each(axesMap.x, function (xAxis) {\n      niceScaleExtent(xAxis.scale, xAxis.model);\n    });\n    each(axesMap.y, function (yAxis) {\n      niceScaleExtent(yAxis.scale, yAxis.model);\n    }); // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n\n    var onZeroRecords = {};\n    each(axesMap.x, function (xAxis) {\n      fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n    });\n    each(axesMap.y, function (yAxis) {\n      fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n    }); // Resize again if containLabel is enabled\n    // FIXME It may cause getting wrong grid size in data processing stage\n\n    this.resize(this.model, api);\n  };\n  /**\n   * Resize the grid\n   */\n\n\n  Grid.prototype.resize = function (gridModel, api, ignoreContainLabel) {\n    var boxLayoutParams = gridModel.getBoxLayoutParams();\n    var isContainLabel = !ignoreContainLabel && gridModel.get('containLabel');\n    var gridRect = getLayoutRect(boxLayoutParams, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    this._rect = gridRect;\n    var axesList = this._axesList;\n    adjustAxes(); // Minus label size\n\n    if (isContainLabel) {\n      each(axesList, function (axis) {\n        if (!axis.model.get(['axisLabel', 'inside'])) {\n          var labelUnionRect = estimateLabelUnionRect(axis);\n\n          if (labelUnionRect) {\n            var dim = axis.isHorizontal() ? 'height' : 'width';\n            var margin = axis.model.get(['axisLabel', 'margin']);\n            gridRect[dim] -= labelUnionRect[dim] + margin;\n\n            if (axis.position === 'top') {\n              gridRect.y += labelUnionRect.height + margin;\n            } else if (axis.position === 'left') {\n              gridRect.x += labelUnionRect.width + margin;\n            }\n          }\n        }\n      });\n      adjustAxes();\n    }\n\n    each(this._coordsList, function (coord) {\n      // Calculate affine matrix to accelerate the data to point transform.\n      // If all the axes scales are time or value.\n      coord.calcAffineTransform();\n    });\n\n    function adjustAxes() {\n      each(axesList, function (axis) {\n        var isHorizontal = axis.isHorizontal();\n        var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n        var idx = axis.inverse ? 1 : 0;\n        axis.setExtent(extent[idx], extent[1 - idx]);\n        updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n      });\n    }\n  };\n\n  Grid.prototype.getAxis = function (dim, axisIndex) {\n    var axesMapOnDim = this._axesMap[dim];\n\n    if (axesMapOnDim != null) {\n      return axesMapOnDim[axisIndex || 0]; // if (axisIndex == null) {\n      //     Find first axis\n      //     for (let name in axesMapOnDim) {\n      //         if (axesMapOnDim.hasOwnProperty(name)) {\n      //             return axesMapOnDim[name];\n      //         }\n      //     }\n      // }\n      // return axesMapOnDim[axisIndex];\n    }\n  };\n\n  Grid.prototype.getAxes = function () {\n    return this._axesList.slice();\n  };\n\n  Grid.prototype.getCartesian = function (xAxisIndex, yAxisIndex) {\n    if (xAxisIndex != null && yAxisIndex != null) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      return this._coordsMap[key];\n    }\n\n    if (isObject(xAxisIndex)) {\n      yAxisIndex = xAxisIndex.yAxisIndex;\n      xAxisIndex = xAxisIndex.xAxisIndex;\n    }\n\n    for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n      if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n        return coordList[i];\n      }\n    }\n  };\n\n  Grid.prototype.getCartesians = function () {\n    return this._coordsList.slice();\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.convertToPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n\n    return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.convertFromPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n\n    return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n  };\n\n  Grid.prototype._findConvertTarget = function (finder) {\n    var seriesModel = finder.seriesModel;\n    var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n    var gridModel = finder.gridModel;\n    var coordsList = this._coordsList;\n    var cartesian;\n    var axis;\n\n    if (seriesModel) {\n      cartesian = seriesModel.coordinateSystem;\n      indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n    } else if (xAxisModel && yAxisModel) {\n      cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    } else if (xAxisModel) {\n      axis = this.getAxis('x', xAxisModel.componentIndex);\n    } else if (yAxisModel) {\n      axis = this.getAxis('y', yAxisModel.componentIndex);\n    } // Lowest priority.\n    else if (gridModel) {\n        var grid = gridModel.coordinateSystem;\n\n        if (grid === this) {\n          cartesian = this._coordsList[0];\n        }\n      }\n\n    return {\n      cartesian: cartesian,\n      axis: axis\n    };\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.containPoint = function (point) {\n    var coord = this._coordsList[0];\n\n    if (coord) {\n      return coord.containPoint(point);\n    }\n  };\n  /**\n   * Initialize cartesian coordinate systems\n   */\n\n\n  Grid.prototype._initCartesian = function (gridModel, ecModel, api) {\n    var _this = this;\n\n    var grid = this;\n    var axisPositionUsed = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    var axesMap = {\n      x: {},\n      y: {}\n    };\n    var axesCount = {\n      x: 0,\n      y: 0\n    }; /// Create axis\n\n    ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n    ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n\n    if (!axesCount.x || !axesCount.y) {\n      // Roll back when there no either x or y axis\n      this._axesMap = {};\n      this._axesList = [];\n      return;\n    }\n\n    this._axesMap = axesMap; /// Create cartesian2d\n\n    each(axesMap.x, function (xAxis, xAxisIndex) {\n      each(axesMap.y, function (yAxis, yAxisIndex) {\n        var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n        var cartesian = new Cartesian2D(key);\n        cartesian.master = _this;\n        cartesian.model = gridModel;\n        _this._coordsMap[key] = cartesian;\n\n        _this._coordsList.push(cartesian);\n\n        cartesian.addAxis(xAxis);\n        cartesian.addAxis(yAxis);\n      });\n    });\n\n    function createAxisCreator(dimName) {\n      return function (axisModel, idx) {\n        if (!isAxisUsedInTheGrid(axisModel, gridModel)) {\n          return;\n        }\n\n        var axisPosition = axisModel.get('position');\n\n        if (dimName === 'x') {\n          // Fix position\n          if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n            // Default bottom of X\n            axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n          }\n        } else {\n          // Fix position\n          if (axisPosition !== 'left' && axisPosition !== 'right') {\n            // Default left of Y\n            axisPosition = axisPositionUsed.left ? 'right' : 'left';\n          }\n        }\n\n        axisPositionUsed[axisPosition] = true;\n        var axis = new Axis2D(dimName, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n        var isCategory = axis.type === 'category';\n        axis.onBand = isCategory && axisModel.get('boundaryGap');\n        axis.inverse = axisModel.get('inverse'); // Inject axis into axisModel\n\n        axisModel.axis = axis; // Inject axisModel into axis\n\n        axis.model = axisModel; // Inject grid info axis\n\n        axis.grid = grid; // Index of axis, can be used as key\n\n        axis.index = idx;\n\n        grid._axesList.push(axis);\n\n        axesMap[dimName][idx] = axis;\n        axesCount[dimName]++;\n      };\n    }\n  };\n  /**\n   * Update cartesian properties from series.\n   */\n\n\n  Grid.prototype._updateScale = function (ecModel, gridModel) {\n    // Reset scale\n    each(this._axesList, function (axis) {\n      axis.scale.setExtent(Infinity, -Infinity);\n\n      if (axis.type === 'category') {\n        var categorySortInfo = axis.model.get('categorySortInfo');\n        axis.scale.setSortInfo(categorySortInfo);\n      }\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      if (isCartesian2DSeries(seriesModel)) {\n        var axesModelMap = findAxisModels(seriesModel);\n        var xAxisModel = axesModelMap.xAxisModel;\n        var yAxisModel = axesModelMap.yAxisModel;\n\n        if (!isAxisUsedInTheGrid(xAxisModel, gridModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel)) {\n          return;\n        }\n\n        var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n        var data = seriesModel.getData();\n        var xAxis = cartesian.getAxis('x');\n        var yAxis = cartesian.getAxis('y');\n\n        if (data.type === 'list') {\n          unionExtent(data, xAxis);\n          unionExtent(data, yAxis);\n        }\n      }\n    }, this);\n\n    function unionExtent(data, axis) {\n      each(getDataDimensionsOnAxis(data, axis.dim), function (dim) {\n        axis.scale.unionExtentFromData(data, dim);\n      });\n    }\n  };\n  /**\n   * @param dim 'x' or 'y' or 'auto' or null/undefined\n   */\n\n\n  Grid.prototype.getTooltipAxes = function (dim) {\n    var baseAxes = [];\n    var otherAxes = [];\n    each(this.getCartesians(), function (cartesian) {\n      var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n      var otherAxis = cartesian.getOtherAxis(baseAxis);\n      indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n      indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n    });\n    return {\n      baseAxes: baseAxes,\n      otherAxes: otherAxes\n    };\n  };\n\n  Grid.create = function (ecModel, api) {\n    var grids = [];\n    ecModel.eachComponent('grid', function (gridModel, idx) {\n      var grid = new Grid(gridModel, ecModel, api);\n      grid.name = 'grid_' + idx; // dataSampling requires axis extent, so resize\n      // should be performed in create stage.\n\n      grid.resize(gridModel, api, true);\n      gridModel.coordinateSystem = grid;\n      grids.push(grid);\n    }); // Inject the coordinateSystems into seriesModel\n\n    ecModel.eachSeries(function (seriesModel) {\n      if (!isCartesian2DSeries(seriesModel)) {\n        return;\n      }\n\n      var axesModelMap = findAxisModels(seriesModel);\n      var xAxisModel = axesModelMap.xAxisModel;\n      var yAxisModel = axesModelMap.yAxisModel;\n      var gridModel = xAxisModel.getCoordSysModel();\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!gridModel) {\n          throw new Error('Grid \"' + retrieve3(xAxisModel.get('gridIndex'), xAxisModel.get('gridId'), 0) + '\" not found');\n        }\n\n        if (xAxisModel.getCoordSysModel() !== yAxisModel.getCoordSysModel()) {\n          throw new Error('xAxis and yAxis must use the same grid');\n        }\n      }\n\n      var grid = gridModel.coordinateSystem;\n      seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    });\n    return grids;\n  }; // For deciding which dimensions to use when creating list data\n\n\n  Grid.dimensions = cartesian2DDimensions;\n  return Grid;\n}();\n/**\n * Check if the axis is used in the specified grid.\n */\n\n\nfunction isAxisUsedInTheGrid(axisModel, gridModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\n\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis, // Key: see `getOnZeroRecordKey`\nonZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  }; // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n\n\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get(['axisLine', 'onZero']);\n  var onZeroAxisIndex = axisModel.get(['axisLine', 'onZeroAxisIndex']);\n\n  if (!onZero) {\n    return;\n  } // If target axis is specified.\n\n\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx]) // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\n\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\n\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1]; // Fast transform\n\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\n\nexport default Grid;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { makeInner } from '../../util/model';\nvar inner = makeInner();\nexport function rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n  var axis = axisModel.axis;\n\n  if (axis.scale.isBlank()) {\n    return;\n  } // TODO: TYPE\n\n\n  var splitAreaModel = axisModel.getModel('splitArea');\n  var areaStyleModel = splitAreaModel.getModel('areaStyle');\n  var areaColors = areaStyleModel.get('color');\n  var gridRect = gridModel.coordinateSystem.getRect();\n  var ticksCoords = axis.getTicksCoords({\n    tickModel: splitAreaModel,\n    clamp: true\n  });\n\n  if (!ticksCoords.length) {\n    return;\n  } // For Making appropriate splitArea animation, the color and anid\n  // should be corresponding to previous one if possible.\n\n\n  var areaColorsLen = areaColors.length;\n  var lastSplitAreaColors = inner(axisView).splitAreaColors;\n  var newSplitAreaColors = zrUtil.createHashMap();\n  var colorIndex = 0;\n\n  if (lastSplitAreaColors) {\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n\n      if (cIndex != null) {\n        colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n        break;\n      }\n    }\n  }\n\n  var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n  var areaStyle = areaStyleModel.getAreaStyle();\n  areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n\n  for (var i = 1; i < ticksCoords.length; i++) {\n    var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n    var x = void 0;\n    var y = void 0;\n    var width = void 0;\n    var height = void 0;\n\n    if (axis.isHorizontal()) {\n      x = prev;\n      y = gridRect.y;\n      width = tickCoord - x;\n      height = gridRect.height;\n      prev = x + width;\n    } else {\n      x = gridRect.x;\n      y = prev;\n      width = gridRect.width;\n      height = tickCoord - y;\n      prev = y + height;\n    }\n\n    var tickValue = ticksCoords[i - 1].tickValue;\n    tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n    axisGroup.add(new graphic.Rect({\n      anid: tickValue != null ? 'area_' + tickValue : null,\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      },\n      style: zrUtil.defaults({\n        fill: areaColors[colorIndex]\n      }, areaStyle),\n      autoBatch: true,\n      silent: true\n    }));\n    colorIndex = (colorIndex + 1) % areaColorsLen;\n  }\n\n  inner(axisView).splitAreaColors = newSplitAreaColors;\n}\nexport function rectCoordAxisHandleRemove(axisView) {\n  inner(axisView).splitAreaColors = null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport AxisBuilder from './AxisBuilder';\nimport AxisView from './AxisView';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper';\nimport { rectCoordAxisBuildSplitArea, rectCoordAxisHandleRemove } from './axisSplitHelper';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine'];\n\nvar CartesianAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianAxisView, _super);\n\n  function CartesianAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianAxisView.type;\n    _this.axisPointerClass = 'CartesianAxisPointer';\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  CartesianAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, zrUtil.extend({\n      handleAutoShown: function (elementType) {\n        var cartesians = gridModel.coordinateSystem.getCartesians();\n\n        for (var i = 0; i < cartesians.length; i++) {\n          var otherAxisType = cartesians[i].getOtherAxis(axisModel.axis).type;\n\n          if (otherAxisType === 'value' || otherAxisType === 'log') {\n            // Still show axis tick or axisLine if other axis is value / log\n            return true;\n          }\n        } // Not show axisTick or axisLine if other axis is category / time\n\n\n        return false;\n      }\n    }, layout));\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get([name, 'show'])) {\n        axisElementBuilders[name](this, this._axisGroup, axisModel, gridModel);\n      }\n    }, this);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n\n    _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n  };\n\n  CartesianAxisView.prototype.remove = function () {\n    rectCoordAxisHandleRemove(this);\n  };\n\n  CartesianAxisView.type = 'cartesianAxis';\n  return CartesianAxisView;\n}(AxisView);\n\nvar axisElementBuilders = {\n  splitLine: function (axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n      var tickValue = ticksCoords[i].tickValue;\n      axisGroup.add(new graphic.Line({\n        anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\n        subPixelOptimize: true,\n        autoBatch: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n  minorSplitLine: function (axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n\n    if (!minorTicksCoords.length) {\n      return;\n    }\n\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n\n        axisGroup.add(new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          subPixelOptimize: true,\n          autoBatch: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        }));\n      }\n    }\n  },\n  splitArea: function (axisView, axisGroup, axisModel, gridModel) {\n    rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel);\n  }\n};\n\nvar CartesianXAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianXAxisView, _super);\n\n  function CartesianXAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n\n  CartesianXAxisView.type = 'xAxis';\n  return CartesianXAxisView;\n}(CartesianAxisView);\n\nexport { CartesianXAxisView };\n\nvar CartesianYAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianYAxisView, _super);\n\n  function CartesianYAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n\n  CartesianYAxisView.type = 'yAxis';\n  return CartesianYAxisView;\n}(CartesianAxisView);\n\nexport { CartesianYAxisView };\nexport default CartesianAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\nimport GridModel from '../../coord/cartesian/GridModel';\nimport { Rect } from '../../util/graphic';\nimport { defaults } from 'zrender/lib/core/util';\nimport { CartesianAxisModel } from '../../coord/cartesian/AxisModel';\nimport axisModelCreator from '../../coord/axisModelCreator';\nimport Grid from '../../coord/cartesian/Grid';\nimport { CartesianXAxisView, CartesianYAxisView } from '../axis/CartesianAxisView'; // Grid view\n\nvar GridView =\n/** @class */\nfunction (_super) {\n  __extends(GridView, _super);\n\n  function GridView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'grid';\n    return _this;\n  }\n\n  GridView.prototype.render = function (gridModel, ecModel) {\n    this.group.removeAll();\n\n    if (gridModel.get('show')) {\n      this.group.add(new Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  };\n\n  GridView.type = 'grid';\n  return GridView;\n}(ComponentView);\n\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  offset: 0\n};\nexport function install(registers) {\n  registers.registerComponentView(GridView);\n  registers.registerComponentModel(GridModel);\n  registers.registerCoordinateSystem('cartesian2d', Grid);\n  axisModelCreator(registers, 'x', CartesianAxisModel, extraOption);\n  axisModelCreator(registers, 'y', CartesianAxisModel, extraOption);\n  registers.registerComponentView(CartesianXAxisView);\n  registers.registerComponentView(CartesianYAxisView);\n  registers.registerPreprocessor(function (option) {\n    // Only create grid when need\n    if (option.xAxis && option.yAxis && !option.grid) {\n      option.grid = {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport ScatterSeriesModel from './ScatterSeries';\nimport ScatterView from './ScatterView';\nimport { install as installGridSimple } from '../../component/grid/installSimple';\nimport layoutPoints from '../../layout/points';\nexport function install(registers) {\n  // In case developer forget to include grid component\n  use(installGridSimple);\n  registers.registerSeriesModel(ScatterSeriesModel);\n  registers.registerChartView(ScatterView);\n  registers.registerLayout(layoutPoints('scatter'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\nimport { getLayoutParams, sizeCalculable, mergeLayoutParam } from '../../util/layout';\n\nvar CalendarModel =\n/** @class */\nfunction (_super) {\n  __extends(CalendarModel, _super);\n\n  function CalendarModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CalendarModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  CalendarModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputPositionParams = getLayoutParams(option);\n\n    _super.prototype.init.apply(this, arguments);\n\n    mergeAndNormalizeLayoutParams(option, inputPositionParams);\n  };\n  /**\n   * @override\n   */\n\n\n  CalendarModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n\n    mergeAndNormalizeLayoutParams(this.option, option);\n  };\n\n  CalendarModel.prototype.getCellSize = function () {\n    // Has been normalized\n    return this.option.cellSize;\n  };\n\n  CalendarModel.type = 'calendar';\n  CalendarModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    left: 80,\n    top: 60,\n    cellSize: 20,\n    // horizontal vertical\n    orient: 'horizontal',\n    // month separate line style\n    splitLine: {\n      show: true,\n      lineStyle: {\n        color: '#000',\n        width: 1,\n        type: 'solid'\n      }\n    },\n    // rect style  temporarily unused emphasis\n    itemStyle: {\n      color: '#fff',\n      borderWidth: 1,\n      borderColor: '#ccc'\n    },\n    // week text style\n    dayLabel: {\n      show: true,\n      firstDay: 0,\n      // start end\n      position: 'start',\n      margin: '50%',\n      nameMap: 'en',\n      color: '#000'\n    },\n    // month text style\n    monthLabel: {\n      show: true,\n      // start end\n      position: 'start',\n      margin: 5,\n      // center or left\n      align: 'center',\n      // cn en []\n      nameMap: 'en',\n      formatter: null,\n      color: '#000'\n    },\n    // year text style\n    yearLabel: {\n      show: true,\n      // top bottom left right\n      position: null,\n      margin: 30,\n      formatter: null,\n      color: '#ccc',\n      fontFamily: 'sans-serif',\n      fontWeight: 'bolder',\n      fontSize: 20\n    }\n  };\n  return CalendarModel;\n}(ComponentModel);\n\nfunction mergeAndNormalizeLayoutParams(target, raw) {\n  // Normalize cellSize\n  var cellSize = target.cellSize;\n  var cellSizeArr;\n\n  if (!zrUtil.isArray(cellSize)) {\n    cellSizeArr = target.cellSize = [cellSize, cellSize];\n  } else {\n    cellSizeArr = cellSize;\n  }\n\n  if (cellSizeArr.length === 1) {\n    cellSizeArr[1] = cellSizeArr[0];\n  }\n\n  var ignoreSize = zrUtil.map([0, 1], function (hvIdx) {\n    // If user have set `width` or both `left` and `right`, cellSizeArr\n    // will be automatically set to 'auto', otherwise the default\n    // setting of cellSizeArr will make `width` setting not work.\n    if (sizeCalculable(raw, hvIdx)) {\n      cellSizeArr[hvIdx] = 'auto';\n    }\n\n    return cellSizeArr[hvIdx] != null && cellSizeArr[hvIdx] !== 'auto';\n  });\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: ignoreSize\n  });\n}\n\nexport default CalendarModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { createTextStyle } from '../../label/labelStyle';\nimport * as formatUtil from '../../util/format';\nimport * as numberUtil from '../../util/number';\nimport ComponentView from '../../view/Component';\nvar MONTH_TEXT = {\n  EN: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n  CN: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月']\n};\nvar WEEK_TEXT = {\n  EN: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],\n  CN: ['日', '一', '二', '三', '四', '五', '六']\n};\n\nvar CalendarView =\n/** @class */\nfunction (_super) {\n  __extends(CalendarView, _super);\n\n  function CalendarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CalendarView.type;\n    return _this;\n  }\n\n  CalendarView.prototype.render = function (calendarModel, ecModel, api) {\n    var group = this.group;\n    group.removeAll();\n    var coordSys = calendarModel.coordinateSystem; // range info\n\n    var rangeData = coordSys.getRangeInfo();\n    var orient = coordSys.getOrient();\n\n    this._renderDayRect(calendarModel, rangeData, group); // _renderLines must be called prior to following function\n\n\n    this._renderLines(calendarModel, rangeData, orient, group);\n\n    this._renderYearText(calendarModel, rangeData, orient, group);\n\n    this._renderMonthText(calendarModel, orient, group);\n\n    this._renderWeekText(calendarModel, rangeData, orient, group);\n  }; // render day rect\n\n\n  CalendarView.prototype._renderDayRect = function (calendarModel, rangeData, group) {\n    var coordSys = calendarModel.coordinateSystem;\n    var itemRectStyleModel = calendarModel.getModel('itemStyle').getItemStyle();\n    var sw = coordSys.getCellWidth();\n    var sh = coordSys.getCellHeight();\n\n    for (var i = rangeData.start.time; i <= rangeData.end.time; i = coordSys.getNextNDay(i, 1).time) {\n      var point = coordSys.dataToRect([i], false).tl; // every rect\n\n      var rect = new graphic.Rect({\n        shape: {\n          x: point[0],\n          y: point[1],\n          width: sw,\n          height: sh\n        },\n        cursor: 'default',\n        style: itemRectStyleModel\n      });\n      group.add(rect);\n    }\n  }; // render separate line\n\n\n  CalendarView.prototype._renderLines = function (calendarModel, rangeData, orient, group) {\n    var self = this;\n    var coordSys = calendarModel.coordinateSystem;\n    var lineStyleModel = calendarModel.getModel(['splitLine', 'lineStyle']).getLineStyle();\n    var show = calendarModel.get(['splitLine', 'show']);\n    var lineWidth = lineStyleModel.lineWidth;\n    this._tlpoints = [];\n    this._blpoints = [];\n    this._firstDayOfMonth = [];\n    this._firstDayPoints = [];\n    var firstDay = rangeData.start;\n\n    for (var i = 0; firstDay.time <= rangeData.end.time; i++) {\n      addPoints(firstDay.formatedDate);\n\n      if (i === 0) {\n        firstDay = coordSys.getDateInfo(rangeData.start.y + '-' + rangeData.start.m);\n      }\n\n      var date = firstDay.date;\n      date.setMonth(date.getMonth() + 1);\n      firstDay = coordSys.getDateInfo(date);\n    }\n\n    addPoints(coordSys.getNextNDay(rangeData.end.time, 1).formatedDate);\n\n    function addPoints(date) {\n      self._firstDayOfMonth.push(coordSys.getDateInfo(date));\n\n      self._firstDayPoints.push(coordSys.dataToRect([date], false).tl);\n\n      var points = self._getLinePointsOfOneWeek(calendarModel, date, orient);\n\n      self._tlpoints.push(points[0]);\n\n      self._blpoints.push(points[points.length - 1]);\n\n      show && self._drawSplitline(points, lineStyleModel, group);\n    } // render top/left line\n\n\n    show && this._drawSplitline(self._getEdgesPoints(self._tlpoints, lineWidth, orient), lineStyleModel, group); // render bottom/right line\n\n    show && this._drawSplitline(self._getEdgesPoints(self._blpoints, lineWidth, orient), lineStyleModel, group);\n  }; // get points at both ends\n\n\n  CalendarView.prototype._getEdgesPoints = function (points, lineWidth, orient) {\n    var rs = [points[0].slice(), points[points.length - 1].slice()];\n    var idx = orient === 'horizontal' ? 0 : 1; // both ends of the line are extend half lineWidth\n\n    rs[0][idx] = rs[0][idx] - lineWidth / 2;\n    rs[1][idx] = rs[1][idx] + lineWidth / 2;\n    return rs;\n  }; // render split line\n\n\n  CalendarView.prototype._drawSplitline = function (points, lineStyle, group) {\n    var poyline = new graphic.Polyline({\n      z2: 20,\n      shape: {\n        points: points\n      },\n      style: lineStyle\n    });\n    group.add(poyline);\n  }; // render month line of one week points\n\n\n  CalendarView.prototype._getLinePointsOfOneWeek = function (calendarModel, date, orient) {\n    var coordSys = calendarModel.coordinateSystem;\n    var parsedDate = coordSys.getDateInfo(date);\n    var points = [];\n\n    for (var i = 0; i < 7; i++) {\n      var tmpD = coordSys.getNextNDay(parsedDate.time, i);\n      var point = coordSys.dataToRect([tmpD.time], false);\n      points[2 * tmpD.day] = point.tl;\n      points[2 * tmpD.day + 1] = point[orient === 'horizontal' ? 'bl' : 'tr'];\n    }\n\n    return points;\n  };\n\n  CalendarView.prototype._formatterLabel = function (formatter, params) {\n    if (typeof formatter === 'string' && formatter) {\n      return formatUtil.formatTplSimple(formatter, params);\n    }\n\n    if (typeof formatter === 'function') {\n      return formatter(params);\n    }\n\n    return params.nameMap;\n  };\n\n  CalendarView.prototype._yearTextPositionControl = function (textEl, point, orient, position, margin) {\n    var x = point[0];\n    var y = point[1];\n    var aligns = ['center', 'bottom'];\n\n    if (position === 'bottom') {\n      y += margin;\n      aligns = ['center', 'top'];\n    } else if (position === 'left') {\n      x -= margin;\n    } else if (position === 'right') {\n      x += margin;\n      aligns = ['center', 'top'];\n    } else {\n      // top\n      y -= margin;\n    }\n\n    var rotate = 0;\n\n    if (position === 'left' || position === 'right') {\n      rotate = Math.PI / 2;\n    }\n\n    return {\n      rotation: rotate,\n      x: x,\n      y: y,\n      style: {\n        align: aligns[0],\n        verticalAlign: aligns[1]\n      }\n    };\n  }; // render year\n\n\n  CalendarView.prototype._renderYearText = function (calendarModel, rangeData, orient, group) {\n    var yearLabel = calendarModel.getModel('yearLabel');\n\n    if (!yearLabel.get('show')) {\n      return;\n    }\n\n    var margin = yearLabel.get('margin');\n    var pos = yearLabel.get('position');\n\n    if (!pos) {\n      pos = orient !== 'horizontal' ? 'top' : 'left';\n    }\n\n    var points = [this._tlpoints[this._tlpoints.length - 1], this._blpoints[0]];\n    var xc = (points[0][0] + points[1][0]) / 2;\n    var yc = (points[0][1] + points[1][1]) / 2;\n    var idx = orient === 'horizontal' ? 0 : 1;\n    var posPoints = {\n      top: [xc, points[idx][1]],\n      bottom: [xc, points[1 - idx][1]],\n      left: [points[1 - idx][0], yc],\n      right: [points[idx][0], yc]\n    };\n    var name = rangeData.start.y;\n\n    if (+rangeData.end.y > +rangeData.start.y) {\n      name = name + '-' + rangeData.end.y;\n    }\n\n    var formatter = yearLabel.get('formatter');\n    var params = {\n      start: rangeData.start.y,\n      end: rangeData.end.y,\n      nameMap: name\n    };\n\n    var content = this._formatterLabel(formatter, params);\n\n    var yearText = new graphic.Text({\n      z2: 30,\n      style: createTextStyle(yearLabel, {\n        text: content\n      })\n    });\n    yearText.attr(this._yearTextPositionControl(yearText, posPoints[pos], orient, pos, margin));\n    group.add(yearText);\n  };\n\n  CalendarView.prototype._monthTextPositionControl = function (point, isCenter, orient, position, margin) {\n    var align = 'left';\n    var vAlign = 'top';\n    var x = point[0];\n    var y = point[1];\n\n    if (orient === 'horizontal') {\n      y = y + margin;\n\n      if (isCenter) {\n        align = 'center';\n      }\n\n      if (position === 'start') {\n        vAlign = 'bottom';\n      }\n    } else {\n      x = x + margin;\n\n      if (isCenter) {\n        vAlign = 'middle';\n      }\n\n      if (position === 'start') {\n        align = 'right';\n      }\n    }\n\n    return {\n      x: x,\n      y: y,\n      align: align,\n      verticalAlign: vAlign\n    };\n  }; // render month and year text\n\n\n  CalendarView.prototype._renderMonthText = function (calendarModel, orient, group) {\n    var monthLabel = calendarModel.getModel('monthLabel');\n\n    if (!monthLabel.get('show')) {\n      return;\n    }\n\n    var nameMap = monthLabel.get('nameMap');\n    var margin = monthLabel.get('margin');\n    var pos = monthLabel.get('position');\n    var align = monthLabel.get('align');\n    var termPoints = [this._tlpoints, this._blpoints];\n\n    if (zrUtil.isString(nameMap)) {\n      nameMap = MONTH_TEXT[nameMap.toUpperCase()] || [];\n    }\n\n    var idx = pos === 'start' ? 0 : 1;\n    var axis = orient === 'horizontal' ? 0 : 1;\n    margin = pos === 'start' ? -margin : margin;\n    var isCenter = align === 'center';\n\n    for (var i = 0; i < termPoints[idx].length - 1; i++) {\n      var tmp = termPoints[idx][i].slice();\n      var firstDay = this._firstDayOfMonth[i];\n\n      if (isCenter) {\n        var firstDayPoints = this._firstDayPoints[i];\n        tmp[axis] = (firstDayPoints[axis] + termPoints[0][i + 1][axis]) / 2;\n      }\n\n      var formatter = monthLabel.get('formatter');\n      var name_1 = nameMap[+firstDay.m - 1];\n      var params = {\n        yyyy: firstDay.y,\n        yy: (firstDay.y + '').slice(2),\n        MM: firstDay.m,\n        M: +firstDay.m,\n        nameMap: name_1\n      };\n\n      var content = this._formatterLabel(formatter, params);\n\n      var monthText = new graphic.Text({\n        z2: 30,\n        style: zrUtil.extend(createTextStyle(monthLabel, {\n          text: content\n        }), this._monthTextPositionControl(tmp, isCenter, orient, pos, margin))\n      });\n      group.add(monthText);\n    }\n  };\n\n  CalendarView.prototype._weekTextPositionControl = function (point, orient, position, margin, cellSize) {\n    var align = 'center';\n    var vAlign = 'middle';\n    var x = point[0];\n    var y = point[1];\n    var isStart = position === 'start';\n\n    if (orient === 'horizontal') {\n      x = x + margin + (isStart ? 1 : -1) * cellSize[0] / 2;\n      align = isStart ? 'right' : 'left';\n    } else {\n      y = y + margin + (isStart ? 1 : -1) * cellSize[1] / 2;\n      vAlign = isStart ? 'bottom' : 'top';\n    }\n\n    return {\n      x: x,\n      y: y,\n      align: align,\n      verticalAlign: vAlign\n    };\n  }; // render weeks\n\n\n  CalendarView.prototype._renderWeekText = function (calendarModel, rangeData, orient, group) {\n    var dayLabel = calendarModel.getModel('dayLabel');\n\n    if (!dayLabel.get('show')) {\n      return;\n    }\n\n    var coordSys = calendarModel.coordinateSystem;\n    var pos = dayLabel.get('position');\n    var nameMap = dayLabel.get('nameMap');\n    var margin = dayLabel.get('margin');\n    var firstDayOfWeek = coordSys.getFirstDayOfWeek();\n\n    if (zrUtil.isString(nameMap)) {\n      nameMap = WEEK_TEXT[nameMap.toUpperCase()] || [];\n    }\n\n    var start = coordSys.getNextNDay(rangeData.end.time, 7 - rangeData.lweek).time;\n    var cellSize = [coordSys.getCellWidth(), coordSys.getCellHeight()];\n    margin = numberUtil.parsePercent(margin, Math.min(cellSize[1], cellSize[0]));\n\n    if (pos === 'start') {\n      start = coordSys.getNextNDay(rangeData.start.time, -(7 + rangeData.fweek)).time;\n      margin = -margin;\n    }\n\n    for (var i = 0; i < 7; i++) {\n      var tmpD = coordSys.getNextNDay(start, i);\n      var point = coordSys.dataToRect([tmpD.time], false).center;\n      var day = i;\n      day = Math.abs((i + firstDayOfWeek) % 7);\n      var weekText = new graphic.Text({\n        z2: 30,\n        style: zrUtil.extend(createTextStyle(dayLabel, {\n          text: nameMap[day]\n        }), this._weekTextPositionControl(point, orient, pos, margin, cellSize))\n      });\n      group.add(weekText);\n    }\n  };\n\n  CalendarView.type = 'calendar';\n  return CalendarView;\n}(ComponentView);\n\nexport default CalendarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as layout from '../../util/layout';\nimport * as numberUtil from '../../util/number'; // (24*60*60*1000)\n\nvar PROXIMATE_ONE_DAY = 86400000;\n\nvar Calendar =\n/** @class */\nfunction () {\n  function Calendar(calendarModel, ecModel, api) {\n    this.type = 'calendar';\n    this.dimensions = Calendar.dimensions; // Required in createListFromData\n\n    this.getDimensionsInfo = Calendar.getDimensionsInfo;\n    this._model = calendarModel;\n  }\n\n  Calendar.getDimensionsInfo = function () {\n    return [{\n      name: 'time',\n      type: 'time'\n    }, 'value'];\n  };\n\n  Calendar.prototype.getRangeInfo = function () {\n    return this._rangeInfo;\n  };\n\n  Calendar.prototype.getModel = function () {\n    return this._model;\n  };\n\n  Calendar.prototype.getRect = function () {\n    return this._rect;\n  };\n\n  Calendar.prototype.getCellWidth = function () {\n    return this._sw;\n  };\n\n  Calendar.prototype.getCellHeight = function () {\n    return this._sh;\n  };\n\n  Calendar.prototype.getOrient = function () {\n    return this._orient;\n  };\n  /**\n   * getFirstDayOfWeek\n   *\n   * @example\n   *     0 : start at Sunday\n   *     1 : start at Monday\n   *\n   * @return {number}\n   */\n\n\n  Calendar.prototype.getFirstDayOfWeek = function () {\n    return this._firstDayOfWeek;\n  };\n  /**\n   * get date info\n   * }\n   */\n\n\n  Calendar.prototype.getDateInfo = function (date) {\n    date = numberUtil.parseDate(date);\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    var mStr = m < 10 ? '0' + m : '' + m;\n    var d = date.getDate();\n    var dStr = d < 10 ? '0' + d : '' + d;\n    var day = date.getDay();\n    day = Math.abs((day + 7 - this.getFirstDayOfWeek()) % 7);\n    return {\n      y: y + '',\n      m: mStr,\n      d: dStr,\n      day: day,\n      time: date.getTime(),\n      formatedDate: y + '-' + mStr + '-' + dStr,\n      date: date\n    };\n  };\n\n  Calendar.prototype.getNextNDay = function (date, n) {\n    n = n || 0;\n\n    if (n === 0) {\n      return this.getDateInfo(date);\n    }\n\n    date = new Date(this.getDateInfo(date).time);\n    date.setDate(date.getDate() + n);\n    return this.getDateInfo(date);\n  };\n\n  Calendar.prototype.update = function (ecModel, api) {\n    this._firstDayOfWeek = +this._model.getModel('dayLabel').get('firstDay');\n    this._orient = this._model.get('orient');\n    this._lineWidth = this._model.getModel('itemStyle').getItemStyle().lineWidth || 0;\n    this._rangeInfo = this._getRangeInfo(this._initRangeOption());\n    var weeks = this._rangeInfo.weeks || 1;\n    var whNames = ['width', 'height'];\n\n    var cellSize = this._model.getCellSize().slice();\n\n    var layoutParams = this._model.getBoxLayoutParams();\n\n    var cellNumbers = this._orient === 'horizontal' ? [weeks, 7] : [7, weeks];\n    zrUtil.each([0, 1], function (idx) {\n      if (cellSizeSpecified(cellSize, idx)) {\n        layoutParams[whNames[idx]] = cellSize[idx] * cellNumbers[idx];\n      }\n    });\n    var whGlobal = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var calendarRect = this._rect = layout.getLayoutRect(layoutParams, whGlobal);\n    zrUtil.each([0, 1], function (idx) {\n      if (!cellSizeSpecified(cellSize, idx)) {\n        cellSize[idx] = calendarRect[whNames[idx]] / cellNumbers[idx];\n      }\n    });\n\n    function cellSizeSpecified(cellSize, idx) {\n      return cellSize[idx] != null && cellSize[idx] !== 'auto';\n    } // Has been calculated out number.\n\n\n    this._sw = cellSize[0];\n    this._sh = cellSize[1];\n  };\n  /**\n   * Convert a time data(time, value) item to (x, y) point.\n   */\n  // TODO Clamp of calendar is not same with cartesian coordinate systems.\n  // It will return NaN if data exceeds.\n\n\n  Calendar.prototype.dataToPoint = function (data, clamp) {\n    zrUtil.isArray(data) && (data = data[0]);\n    clamp == null && (clamp = true);\n    var dayInfo = this.getDateInfo(data);\n    var range = this._rangeInfo;\n    var date = dayInfo.formatedDate; // if not in range return [NaN, NaN]\n\n    if (clamp && !(dayInfo.time >= range.start.time && dayInfo.time < range.end.time + PROXIMATE_ONE_DAY)) {\n      return [NaN, NaN];\n    }\n\n    var week = dayInfo.day;\n\n    var nthWeek = this._getRangeInfo([range.start.time, date]).nthWeek;\n\n    if (this._orient === 'vertical') {\n      return [this._rect.x + week * this._sw + this._sw / 2, this._rect.y + nthWeek * this._sh + this._sh / 2];\n    }\n\n    return [this._rect.x + nthWeek * this._sw + this._sw / 2, this._rect.y + week * this._sh + this._sh / 2];\n  };\n  /**\n   * Convert a (x, y) point to time data\n   */\n\n\n  Calendar.prototype.pointToData = function (point) {\n    var date = this.pointToDate(point);\n    return date && date.time;\n  };\n  /**\n   * Convert a time date item to (x, y) four point.\n   */\n\n\n  Calendar.prototype.dataToRect = function (data, clamp) {\n    var point = this.dataToPoint(data, clamp);\n    return {\n      contentShape: {\n        x: point[0] - (this._sw - this._lineWidth) / 2,\n        y: point[1] - (this._sh - this._lineWidth) / 2,\n        width: this._sw - this._lineWidth,\n        height: this._sh - this._lineWidth\n      },\n      center: point,\n      tl: [point[0] - this._sw / 2, point[1] - this._sh / 2],\n      tr: [point[0] + this._sw / 2, point[1] - this._sh / 2],\n      br: [point[0] + this._sw / 2, point[1] + this._sh / 2],\n      bl: [point[0] - this._sw / 2, point[1] + this._sh / 2]\n    };\n  };\n  /**\n   * Convert a (x, y) point to time date\n   *\n   * @param  {Array} point point\n   * @return {Object}       date\n   */\n\n\n  Calendar.prototype.pointToDate = function (point) {\n    var nthX = Math.floor((point[0] - this._rect.x) / this._sw) + 1;\n    var nthY = Math.floor((point[1] - this._rect.y) / this._sh) + 1;\n    var range = this._rangeInfo.range;\n\n    if (this._orient === 'vertical') {\n      return this._getDateByWeeksAndDay(nthY, nthX - 1, range);\n    }\n\n    return this._getDateByWeeksAndDay(nthX, nthY - 1, range);\n  };\n\n  Calendar.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n\n  Calendar.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n\n  Calendar.prototype.containPoint = function (point) {\n    console.warn('Not implemented.');\n    return false;\n  };\n  /**\n   * initRange\n   * Normalize to an [start, end] array\n   */\n\n\n  Calendar.prototype._initRangeOption = function () {\n    var range = this._model.get('range');\n\n    var normalizedRange; // Convert [1990] to 1990\n\n    if (zrUtil.isArray(range) && range.length === 1) {\n      range = range[0];\n    }\n\n    if (!zrUtil.isArray(range)) {\n      var rangeStr = range.toString(); // One year.\n\n      if (/^\\d{4}$/.test(rangeStr)) {\n        normalizedRange = [rangeStr + '-01-01', rangeStr + '-12-31'];\n      } // One month\n\n\n      if (/^\\d{4}[\\/|-]\\d{1,2}$/.test(rangeStr)) {\n        var start = this.getDateInfo(rangeStr);\n        var firstDay = start.date;\n        firstDay.setMonth(firstDay.getMonth() + 1);\n        var end = this.getNextNDay(firstDay, -1);\n        normalizedRange = [start.formatedDate, end.formatedDate];\n      } // One day\n\n\n      if (/^\\d{4}[\\/|-]\\d{1,2}[\\/|-]\\d{1,2}$/.test(rangeStr)) {\n        normalizedRange = [rangeStr, rangeStr];\n      }\n    } else {\n      normalizedRange = range;\n    }\n\n    if (!normalizedRange) {\n      if (process.env.NODE_ENV !== 'production') {\n        zrUtil.logError('Invalid date range.');\n      } // Not handling it.\n\n\n      return range;\n    }\n\n    var tmp = this._getRangeInfo(normalizedRange);\n\n    if (tmp.start.time > tmp.end.time) {\n      normalizedRange.reverse();\n    }\n\n    return normalizedRange;\n  };\n  /**\n   * range info\n   *\n   * @private\n   * @param  {Array} range range ['2017-01-01', '2017-07-08']\n   *  If range[0] > range[1], they will not be reversed.\n   * @return {Object}       obj\n   */\n\n\n  Calendar.prototype._getRangeInfo = function (range) {\n    var parsedRange = [this.getDateInfo(range[0]), this.getDateInfo(range[1])];\n    var reversed;\n\n    if (parsedRange[0].time > parsedRange[1].time) {\n      reversed = true;\n      parsedRange.reverse();\n    }\n\n    var allDay = Math.floor(parsedRange[1].time / PROXIMATE_ONE_DAY) - Math.floor(parsedRange[0].time / PROXIMATE_ONE_DAY) + 1; // Consider case1 (#11677 #10430):\n    // Set the system timezone as \"UK\", set the range to `['2016-07-01', '2016-12-31']`\n    // Consider case2:\n    // Firstly set system timezone as \"Time Zone: America/Toronto\",\n    // ```\n    // let first = new Date(1478412000000 - 3600 * 1000 * 2.5);\n    // let second = new Date(1478412000000);\n    // let allDays = Math.floor(second / ONE_DAY) - Math.floor(first / ONE_DAY) + 1;\n    // ```\n    // will get wrong result because of DST. So we should fix it.\n\n    var date = new Date(parsedRange[0].time);\n    var startDateNum = date.getDate();\n    var endDateNum = parsedRange[1].date.getDate();\n    date.setDate(startDateNum + allDay - 1); // The bias can not over a month, so just compare date.\n\n    var dateNum = date.getDate();\n\n    if (dateNum !== endDateNum) {\n      var sign = date.getTime() - parsedRange[1].time > 0 ? 1 : -1;\n\n      while ((dateNum = date.getDate()) !== endDateNum && (date.getTime() - parsedRange[1].time) * sign > 0) {\n        allDay -= sign;\n        date.setDate(dateNum - sign);\n      }\n    }\n\n    var weeks = Math.floor((allDay + parsedRange[0].day + 6) / 7);\n    var nthWeek = reversed ? -weeks + 1 : weeks - 1;\n    reversed && parsedRange.reverse();\n    return {\n      range: [parsedRange[0].formatedDate, parsedRange[1].formatedDate],\n      start: parsedRange[0],\n      end: parsedRange[1],\n      allDay: allDay,\n      weeks: weeks,\n      // From 0.\n      nthWeek: nthWeek,\n      fweek: parsedRange[0].day,\n      lweek: parsedRange[1].day\n    };\n  };\n  /**\n   * get date by nthWeeks and week day in range\n   *\n   * @private\n   * @param  {number} nthWeek the week\n   * @param  {number} day   the week day\n   * @param  {Array} range [d1, d2]\n   * @return {Object}\n   */\n\n\n  Calendar.prototype._getDateByWeeksAndDay = function (nthWeek, day, range) {\n    var rangeInfo = this._getRangeInfo(range);\n\n    if (nthWeek > rangeInfo.weeks || nthWeek === 0 && day < rangeInfo.fweek || nthWeek === rangeInfo.weeks && day > rangeInfo.lweek) {\n      return null;\n    }\n\n    var nthDay = (nthWeek - 1) * 7 - rangeInfo.fweek + day;\n    var date = new Date(rangeInfo.start.time);\n    date.setDate(+rangeInfo.start.d + nthDay);\n    return this.getDateInfo(date);\n  };\n\n  Calendar.create = function (ecModel, api) {\n    var calendarList = [];\n    ecModel.eachComponent('calendar', function (calendarModel) {\n      var calendar = new Calendar(calendarModel, ecModel, api);\n      calendarList.push(calendar);\n      calendarModel.coordinateSystem = calendar;\n    });\n    ecModel.eachSeries(function (calendarSeries) {\n      if (calendarSeries.get('coordinateSystem') === 'calendar') {\n        // Inject coordinate system\n        calendarSeries.coordinateSystem = calendarList[calendarSeries.get('calendarIndex') || 0];\n      }\n    });\n    return calendarList;\n  };\n\n  Calendar.dimensions = ['time', 'value'];\n  return Calendar;\n}();\n\nfunction getCoordSys(finder) {\n  var calendarModel = finder.calendarModel;\n  var seriesModel = finder.seriesModel;\n  var coordSys = calendarModel ? calendarModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem : null;\n  return coordSys;\n}\n\nexport default Calendar;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CalendarModel from '../../coord/calendar/CalendarModel';\nimport CalendarView from './CalendarView';\nimport Calendar from '../../coord/calendar/Calendar';\nexport function install(registers) {\n  registers.registerComponentModel(CalendarModel);\n  registers.registerComponentView(CalendarView);\n  registers.registerCoordinateSystem('calendar', Calendar);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * This module is imported by echarts directly.\n *\n * Notice:\n * Always keep this file exists for backward compatibility.\n * Because before 4.1.0, dataset is an optional component,\n * some users may import this module manually.\n */\n\nimport ComponentModel from '../../model/Component';\nimport ComponentView from '../../view/Component';\nimport { SERIES_LAYOUT_BY_COLUMN } from '../../util/types';\nimport { disableTransformOptionMerge, SourceManager } from '../../data/helper/sourceManager';\n\nvar DatasetModel =\n/** @class */\nfunction (_super) {\n  __extends(DatasetModel, _super);\n\n  function DatasetModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'dataset';\n    return _this;\n  }\n\n  DatasetModel.prototype.init = function (option, parentModel, ecModel) {\n    _super.prototype.init.call(this, option, parentModel, ecModel);\n\n    this._sourceManager = new SourceManager(this);\n    disableTransformOptionMerge(this);\n  };\n\n  DatasetModel.prototype.mergeOption = function (newOption, ecModel) {\n    _super.prototype.mergeOption.call(this, newOption, ecModel);\n\n    disableTransformOptionMerge(this);\n  };\n\n  DatasetModel.prototype.optionUpdated = function () {\n    this._sourceManager.dirty();\n  };\n\n  DatasetModel.prototype.getSourceManager = function () {\n    return this._sourceManager;\n  };\n\n  DatasetModel.type = 'dataset';\n  DatasetModel.defaultOption = {\n    seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN\n  };\n  return DatasetModel;\n}(ComponentModel);\n\nexport { DatasetModel };\n\nvar DatasetView =\n/** @class */\nfunction (_super) {\n  __extends(DatasetView, _super);\n\n  function DatasetView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'dataset';\n    return _this;\n  }\n\n  DatasetView.type = 'dataset';\n  return DatasetView;\n}(ComponentView);\n\nexport function install(registers) {\n  registers.registerComponentModel(DatasetModel);\n  registers.registerComponentView(DatasetView);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { indexOf, createHashMap, assert } from 'zrender/lib/core/util';\nexport var DATA_ZOOM_AXIS_DIMENSIONS = ['x', 'y', 'radius', 'angle', 'single']; // Supported coords.\n// FIXME: polar has been broken (but rarely used).\n\nvar SERIES_COORDS = ['cartesian2d', 'polar', 'singleAxis'];\nexport function isCoordSupported(seriesModel) {\n  var coordType = seriesModel.get('coordinateSystem');\n  return indexOf(SERIES_COORDS, coordType) >= 0;\n}\nexport function getAxisMainType(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'Axis';\n}\nexport function getAxisIndexPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'AxisIndex';\n}\nexport function getAxisIdPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'AxisId';\n}\n/**\n * If two dataZoomModels has the same axis controlled, we say that they are 'linked'.\n * This function finds all linked dataZoomModels start from the given payload.\n */\n\nexport function findEffectedDataZooms(ecModel, payload) {\n  // Key: `DataZoomAxisDimension`\n  var axisRecords = createHashMap();\n  var effectedModels = []; // Key: uid of dataZoomModel\n\n  var effectedModelMap = createHashMap(); // Find the dataZooms specified by payload.\n\n  ecModel.eachComponent({\n    mainType: 'dataZoom',\n    query: payload\n  }, function (dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid)) {\n      addToEffected(dataZoomModel);\n    }\n  }); // Start from the given dataZoomModels, travel the graph to find\n  // all of the linked dataZoom models.\n\n  var foundNewLink;\n\n  do {\n    foundNewLink = false;\n    ecModel.eachComponent('dataZoom', processSingle);\n  } while (foundNewLink);\n\n  function processSingle(dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid) && isLinked(dataZoomModel)) {\n      addToEffected(dataZoomModel);\n      foundNewLink = true;\n    }\n  }\n\n  function addToEffected(dataZoom) {\n    effectedModelMap.set(dataZoom.uid, true);\n    effectedModels.push(dataZoom);\n    markAxisControlled(dataZoom);\n  }\n\n  function isLinked(dataZoomModel) {\n    var isLink = false;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var axisIdxArr = axisRecords.get(axisDim);\n\n      if (axisIdxArr && axisIdxArr[axisIndex]) {\n        isLink = true;\n      }\n    });\n    return isLink;\n  }\n\n  function markAxisControlled(dataZoomModel) {\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      (axisRecords.get(axisDim) || axisRecords.set(axisDim, []))[axisIndex] = true;\n    });\n  }\n\n  return effectedModels;\n}\n/**\n * Find the first target coordinate system.\n * Available after model built.\n *\n * @return Like {\n *                  grid: [\n *                      {model: coord0, axisModels: [axis1, axis3], coordIndex: 1},\n *                      {model: coord1, axisModels: [axis0, axis2], coordIndex: 0},\n *                      ...\n *                  ],  // cartesians must not be null/undefined.\n *                  polar: [\n *                      {model: coord0, axisModels: [axis4], coordIndex: 0},\n *                      ...\n *                  ],  // polars must not be null/undefined.\n *                  singleAxis: [\n *                      {model: coord0, axisModels: [], coordIndex: 0}\n *                  ]\n *              }\n */\n\nexport function collectReferCoordSysModelInfo(dataZoomModel) {\n  var ecModel = dataZoomModel.ecModel;\n  var coordSysInfoWrap = {\n    infoList: [],\n    infoMap: createHashMap()\n  };\n  dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n    var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n\n    if (!axisModel) {\n      return;\n    }\n\n    var coordSysModel = axisModel.getCoordSysModel();\n\n    if (!coordSysModel) {\n      return;\n    }\n\n    var coordSysUid = coordSysModel.uid;\n    var coordSysInfo = coordSysInfoWrap.infoMap.get(coordSysUid);\n\n    if (!coordSysInfo) {\n      coordSysInfo = {\n        model: coordSysModel,\n        axisModels: []\n      };\n      coordSysInfoWrap.infoList.push(coordSysInfo);\n      coordSysInfoWrap.infoMap.set(coordSysUid, coordSysInfo);\n    }\n\n    coordSysInfo.axisModels.push(axisModel);\n  });\n  return coordSysInfoWrap;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { each, createHashMap, merge, assert } from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\nimport { getAxisMainType, DATA_ZOOM_AXIS_DIMENSIONS } from './helper';\nimport { MULTIPLE_REFERRING, SINGLE_REFERRING } from '../../util/model';\n\nvar DataZoomAxisInfo =\n/** @class */\nfunction () {\n  function DataZoomAxisInfo() {\n    this.indexList = [];\n    this.indexMap = [];\n  }\n\n  DataZoomAxisInfo.prototype.add = function (axisCmptIdx) {\n    // Remove duplication.\n    if (!this.indexMap[axisCmptIdx]) {\n      this.indexList.push(axisCmptIdx);\n      this.indexMap[axisCmptIdx] = true;\n    }\n  };\n\n  return DataZoomAxisInfo;\n}();\n\nvar DataZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomModel, _super);\n\n  function DataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = DataZoomModel.type;\n    _this._autoThrottle = true;\n    _this._noTarget = true;\n    /**\n     * It is `[rangeModeForMin, rangeModeForMax]`.\n     * The optional values for `rangeMode`:\n     * + `'value'` mode: the axis extent will always be determined by\n     *     `dataZoom.startValue` and `dataZoom.endValue`, despite\n     *     how data like and how `axis.min` and `axis.max` are.\n     * + `'percent'` mode: `100` represents 100% of the `[dMin, dMax]`,\n     *     where `dMin` is `axis.min` if `axis.min` specified, otherwise `data.extent[0]`,\n     *     and `dMax` is `axis.max` if `axis.max` specified, otherwise `data.extent[1]`.\n     *     Axis extent will be determined by the result of the percent of `[dMin, dMax]`.\n     *\n     * For example, when users are using dynamic data (update data periodically via `setOption`),\n     * if in `'value`' mode, the window will be kept in a fixed value range despite how\n     * data are appended, while if in `'percent'` mode, whe window range will be changed alone with\n     * the appended data (suppose `axis.min` and `axis.max` are not specified).\n     */\n\n    _this._rangePropMode = ['percent', 'percent'];\n    return _this;\n  }\n\n  DataZoomModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputRawOption = retrieveRawOption(option);\n    /**\n     * Suppose a \"main process\" start at the point that model prepared (that is,\n     * model initialized or merged or method called in `action`).\n     * We should keep the `main process` idempotent, that is, given a set of values\n     * on `option`, we get the same result.\n     *\n     * But sometimes, values on `option` will be updated for providing users\n     * a \"final calculated value\" (`dataZoomProcessor` will do that). Those value\n     * should not be the base/input of the `main process`.\n     *\n     * So in that case we should save and keep the input of the `main process`\n     * separately, called `settledOption`.\n     *\n     * For example, consider the case:\n     * (Step_1) brush zoom the grid by `toolbox.dataZoom`,\n     *     where the original input `option.startValue`, `option.endValue` are earsed by\n     *     calculated value.\n     * (Step)2) click the legend to hide and show a series,\n     *     where the new range is calculated by the earsed `startValue` and `endValue`,\n     *     which brings incorrect result.\n     */\n\n    this.settledOption = inputRawOption;\n    this.mergeDefaultAndTheme(option, ecModel);\n\n    this._doInit(inputRawOption);\n  };\n\n  DataZoomModel.prototype.mergeOption = function (newOption) {\n    var inputRawOption = retrieveRawOption(newOption); //FIX #2591\n\n    merge(this.option, newOption, true);\n    merge(this.settledOption, inputRawOption, true);\n\n    this._doInit(inputRawOption);\n  };\n\n  DataZoomModel.prototype._doInit = function (inputRawOption) {\n    var thisOption = this.option; // if (!env.canvasSupported) {\n    //     thisOption.realtime = false;\n    // }\n\n    this._setDefaultThrottle(inputRawOption);\n\n    this._updateRangeUse(inputRawOption);\n\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      // start/end has higher priority over startValue/endValue if they\n      // both set, but we should make chart.setOption({endValue: 1000})\n      // effective, rather than chart.setOption({endValue: 1000, end: null}).\n      if (this._rangePropMode[index] === 'value') {\n        thisOption[names[0]] = settledOption[names[0]] = null;\n      } // Otherwise do nothing and use the merge result.\n\n    }, this);\n\n    this._resetTarget();\n  };\n\n  DataZoomModel.prototype._resetTarget = function () {\n    var optionOrient = this.get('orient', true);\n    var targetAxisIndexMap = this._targetAxisInfoMap = createHashMap();\n\n    var hasAxisSpecified = this._fillSpecifiedTargetAxis(targetAxisIndexMap);\n\n    if (hasAxisSpecified) {\n      this._orient = optionOrient || this._makeAutoOrientByTargetAxis();\n    } else {\n      this._orient = optionOrient || 'horizontal';\n\n      this._fillAutoTargetAxisByOrient(targetAxisIndexMap, this._orient);\n    }\n\n    this._noTarget = true;\n    targetAxisIndexMap.each(function (axisInfo) {\n      if (axisInfo.indexList.length) {\n        this._noTarget = false;\n      }\n    }, this);\n  };\n\n  DataZoomModel.prototype._fillSpecifiedTargetAxis = function (targetAxisIndexMap) {\n    var hasAxisSpecified = false;\n    each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n      var refering = this.getReferringComponents(getAxisMainType(axisDim), MULTIPLE_REFERRING); // When user set axisIndex as a empty array, we think that user specify axisIndex\n      // but do not want use auto mode. Because empty array may be encountered when\n      // some error occured.\n\n      if (!refering.specified) {\n        return;\n      }\n\n      hasAxisSpecified = true;\n      var axisInfo = new DataZoomAxisInfo();\n      each(refering.models, function (axisModel) {\n        axisInfo.add(axisModel.componentIndex);\n      });\n      targetAxisIndexMap.set(axisDim, axisInfo);\n    }, this);\n    return hasAxisSpecified;\n  };\n\n  DataZoomModel.prototype._fillAutoTargetAxisByOrient = function (targetAxisIndexMap, orient) {\n    var ecModel = this.ecModel;\n    var needAuto = true; // Find axis that parallel to dataZoom as default.\n\n    if (needAuto) {\n      var axisDim = orient === 'vertical' ? 'y' : 'x';\n      var axisModels = ecModel.findComponents({\n        mainType: axisDim + 'Axis'\n      });\n      setParallelAxis(axisModels, axisDim);\n    } // Find axis that parallel to dataZoom as default.\n\n\n    if (needAuto) {\n      var axisModels = ecModel.findComponents({\n        mainType: 'singleAxis',\n        filter: function (axisModel) {\n          return axisModel.get('orient', true) === orient;\n        }\n      });\n      setParallelAxis(axisModels, 'single');\n    }\n\n    function setParallelAxis(axisModels, axisDim) {\n      // At least use the first parallel axis as the target axis.\n      var axisModel = axisModels[0];\n\n      if (!axisModel) {\n        return;\n      }\n\n      var axisInfo = new DataZoomAxisInfo();\n      axisInfo.add(axisModel.componentIndex);\n      targetAxisIndexMap.set(axisDim, axisInfo);\n      needAuto = false; // Find parallel axes in the same grid.\n\n      if (axisDim === 'x' || axisDim === 'y') {\n        var gridModel_1 = axisModel.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n        gridModel_1 && each(axisModels, function (axModel) {\n          if (axisModel.componentIndex !== axModel.componentIndex && gridModel_1 === axModel.getReferringComponents('grid', SINGLE_REFERRING).models[0]) {\n            axisInfo.add(axModel.componentIndex);\n          }\n        });\n      }\n    }\n\n    if (needAuto) {\n      // If no parallel axis, find the first category axis as default. (Also consider polar).\n      each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n        if (!needAuto) {\n          return;\n        }\n\n        var axisModels = ecModel.findComponents({\n          mainType: getAxisMainType(axisDim),\n          filter: function (axisModel) {\n            return axisModel.get('type', true) === 'category';\n          }\n        });\n\n        if (axisModels[0]) {\n          var axisInfo = new DataZoomAxisInfo();\n          axisInfo.add(axisModels[0].componentIndex);\n          targetAxisIndexMap.set(axisDim, axisInfo);\n          needAuto = false;\n        }\n      }, this);\n    }\n  };\n\n  DataZoomModel.prototype._makeAutoOrientByTargetAxis = function () {\n    var dim; // Find the first axis\n\n    this.eachTargetAxis(function (axisDim) {\n      !dim && (dim = axisDim);\n    }, this);\n    return dim === 'y' ? 'vertical' : 'horizontal';\n  };\n\n  DataZoomModel.prototype._setDefaultThrottle = function (inputRawOption) {\n    // When first time user set throttle, auto throttle ends.\n    if (inputRawOption.hasOwnProperty('throttle')) {\n      this._autoThrottle = false;\n    }\n\n    if (this._autoThrottle) {\n      var globalOption = this.ecModel.option;\n      this.option.throttle = globalOption.animation && globalOption.animationDurationUpdate > 0 ? 100 : 20;\n    }\n  };\n\n  DataZoomModel.prototype._updateRangeUse = function (inputRawOption) {\n    var rangePropMode = this._rangePropMode;\n    var rangeModeInOption = this.get('rangeMode');\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      var percentSpecified = inputRawOption[names[0]] != null;\n      var valueSpecified = inputRawOption[names[1]] != null;\n\n      if (percentSpecified && !valueSpecified) {\n        rangePropMode[index] = 'percent';\n      } else if (!percentSpecified && valueSpecified) {\n        rangePropMode[index] = 'value';\n      } else if (rangeModeInOption) {\n        rangePropMode[index] = rangeModeInOption[index];\n      } else if (percentSpecified) {\n        // percentSpecified && valueSpecified\n        rangePropMode[index] = 'percent';\n      } // else remain its original setting.\n\n    });\n  };\n\n  DataZoomModel.prototype.noTarget = function () {\n    return this._noTarget;\n  };\n\n  DataZoomModel.prototype.getFirstTargetAxisModel = function () {\n    var firstAxisModel;\n    this.eachTargetAxis(function (axisDim, axisIndex) {\n      if (firstAxisModel == null) {\n        firstAxisModel = this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n      }\n    }, this);\n    return firstAxisModel;\n  };\n  /**\n   * @param {Function} callback param: axisModel, dimNames, axisIndex, dataZoomModel, ecModel\n   */\n\n\n  DataZoomModel.prototype.eachTargetAxis = function (callback, context) {\n    this._targetAxisInfoMap.each(function (axisInfo, axisDim) {\n      each(axisInfo.indexList, function (axisIndex) {\n        callback.call(context, axisDim, axisIndex);\n      });\n    });\n  };\n  /**\n   * @return If not found, return null/undefined.\n   */\n\n\n  DataZoomModel.prototype.getAxisProxy = function (axisDim, axisIndex) {\n    var axisModel = this.getAxisModel(axisDim, axisIndex);\n\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    }\n  };\n  /**\n   * @return If not found, return null/undefined.\n   */\n\n\n  DataZoomModel.prototype.getAxisModel = function (axisDim, axisIndex) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(axisDim && axisIndex != null);\n    }\n\n    var axisInfo = this._targetAxisInfoMap.get(axisDim);\n\n    if (axisInfo && axisInfo.indexMap[axisIndex]) {\n      return this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n    }\n  };\n  /**\n   * If not specified, set to undefined.\n   */\n\n\n  DataZoomModel.prototype.setRawRange = function (opt) {\n    var thisOption = this.option;\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names) {\n      // Consider the pair <start, startValue>:\n      // If one has value and the other one is `null/undefined`, we both set them\n      // to `settledOption`. This strategy enables the feature to clear the original\n      // value in `settledOption` to `null/undefined`.\n      // But if both of them are `null/undefined`, we do not set them to `settledOption`\n      // and keep `settledOption` with the original value. This strategy enables users to\n      // only set <end or endValue> but not set <start or startValue> when calling\n      // `dispatchAction`.\n      // The pair <end, endValue> is treated in the same way.\n      if (opt[names[0]] != null || opt[names[1]] != null) {\n        thisOption[names[0]] = settledOption[names[0]] = opt[names[0]];\n        thisOption[names[1]] = settledOption[names[1]] = opt[names[1]];\n      }\n    }, this);\n\n    this._updateRangeUse(opt);\n  };\n\n  DataZoomModel.prototype.setCalculatedRange = function (opt) {\n    var option = this.option;\n    each(['start', 'startValue', 'end', 'endValue'], function (name) {\n      option[name] = opt[name];\n    });\n  };\n\n  DataZoomModel.prototype.getPercentRange = function () {\n    var axisProxy = this.findRepresentativeAxisProxy();\n\n    if (axisProxy) {\n      return axisProxy.getDataPercentWindow();\n    }\n  };\n  /**\n   * For example, chart.getModel().getComponent('dataZoom').getValueRange('y', 0);\n   *\n   * @return [startValue, endValue] value can only be '-' or finite number.\n   */\n\n\n  DataZoomModel.prototype.getValueRange = function (axisDim, axisIndex) {\n    if (axisDim == null && axisIndex == null) {\n      var axisProxy = this.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        return axisProxy.getDataValueWindow();\n      }\n    } else {\n      return this.getAxisProxy(axisDim, axisIndex).getDataValueWindow();\n    }\n  };\n  /**\n   * @param axisModel If axisModel given, find axisProxy\n   *      corresponding to the axisModel\n   */\n\n\n  DataZoomModel.prototype.findRepresentativeAxisProxy = function (axisModel) {\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    } // Find the first hosted axisProxy\n\n\n    var firstProxy;\n\n    var axisDimList = this._targetAxisInfoMap.keys();\n\n    for (var i = 0; i < axisDimList.length; i++) {\n      var axisDim = axisDimList[i];\n\n      var axisInfo = this._targetAxisInfoMap.get(axisDim);\n\n      for (var j = 0; j < axisInfo.indexList.length; j++) {\n        var proxy = this.getAxisProxy(axisDim, axisInfo.indexList[j]);\n\n        if (proxy.hostedBy(this)) {\n          return proxy;\n        }\n\n        if (!firstProxy) {\n          firstProxy = proxy;\n        }\n      }\n    } // If no hosted proxy found, still need to return a proxy.\n    // This case always happens in toolbox dataZoom, where axes are all hosted by\n    // other dataZooms.\n\n\n    return firstProxy;\n  };\n\n  DataZoomModel.prototype.getRangePropMode = function () {\n    return this._rangePropMode.slice();\n  };\n\n  DataZoomModel.prototype.getOrient = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      // Should not be called before initialized.\n      assert(this._orient);\n    }\n\n    return this._orient;\n  };\n\n  DataZoomModel.type = 'dataZoom';\n  DataZoomModel.dependencies = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'series', 'toolbox'];\n  DataZoomModel.defaultOption = {\n    zlevel: 0,\n    z: 4,\n    filterMode: 'filter',\n    start: 0,\n    end: 100\n  };\n  return DataZoomModel;\n}(ComponentModel);\n/**\n * Retrieve the those raw params from option, which will be cached separately.\n * becasue they will be overwritten by normalized/calculated values in the main\n * process.\n */\n\n\nfunction retrieveRawOption(option) {\n  var ret = {};\n  each(['start', 'end', 'startValue', 'endValue', 'throttle'], function (name) {\n    option.hasOwnProperty(name) && (ret[name] = option[name]);\n  });\n  return ret;\n}\n\nexport default DataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar InsideZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(InsideZoomModel, _super);\n\n  function InsideZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = InsideZoomModel.type;\n    return _this;\n  }\n\n  InsideZoomModel.type = 'dataZoom.inside';\n  InsideZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n    disabled: false,\n    zoomLock: false,\n    zoomOnMouseWheel: true,\n    moveOnMouseMove: true,\n    moveOnMouseWheel: false,\n    preventDefaultMouseMove: true\n  });\n  return InsideZoomModel;\n}(DataZoomModel);\n\nexport default InsideZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\n\nvar DataZoomView =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomView, _super);\n\n  function DataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = DataZoomView.type;\n    return _this;\n  }\n\n  DataZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n    this.dataZoomModel = dataZoomModel;\n    this.ecModel = ecModel;\n    this.api = api;\n  };\n\n  DataZoomView.type = 'dataZoom';\n  return DataZoomView;\n}(ComponentView);\n\nexport default DataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as echarts from '../../core/echarts';\nvar ATTR = '\\0_ec_interaction_mutex';\nexport function take(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  store[resourceKey] = userKey;\n}\nexport function release(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  var uKey = store[resourceKey];\n\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\nexport function isTaken(zr, resourceKey) {\n  return !!getStore(zr)[resourceKey];\n}\n\nfunction getStore(zr) {\n  return zr[ATTR] || (zr[ATTR] = {});\n}\n/**\n * payload: {\n *     type: 'takeGlobalCursor',\n *     key: 'dataZoomSelect', or 'brush', or ...,\n *         If no userKey, release global cursor.\n * }\n */\n// TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, function () {});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Eventful from 'zrender/lib/core/Eventful';\nimport * as eventTool from 'zrender/lib/core/event';\nimport * as interactionMutex from './interactionMutex';\nimport { isString, bind, defaults, clone } from 'zrender/lib/core/util';\n\nvar RoamController =\n/** @class */\nfunction (_super) {\n  __extends(RoamController, _super);\n\n  function RoamController(zr) {\n    var _this = _super.call(this) || this;\n\n    _this._zr = zr; // Avoid two roamController bind the same handler\n\n    var mousedownHandler = bind(_this._mousedownHandler, _this);\n    var mousemoveHandler = bind(_this._mousemoveHandler, _this);\n    var mouseupHandler = bind(_this._mouseupHandler, _this);\n    var mousewheelHandler = bind(_this._mousewheelHandler, _this);\n    var pinchHandler = bind(_this._pinchHandler, _this);\n    /**\n     * Notice: only enable needed types. For example, if 'zoom'\n     * is not needed, 'zoom' should not be enabled, otherwise\n     * default mousewheel behaviour (scroll page) will be disabled.\n     */\n\n    _this.enable = function (controlType, opt) {\n      // Disable previous first\n      this.disable();\n      this._opt = defaults(clone(opt) || {}, {\n        zoomOnMouseWheel: true,\n        moveOnMouseMove: true,\n        // By default, wheel do not trigger move.\n        moveOnMouseWheel: false,\n        preventDefaultMouseMove: true\n      });\n\n      if (controlType == null) {\n        controlType = true;\n      }\n\n      if (controlType === true || controlType === 'move' || controlType === 'pan') {\n        zr.on('mousedown', mousedownHandler);\n        zr.on('mousemove', mousemoveHandler);\n        zr.on('mouseup', mouseupHandler);\n      }\n\n      if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n        zr.on('mousewheel', mousewheelHandler);\n        zr.on('pinch', pinchHandler);\n      }\n    };\n\n    _this.disable = function () {\n      zr.off('mousedown', mousedownHandler);\n      zr.off('mousemove', mousemoveHandler);\n      zr.off('mouseup', mouseupHandler);\n      zr.off('mousewheel', mousewheelHandler);\n      zr.off('pinch', pinchHandler);\n    };\n\n    return _this;\n  }\n\n  RoamController.prototype.isDragging = function () {\n    return this._dragging;\n  };\n\n  RoamController.prototype.isPinching = function () {\n    return this._pinching;\n  };\n\n  RoamController.prototype.setPointerChecker = function (pointerChecker) {\n    this.pointerChecker = pointerChecker;\n  };\n\n  RoamController.prototype.dispose = function () {\n    this.disable();\n  };\n\n  RoamController.prototype._mousedownHandler = function (e) {\n    if (eventTool.isMiddleOrRightButtonOnMouseUpDown(e) || e.target && e.target.draggable) {\n      return;\n    }\n\n    var x = e.offsetX;\n    var y = e.offsetY; // Only check on mosedown, but not mousemove.\n    // Mouse can be out of target when mouse moving.\n\n    if (this.pointerChecker && this.pointerChecker(e, x, y)) {\n      this._x = x;\n      this._y = y;\n      this._dragging = true;\n    }\n  };\n\n  RoamController.prototype._mousemoveHandler = function (e) {\n    if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt) || e.gestureEvent === 'pinch' || interactionMutex.isTaken(this._zr, 'globalPan')) {\n      return;\n    }\n\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var oldX = this._x;\n    var oldY = this._y;\n    var dx = x - oldX;\n    var dy = y - oldY;\n    this._x = x;\n    this._y = y;\n    this._opt.preventDefaultMouseMove && eventTool.stop(e.event);\n    trigger(this, 'pan', 'moveOnMouseMove', e, {\n      dx: dx,\n      dy: dy,\n      oldX: oldX,\n      oldY: oldY,\n      newX: x,\n      newY: y,\n      isAvailableBehavior: null\n    });\n  };\n\n  RoamController.prototype._mouseupHandler = function (e) {\n    if (!eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n      this._dragging = false;\n    }\n  };\n\n  RoamController.prototype._mousewheelHandler = function (e) {\n    var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n    var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n    var wheelDelta = e.wheelDelta;\n    var absWheelDeltaDelta = Math.abs(wheelDelta);\n    var originX = e.offsetX;\n    var originY = e.offsetY; // wheelDelta maybe -0 in chrome mac.\n\n    if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n      return;\n    } // If both `shouldZoom` and `shouldMove` is true, trigger\n    // their event both, and the final behavior is determined\n    // by event listener themselves.\n\n\n    if (shouldZoom) {\n      // Convenience:\n      // Mac and VM Windows on Mac: scroll up: zoom out.\n      // Windows: scroll up: zoom in.\n      // FIXME: Should do more test in different environment.\n      // wheelDelta is too complicated in difference nvironment\n      // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n      // although it has been normallized by zrender.\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n      var scale = wheelDelta > 0 ? factor : 1 / factor;\n      checkPointerAndTrigger(this, 'zoom', 'zoomOnMouseWheel', e, {\n        scale: scale,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n\n    if (shouldMove) {\n      // FIXME: Should do more test in different environment.\n      var absDelta = Math.abs(wheelDelta); // wheelDelta of mouse wheel is bigger than touch pad.\n\n      var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n      checkPointerAndTrigger(this, 'scrollMove', 'moveOnMouseWheel', e, {\n        scrollDelta: scrollDelta,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n  };\n\n  RoamController.prototype._pinchHandler = function (e) {\n    if (interactionMutex.isTaken(this._zr, 'globalPan')) {\n      return;\n    }\n\n    var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n    checkPointerAndTrigger(this, 'zoom', null, e, {\n      scale: scale,\n      originX: e.pinchX,\n      originY: e.pinchY,\n      isAvailableBehavior: null\n    });\n  };\n\n  return RoamController;\n}(Eventful);\n\nfunction checkPointerAndTrigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  if (controller.pointerChecker && controller.pointerChecker(e, contollerEvent.originX, contollerEvent.originY)) {\n    // When mouse is out of roamController rect,\n    // default befavoius should not be be disabled, otherwise\n    // page sliding is disabled, contrary to expectation.\n    eventTool.stop(e.event);\n    trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n  }\n}\n\nfunction trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  // Also provide behavior checker for event listener, for some case that\n  // multiple components share one listener.\n  contollerEvent.isAvailableBehavior = bind(isAvailableBehavior, null, behaviorToCheck, e);\n  controller.trigger(eventName, contollerEvent);\n} // settings: {\n//     zoomOnMouseWheel\n//     moveOnMouseMove\n//     moveOnMouseWheel\n// }\n// The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n\n\nfunction isAvailableBehavior(behaviorToCheck, e, settings) {\n  var setting = settings[behaviorToCheck];\n  return !behaviorToCheck || setting && (!isString(setting) || e.event[setting + 'Key']);\n}\n\nexport default RoamController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Only create one roam controller for each coordinate system.\n// one roam controller might be refered by two inside data zoom\n// components (for example, one for x and one for y). When user\n// pan or zoom, only dispatch one action for those data zoom\n// components.\nimport RoamController from '../../component/helper/RoamController';\nimport * as throttleUtil from '../../util/throttle';\nimport { makeInner } from '../../util/model';\nimport { each, curry, createHashMap } from 'zrender/lib/core/util';\nimport { collectReferCoordSysModelInfo } from './helper';\nvar inner = makeInner();\nexport function setViewInfoToCoordSysRecord(api, dataZoomModel, getRange) {\n  inner(api).coordSysRecordMap.each(function (coordSysRecord) {\n    var dzInfo = coordSysRecord.dataZoomInfoMap.get(dataZoomModel.uid);\n\n    if (dzInfo) {\n      dzInfo.getRange = getRange;\n    }\n  });\n}\nexport function disposeCoordSysRecordIfNeeded(api, dataZoomModel) {\n  var coordSysRecordMap = inner(api).coordSysRecordMap;\n  var coordSysKeyArr = coordSysRecordMap.keys();\n\n  for (var i = 0; i < coordSysKeyArr.length; i++) {\n    var coordSysKey = coordSysKeyArr[i];\n    var coordSysRecord = coordSysRecordMap.get(coordSysKey);\n    var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n\n    if (dataZoomInfoMap) {\n      var dzUid = dataZoomModel.uid;\n      var dzInfo = dataZoomInfoMap.get(dzUid);\n\n      if (dzInfo) {\n        dataZoomInfoMap.removeKey(dzUid);\n\n        if (!dataZoomInfoMap.keys().length) {\n          disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n        }\n      }\n    }\n  }\n}\n\nfunction disposeCoordSysRecord(coordSysRecordMap, coordSysRecord) {\n  if (coordSysRecord) {\n    coordSysRecordMap.removeKey(coordSysRecord.model.uid);\n    var controller = coordSysRecord.controller;\n    controller && controller.dispose();\n  }\n}\n\nfunction createCoordSysRecord(api, coordSysModel) {\n  // These init props will never change after record created.\n  var coordSysRecord = {\n    model: coordSysModel,\n    containsPoint: curry(containsPoint, coordSysModel),\n    dispatchAction: curry(dispatchAction, api),\n    dataZoomInfoMap: null,\n    controller: null\n  }; // Must not do anything depends on coordSysRecord outside the event handler here,\n  // because coordSysRecord not completed yet.\n\n  var controller = coordSysRecord.controller = new RoamController(api.getZr());\n  each(['pan', 'zoom', 'scrollMove'], function (eventName) {\n    controller.on(eventName, function (event) {\n      var batch = [];\n      coordSysRecord.dataZoomInfoMap.each(function (dzInfo) {\n        // Check whether the behaviors (zoomOnMouseWheel, moveOnMouseMove,\n        // moveOnMouseWheel, ...) enabled.\n        if (!event.isAvailableBehavior(dzInfo.model.option)) {\n          return;\n        }\n\n        var method = (dzInfo.getRange || {})[eventName];\n        var range = method && method(dzInfo.dzReferCoordSysInfo, coordSysRecord.model.mainType, coordSysRecord.controller, event);\n        !dzInfo.model.get('disabled', true) && range && batch.push({\n          dataZoomId: dzInfo.model.id,\n          start: range[0],\n          end: range[1]\n        });\n      });\n      batch.length && coordSysRecord.dispatchAction(batch);\n    });\n  });\n  return coordSysRecord;\n}\n/**\n * This action will be throttled.\n */\n\n\nfunction dispatchAction(api, batch) {\n  api.dispatchAction({\n    type: 'dataZoom',\n    animation: {\n      easing: 'cubicOut',\n      duration: 100\n    },\n    batch: batch\n  });\n}\n\nfunction containsPoint(coordSysModel, e, x, y) {\n  return coordSysModel.coordinateSystem.containPoint([x, y]);\n}\n/**\n * Merge roamController settings when multiple dataZooms share one roamController.\n */\n\n\nfunction mergeControllerParams(dataZoomInfoMap) {\n  var controlType; // DO NOT use reserved word (true, false, undefined) as key literally. Even if encapsulated\n  // as string, it is probably revert to reserved word by compress tool. See #7411.\n\n  var prefix = 'type_';\n  var typePriority = {\n    'type_true': 2,\n    'type_move': 1,\n    'type_false': 0,\n    'type_undefined': -1\n  };\n  var preventDefaultMouseMove = true;\n  dataZoomInfoMap.each(function (dataZoomInfo) {\n    var dataZoomModel = dataZoomInfo.model;\n    var oneType = dataZoomModel.get('disabled', true) ? false : dataZoomModel.get('zoomLock', true) ? 'move' : true;\n\n    if (typePriority[prefix + oneType] > typePriority[prefix + controlType]) {\n      controlType = oneType;\n    } // Prevent default move event by default. If one false, do not prevent. Otherwise\n    // users may be confused why it does not work when multiple insideZooms exist.\n\n\n    preventDefaultMouseMove = preventDefaultMouseMove && dataZoomModel.get('preventDefaultMouseMove', true);\n  });\n  return {\n    controlType: controlType,\n    opt: {\n      // RoamController will enable all of these functionalities,\n      // and the final behavior is determined by its event listener\n      // provided by each inside zoom.\n      zoomOnMouseWheel: true,\n      moveOnMouseMove: true,\n      moveOnMouseWheel: true,\n      preventDefaultMouseMove: !!preventDefaultMouseMove\n    }\n  };\n}\n\nexport function installDataZoomRoamProcessor(registers) {\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, function (ecModel, api) {\n    var apiInner = inner(api);\n    var coordSysRecordMap = apiInner.coordSysRecordMap || (apiInner.coordSysRecordMap = createHashMap());\n    coordSysRecordMap.each(function (coordSysRecord) {\n      // `coordSysRecordMap` always exists (becuase it hold the `roam controller`, which should\n      // better not re-create each time), but clear `dataZoomInfoMap` each round of the workflow.\n      coordSysRecord.dataZoomInfoMap = null;\n    });\n    ecModel.eachComponent({\n      mainType: 'dataZoom',\n      subType: 'inside'\n    }, function (dataZoomModel) {\n      var dzReferCoordSysWrap = collectReferCoordSysModelInfo(dataZoomModel);\n      each(dzReferCoordSysWrap.infoList, function (dzCoordSysInfo) {\n        var coordSysUid = dzCoordSysInfo.model.uid;\n        var coordSysRecord = coordSysRecordMap.get(coordSysUid) || coordSysRecordMap.set(coordSysUid, createCoordSysRecord(api, dzCoordSysInfo.model));\n        var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap || (coordSysRecord.dataZoomInfoMap = createHashMap()); // Notice these props might be changed each time for a single dataZoomModel.\n\n        dataZoomInfoMap.set(dataZoomModel.uid, {\n          dzReferCoordSysInfo: dzCoordSysInfo,\n          model: dataZoomModel,\n          getRange: null\n        });\n      });\n    }); // (1) Merge dataZoom settings for each coord sys and set to the roam controller.\n    // (2) Clear coord sys if not refered by any dataZoom.\n\n    coordSysRecordMap.each(function (coordSysRecord) {\n      var controller = coordSysRecord.controller;\n      var firstDzInfo;\n      var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n\n      if (dataZoomInfoMap) {\n        var firstDzKey = dataZoomInfoMap.keys()[0];\n\n        if (firstDzKey != null) {\n          firstDzInfo = dataZoomInfoMap.get(firstDzKey);\n        }\n      }\n\n      if (!firstDzInfo) {\n        disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n        return;\n      }\n\n      var controllerParams = mergeControllerParams(dataZoomInfoMap);\n      controller.enable(controllerParams.controlType, controllerParams.opt);\n      controller.setPointerChecker(coordSysRecord.containsPoint);\n      throttleUtil.createOrUpdate(coordSysRecord, 'dispatchAction', firstDzInfo.model.get('throttle', true), 'fixRate');\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView';\nimport sliderMove from '../helper/sliderMove';\nimport * as roams from './roams';\nimport { bind } from 'zrender/lib/core/util';\n\nvar InsideZoomView =\n/** @class */\nfunction (_super) {\n  __extends(InsideZoomView, _super);\n\n  function InsideZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'dataZoom.inside';\n    return _this;\n  }\n\n  InsideZoomView.prototype.render = function (dataZoomModel, ecModel, api) {\n    _super.prototype.render.apply(this, arguments);\n\n    if (dataZoomModel.noTarget()) {\n      this._clear();\n\n      return;\n    } // Hence the `throttle` util ensures to preserve command order,\n    // here simply updating range all the time will not cause missing\n    // any of the the roam change.\n\n\n    this.range = dataZoomModel.getPercentRange(); // Reset controllers.\n\n    roams.setViewInfoToCoordSysRecord(api, dataZoomModel, {\n      pan: bind(getRangeHandlers.pan, this),\n      zoom: bind(getRangeHandlers.zoom, this),\n      scrollMove: bind(getRangeHandlers.scrollMove, this)\n    });\n  };\n\n  InsideZoomView.prototype.dispose = function () {\n    this._clear();\n\n    _super.prototype.dispose.apply(this, arguments);\n  };\n\n  InsideZoomView.prototype._clear = function () {\n    roams.disposeCoordSysRecordIfNeeded(this.api, this.dataZoomModel);\n    this.range = null;\n  };\n\n  InsideZoomView.type = 'dataZoom.inside';\n  return InsideZoomView;\n}(DataZoomView);\n\nvar getRangeHandlers = {\n  zoom: function (coordSysInfo, coordSysMainType, controller, e) {\n    var lastRange = this.range;\n    var range = lastRange.slice(); // Calculate transform by the first axis.\n\n    var axisModel = coordSysInfo.axisModels[0];\n\n    if (!axisModel) {\n      return;\n    }\n\n    var directionInfo = getDirectionInfo[coordSysMainType](null, [e.originX, e.originY], axisModel, controller, coordSysInfo);\n    var percentPoint = (directionInfo.signal > 0 ? directionInfo.pixelStart + directionInfo.pixelLength - directionInfo.pixel : directionInfo.pixel - directionInfo.pixelStart) / directionInfo.pixelLength * (range[1] - range[0]) + range[0];\n    var scale = Math.max(1 / e.scale, 0);\n    range[0] = (range[0] - percentPoint) * scale + percentPoint;\n    range[1] = (range[1] - percentPoint) * scale + percentPoint; // Restrict range.\n\n    var minMaxSpan = this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    sliderMove(0, range, [0, 100], 0, minMaxSpan.minSpan, minMaxSpan.maxSpan);\n    this.range = range;\n\n    if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n      return range;\n    }\n  },\n  pan: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n    var directionInfo = getDirectionInfo[coordSysMainType]([e.oldX, e.oldY], [e.newX, e.newY], axisModel, controller, coordSysInfo);\n    return directionInfo.signal * (range[1] - range[0]) * directionInfo.pixel / directionInfo.pixelLength;\n  }),\n  scrollMove: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n    var directionInfo = getDirectionInfo[coordSysMainType]([0, 0], [e.scrollDelta, e.scrollDelta], axisModel, controller, coordSysInfo);\n    return directionInfo.signal * (range[1] - range[0]) * e.scrollDelta;\n  })\n};\n\nfunction makeMover(getPercentDelta) {\n  return function (coordSysInfo, coordSysMainType, controller, e) {\n    var lastRange = this.range;\n    var range = lastRange.slice(); // Calculate transform by the first axis.\n\n    var axisModel = coordSysInfo.axisModels[0];\n\n    if (!axisModel) {\n      return;\n    }\n\n    var percentDelta = getPercentDelta(range, axisModel, coordSysInfo, coordSysMainType, controller, e);\n    sliderMove(percentDelta, range, [0, 100], 'all');\n    this.range = range;\n\n    if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n      return range;\n    }\n  };\n}\n\nvar getDirectionInfo = {\n  grid: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var ret = {};\n    var rect = coordSysInfo.model.coordinateSystem.getRect();\n    oldPoint = oldPoint || [0, 0];\n\n    if (axis.dim === 'x') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      ret.pixelLength = rect.width;\n      ret.pixelStart = rect.x;\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // axis.dim === 'y'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      ret.pixelLength = rect.height;\n      ret.pixelStart = rect.y;\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n\n    return ret;\n  },\n  polar: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var ret = {};\n    var polar = coordSysInfo.model.coordinateSystem;\n    var radiusExtent = polar.getRadiusAxis().getExtent();\n    var angleExtent = polar.getAngleAxis().getExtent();\n    oldPoint = oldPoint ? polar.pointToCoord(oldPoint) : [0, 0];\n    newPoint = polar.pointToCoord(newPoint);\n\n    if (axisModel.mainType === 'radiusAxis') {\n      ret.pixel = newPoint[0] - oldPoint[0]; // ret.pixelLength = Math.abs(radiusExtent[1] - radiusExtent[0]);\n      // ret.pixelStart = Math.min(radiusExtent[0], radiusExtent[1]);\n\n      ret.pixelLength = radiusExtent[1] - radiusExtent[0];\n      ret.pixelStart = radiusExtent[0];\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // 'angleAxis'\n      ret.pixel = newPoint[1] - oldPoint[1]; // ret.pixelLength = Math.abs(angleExtent[1] - angleExtent[0]);\n      // ret.pixelStart = Math.min(angleExtent[0], angleExtent[1]);\n\n      ret.pixelLength = angleExtent[1] - angleExtent[0];\n      ret.pixelStart = angleExtent[0];\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n\n    return ret;\n  },\n  singleAxis: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var rect = coordSysInfo.model.coordinateSystem.getRect();\n    var ret = {};\n    oldPoint = oldPoint || [0, 0];\n\n    if (axis.orient === 'horizontal') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      ret.pixelLength = rect.width;\n      ret.pixelStart = rect.x;\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // 'vertical'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      ret.pixelLength = rect.height;\n      ret.pixelStart = rect.y;\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n\n    return ret;\n  }\n};\nexport default InsideZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as numberUtil from '../../util/number';\nimport sliderMove from '../helper/sliderMove';\nimport { unionAxisExtentFromData } from '../../coord/axisHelper';\nimport { ensureScaleRawExtentInfo } from '../../coord/scaleRawExtentInfo';\nimport { getAxisMainType, isCoordSupported } from './helper';\nimport { SINGLE_REFERRING } from '../../util/model';\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\n/**\n * Operate single axis.\n * One axis can only operated by one axis operator.\n * Different dataZoomModels may be defined to operate the same axis.\n * (i.e. 'inside' data zoom and 'slider' data zoom components)\n * So dataZoomModels share one axisProxy in that case.\n */\n\nvar AxisProxy =\n/** @class */\nfunction () {\n  function AxisProxy(dimName, axisIndex, dataZoomModel, ecModel) {\n    this._dimName = dimName;\n    this._axisIndex = axisIndex;\n    this.ecModel = ecModel;\n    this._dataZoomModel = dataZoomModel; // /**\n    //  * @readOnly\n    //  * @private\n    //  */\n    // this.hasSeriesStacked;\n  }\n  /**\n   * Whether the axisProxy is hosted by dataZoomModel.\n   */\n\n\n  AxisProxy.prototype.hostedBy = function (dataZoomModel) {\n    return this._dataZoomModel === dataZoomModel;\n  };\n  /**\n   * @return Value can only be NaN or finite value.\n   */\n\n\n  AxisProxy.prototype.getDataValueWindow = function () {\n    return this._valueWindow.slice();\n  };\n  /**\n   * @return {Array.<number>}\n   */\n\n\n  AxisProxy.prototype.getDataPercentWindow = function () {\n    return this._percentWindow.slice();\n  };\n\n  AxisProxy.prototype.getTargetSeriesModels = function () {\n    var seriesModels = [];\n    this.ecModel.eachSeries(function (seriesModel) {\n      if (isCoordSupported(seriesModel)) {\n        var axisMainType = getAxisMainType(this._dimName);\n        var axisModel = seriesModel.getReferringComponents(axisMainType, SINGLE_REFERRING).models[0];\n\n        if (axisModel && this._axisIndex === axisModel.componentIndex) {\n          seriesModels.push(seriesModel);\n        }\n      }\n    }, this);\n    return seriesModels;\n  };\n\n  AxisProxy.prototype.getAxisModel = function () {\n    return this.ecModel.getComponent(this._dimName + 'Axis', this._axisIndex);\n  };\n\n  AxisProxy.prototype.getMinMaxSpan = function () {\n    return zrUtil.clone(this._minMaxSpan);\n  };\n  /**\n   * Only calculate by given range and this._dataExtent, do not change anything.\n   */\n\n\n  AxisProxy.prototype.calculateDataWindow = function (opt) {\n    var dataExtent = this._dataExtent;\n    var axisModel = this.getAxisModel();\n    var scale = axisModel.axis.scale;\n\n    var rangePropMode = this._dataZoomModel.getRangePropMode();\n\n    var percentExtent = [0, 100];\n    var percentWindow = [];\n    var valueWindow = [];\n    var hasPropModeValue;\n    each(['start', 'end'], function (prop, idx) {\n      var boundPercent = opt[prop];\n      var boundValue = opt[prop + 'Value']; // Notice: dataZoom is based either on `percentProp` ('start', 'end') or\n      // on `valueProp` ('startValue', 'endValue'). (They are based on the data extent\n      // but not min/max of axis, which will be calculated by data window then).\n      // The former one is suitable for cases that a dataZoom component controls multiple\n      // axes with different unit or extent, and the latter one is suitable for accurate\n      // zoom by pixel (e.g., in dataZoomSelect).\n      // we use `getRangePropMode()` to mark which prop is used. `rangePropMode` is updated\n      // only when setOption or dispatchAction, otherwise it remains its original value.\n      // (Why not only record `percentProp` and always map to `valueProp`? Because\n      // the map `valueProp` -> `percentProp` -> `valueProp` probably not the original\n      // `valueProp`. consider two axes constrolled by one dataZoom. They have different\n      // data extent. All of values that are overflow the `dataExtent` will be calculated\n      // to percent '100%').\n\n      if (rangePropMode[idx] === 'percent') {\n        boundPercent == null && (boundPercent = percentExtent[idx]); // Use scale.parse to math round for category or time axis.\n\n        boundValue = scale.parse(numberUtil.linearMap(boundPercent, percentExtent, dataExtent));\n      } else {\n        hasPropModeValue = true;\n        boundValue = boundValue == null ? dataExtent[idx] : scale.parse(boundValue); // Calculating `percent` from `value` may be not accurate, because\n        // This calculation can not be inversed, because all of values that\n        // are overflow the `dataExtent` will be calculated to percent '100%'\n\n        boundPercent = numberUtil.linearMap(boundValue, dataExtent, percentExtent);\n      } // valueWindow[idx] = round(boundValue);\n      // percentWindow[idx] = round(boundPercent);\n\n\n      valueWindow[idx] = boundValue;\n      percentWindow[idx] = boundPercent;\n    });\n    asc(valueWindow);\n    asc(percentWindow); // The windows from user calling of `dispatchAction` might be out of the extent,\n    // or do not obey the `min/maxSpan`, `min/maxValueSpan`. But we dont restrict window\n    // by `zoomLock` here, because we see `zoomLock` just as a interaction constraint,\n    // where API is able to initialize/modify the window size even though `zoomLock`\n    // specified.\n\n    var spans = this._minMaxSpan;\n    hasPropModeValue ? restrictSet(valueWindow, percentWindow, dataExtent, percentExtent, false) : restrictSet(percentWindow, valueWindow, percentExtent, dataExtent, true);\n\n    function restrictSet(fromWindow, toWindow, fromExtent, toExtent, toValue) {\n      var suffix = toValue ? 'Span' : 'ValueSpan';\n      sliderMove(0, fromWindow, fromExtent, 'all', spans['min' + suffix], spans['max' + suffix]);\n\n      for (var i = 0; i < 2; i++) {\n        toWindow[i] = numberUtil.linearMap(fromWindow[i], fromExtent, toExtent, true);\n        toValue && (toWindow[i] = scale.parse(toWindow[i]));\n      }\n    }\n\n    return {\n      valueWindow: valueWindow,\n      percentWindow: percentWindow\n    };\n  };\n  /**\n   * Notice: reset should not be called before series.restoreData() called,\n   * so it is recommanded to be called in \"process stage\" but not \"model init\n   * stage\".\n   */\n\n\n  AxisProxy.prototype.reset = function (dataZoomModel) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n\n    var targetSeries = this.getTargetSeriesModels(); // Culculate data window and data extent, and record them.\n\n    this._dataExtent = calculateDataExtent(this, this._dimName, targetSeries); // this.hasSeriesStacked = false;\n    // each(targetSeries, function (series) {\n    // let data = series.getData();\n    // let dataDim = data.mapDimension(this._dimName);\n    // let stackedDimension = data.getCalculationInfo('stackedDimension');\n    // if (stackedDimension && stackedDimension === dataDim) {\n    // this.hasSeriesStacked = true;\n    // }\n    // }, this);\n    // `calculateDataWindow` uses min/maxSpan.\n\n    this._updateMinMaxSpan();\n\n    var dataWindow = this.calculateDataWindow(dataZoomModel.settledOption);\n    this._valueWindow = dataWindow.valueWindow;\n    this._percentWindow = dataWindow.percentWindow; // Update axis setting then.\n\n    this._setAxisModel();\n  };\n\n  AxisProxy.prototype.filterData = function (dataZoomModel, api) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n\n    var axisDim = this._dimName;\n    var seriesModels = this.getTargetSeriesModels();\n    var filterMode = dataZoomModel.get('filterMode');\n    var valueWindow = this._valueWindow;\n\n    if (filterMode === 'none') {\n      return;\n    } // FIXME\n    // Toolbox may has dataZoom injected. And if there are stacked bar chart\n    // with NaN data, NaN will be filtered and stack will be wrong.\n    // So we need to force the mode to be set empty.\n    // In fect, it is not a big deal that do not support filterMode-'filter'\n    // when using toolbox#dataZoom, utill tooltip#dataZoom support \"single axis\n    // selection\" some day, which might need \"adapt to data extent on the\n    // otherAxis\", which is disabled by filterMode-'empty'.\n    // But currently, stack has been fixed to based on value but not index,\n    // so this is not an issue any more.\n    // let otherAxisModel = this.getOtherAxisModel();\n    // if (dataZoomModel.get('$fromToolbox')\n    //     && otherAxisModel\n    //     && otherAxisModel.hasSeriesStacked\n    // ) {\n    //     filterMode = 'empty';\n    // }\n    // TODO\n    // filterMode 'weakFilter' and 'empty' is not optimized for huge data yet.\n\n\n    each(seriesModels, function (seriesModel) {\n      var seriesData = seriesModel.getData();\n      var dataDims = seriesData.mapDimensionsAll(axisDim);\n\n      if (!dataDims.length) {\n        return;\n      }\n\n      if (filterMode === 'weakFilter') {\n        seriesData.filterSelf(function (dataIndex) {\n          var leftOut;\n          var rightOut;\n          var hasValue;\n\n          for (var i = 0; i < dataDims.length; i++) {\n            var value = seriesData.get(dataDims[i], dataIndex);\n            var thisHasValue = !isNaN(value);\n            var thisLeftOut = value < valueWindow[0];\n            var thisRightOut = value > valueWindow[1];\n\n            if (thisHasValue && !thisLeftOut && !thisRightOut) {\n              return true;\n            }\n\n            thisHasValue && (hasValue = true);\n            thisLeftOut && (leftOut = true);\n            thisRightOut && (rightOut = true);\n          } // If both left out and right out, do not filter.\n\n\n          return hasValue && leftOut && rightOut;\n        });\n      } else {\n        each(dataDims, function (dim) {\n          if (filterMode === 'empty') {\n            seriesModel.setData(seriesData = seriesData.map(dim, function (value) {\n              return !isInWindow(value) ? NaN : value;\n            }));\n          } else {\n            var range = {};\n            range[dim] = valueWindow; // console.time('select');\n\n            seriesData.selectRange(range); // console.timeEnd('select');\n          }\n        });\n      }\n\n      each(dataDims, function (dim) {\n        seriesData.setApproximateExtent(valueWindow, dim);\n      });\n    });\n\n    function isInWindow(value) {\n      return value >= valueWindow[0] && value <= valueWindow[1];\n    }\n  };\n\n  AxisProxy.prototype._updateMinMaxSpan = function () {\n    var minMaxSpan = this._minMaxSpan = {};\n    var dataZoomModel = this._dataZoomModel;\n    var dataExtent = this._dataExtent;\n    each(['min', 'max'], function (minMax) {\n      var percentSpan = dataZoomModel.get(minMax + 'Span');\n      var valueSpan = dataZoomModel.get(minMax + 'ValueSpan');\n      valueSpan != null && (valueSpan = this.getAxisModel().axis.scale.parse(valueSpan)); // minValueSpan and maxValueSpan has higher priority than minSpan and maxSpan\n\n      if (valueSpan != null) {\n        percentSpan = numberUtil.linearMap(dataExtent[0] + valueSpan, dataExtent, [0, 100], true);\n      } else if (percentSpan != null) {\n        valueSpan = numberUtil.linearMap(percentSpan, [0, 100], dataExtent, true) - dataExtent[0];\n      }\n\n      minMaxSpan[minMax + 'Span'] = percentSpan;\n      minMaxSpan[minMax + 'ValueSpan'] = valueSpan;\n    }, this);\n  };\n\n  AxisProxy.prototype._setAxisModel = function () {\n    var axisModel = this.getAxisModel();\n    var percentWindow = this._percentWindow;\n    var valueWindow = this._valueWindow;\n\n    if (!percentWindow) {\n      return;\n    } // [0, 500]: arbitrary value, guess axis extent.\n\n\n    var precision = numberUtil.getPixelPrecision(valueWindow, [0, 500]);\n    precision = Math.min(precision, 20); // For value axis, if min/max/scale are not set, we just use the extent obtained\n    // by series data, which may be a little different from the extent calculated by\n    // `axisHelper.getScaleExtent`. But the different just affects the experience a\n    // little when zooming. So it will not be fixed until some users require it strongly.\n\n    var rawExtentInfo = axisModel.axis.scale.rawExtentInfo;\n\n    if (percentWindow[0] !== 0) {\n      rawExtentInfo.setDeterminedMinMax('min', +valueWindow[0].toFixed(precision));\n    }\n\n    if (percentWindow[1] !== 100) {\n      rawExtentInfo.setDeterminedMinMax('max', +valueWindow[1].toFixed(precision));\n    }\n\n    rawExtentInfo.freeze();\n  };\n\n  return AxisProxy;\n}();\n\nfunction calculateDataExtent(axisProxy, axisDim, seriesModels) {\n  var dataExtent = [Infinity, -Infinity];\n  each(seriesModels, function (seriesModel) {\n    unionAxisExtentFromData(dataExtent, seriesModel.getData(), axisDim);\n  }); // It is important to get \"consistent\" extent when more then one axes is\n  // controlled by a `dataZoom`, otherwise those axes will not be synchronized\n  // when zooming. But it is difficult to know what is \"consistent\", considering\n  // axes have different type or even different meanings (For example, two\n  // time axes are used to compare data of the same date in different years).\n  // So basically dataZoom just obtains extent by series.data (in category axis\n  // extent can be obtained from axis.data).\n  // Nevertheless, user can set min/max/scale on axes to make extent of axes\n  // consistent.\n\n  var axisModel = axisProxy.getAxisModel();\n  var rawExtentResult = ensureScaleRawExtentInfo(axisModel.axis.scale, axisModel, dataExtent).calculate();\n  return [rawExtentResult.min, rawExtentResult.max];\n}\n\nexport default AxisProxy;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, each } from 'zrender/lib/core/util';\nimport { getAxisMainType } from './helper';\nimport AxisProxy from './AxisProxy';\nvar dataZoomProcessor = {\n  // `dataZoomProcessor` will only be performed in needed series. Consider if\n  // there is a line series and a pie series, it is better not to update the\n  // line series if only pie series is needed to be updated.\n  getTargetSeries: function (ecModel) {\n    function eachAxisModel(cb) {\n      ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n        dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n          var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n          cb(axisDim, axisIndex, axisModel, dataZoomModel);\n        });\n      });\n    } // FIXME: it brings side-effect to `getTargetSeries`.\n    // Prepare axis proxies.\n\n\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // dispose all last axis proxy, in case that some axis are deleted.\n      axisModel.__dzAxisProxy = null;\n    });\n    var proxyList = [];\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // Different dataZooms may constrol the same axis. In that case,\n      // an axisProxy serves both of them.\n      if (!axisModel.__dzAxisProxy) {\n        // Use the first dataZoomModel as the main model of axisProxy.\n        axisModel.__dzAxisProxy = new AxisProxy(axisDim, axisIndex, dataZoomModel, ecModel);\n        proxyList.push(axisModel.__dzAxisProxy);\n      }\n    });\n    var seriesModelMap = createHashMap();\n    each(proxyList, function (axisProxy) {\n      each(axisProxy.getTargetSeriesModels(), function (seriesModel) {\n        seriesModelMap.set(seriesModel.uid, seriesModel);\n      });\n    });\n    return seriesModelMap;\n  },\n  // Consider appendData, where filter should be performed. Because data process is\n  // in block mode currently, it is not need to worry about that the overallProgress\n  // execute every frame.\n  overallReset: function (ecModel, api) {\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // We calculate window and reset axis here but not in model\n      // init stage and not after action dispatch handler, because\n      // reset should be called after seriesData.restoreData.\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).reset(dataZoomModel);\n      }); // Caution: data zoom filtering is order sensitive when using\n      // percent range and no min/max/scale set on axis.\n      // For example, we have dataZoom definition:\n      // [\n      //      {xAxisIndex: 0, start: 30, end: 70},\n      //      {yAxisIndex: 0, start: 20, end: 80}\n      // ]\n      // In this case, [20, 80] of y-dataZoom should be based on data\n      // that have filtered by x-dataZoom using range of [30, 70],\n      // but should not be based on full raw data. Thus sliding\n      // x-dataZoom will change both ranges of xAxis and yAxis,\n      // while sliding y-dataZoom will only change the range of yAxis.\n      // So we should filter x-axis after reset x-axis immediately,\n      // and then reset y-axis and filter y-axis.\n\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).filterData(dataZoomModel, api);\n      });\n    });\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // Fullfill all of the range props so that user\n      // is able to get them from chart.getOption().\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        var percentRange = axisProxy.getDataPercentWindow();\n        var valueRange = axisProxy.getDataValueWindow();\n        dataZoomModel.setCalculatedRange({\n          start: percentRange[0],\n          end: percentRange[1],\n          startValue: valueRange[0],\n          endValue: valueRange[1]\n        });\n      }\n    });\n  }\n};\nexport default dataZoomProcessor;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { findEffectedDataZooms } from './helper';\nimport { each } from 'zrender/lib/core/util';\nexport default function installDataZoomAction(registers) {\n  registers.registerAction('dataZoom', function (payload, ecModel) {\n    var effectedModels = findEffectedDataZooms(ecModel, payload);\n    each(effectedModels, function (dataZoomModel) {\n      dataZoomModel.setRawRange({\n        start: payload.start,\n        end: payload.end,\n        startValue: payload.startValue,\n        endValue: payload.endValue\n      });\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport dataZoomProcessor from './dataZoomProcessor';\nimport installDataZoomAction from './dataZoomAction';\nvar installed = false;\nexport default function installCommon(registers) {\n  if (installed) {\n    return;\n  }\n\n  installed = true;\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, dataZoomProcessor);\n  installDataZoomAction(registers);\n  registers.registerSubTypeDefaulter('dataZoom', function () {\n    // Default 'slider' when no type specified.\n    return 'slider';\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport InsideZoomModel from './InsideZoomModel';\nimport InsideZoomView from './InsideZoomView';\nimport { installDataZoomRoamProcessor } from './roams';\nimport installCommon from './installCommon';\nexport function install(registers) {\n  installCommon(registers);\n  registers.registerComponentModel(InsideZoomModel);\n  registers.registerComponentView(InsideZoomView);\n  installDataZoomRoamProcessor(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar SliderZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(SliderZoomModel, _super);\n\n  function SliderZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SliderZoomModel.type;\n    return _this;\n  }\n\n  SliderZoomModel.type = 'dataZoom.slider';\n  SliderZoomModel.layoutMode = 'box';\n  SliderZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n    show: true,\n    // deault value can only be drived in view stage.\n    right: 'ph',\n    top: 'ph',\n    width: 'ph',\n    height: 'ph',\n    left: null,\n    bottom: null,\n    borderColor: '#d2dbee',\n    borderRadius: 3,\n    backgroundColor: 'rgba(47,69,84,0)',\n    // dataBackgroundColor: '#ddd',\n    dataBackground: {\n      lineStyle: {\n        color: '#d2dbee',\n        width: 0.5\n      },\n      areaStyle: {\n        color: '#d2dbee',\n        opacity: 0.2\n      }\n    },\n    selectedDataBackground: {\n      lineStyle: {\n        color: '#8fb0f7',\n        width: 0.5\n      },\n      areaStyle: {\n        color: '#8fb0f7',\n        opacity: 0.2\n      }\n    },\n    // Color of selected window.\n    fillerColor: 'rgba(135,175,274,0.2)',\n    handleIcon: 'path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z',\n    // Percent of the slider height\n    handleSize: '100%',\n    handleStyle: {\n      color: '#fff',\n      borderColor: '#ACB8D1'\n    },\n    moveHandleSize: 7,\n    moveHandleIcon: 'path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z',\n    moveHandleStyle: {\n      color: '#D2DBEE',\n      opacity: 0.7\n    },\n    showDetail: true,\n    showDataShadow: 'auto',\n    realtime: true,\n    zoomLock: false,\n    textStyle: {\n      color: '#6E7079'\n    },\n    brushSelect: true,\n    brushStyle: {\n      color: 'rgba(135,175,274,0.15)'\n    },\n    emphasis: {\n      handleStyle: {\n        borderColor: '#8FB0F7'\n      },\n      moveHandleStyle: {\n        color: '#8FB0F7'\n      }\n    }\n  });\n  return SliderZoomModel;\n}(DataZoomModel);\n\nexport default SliderZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { bind, each, isFunction, isString, indexOf } from 'zrender/lib/core/util';\nimport * as eventTool from 'zrender/lib/core/event';\nimport * as graphic from '../../util/graphic';\nimport * as throttle from '../../util/throttle';\nimport DataZoomView from './DataZoomView';\nimport { linearMap, asc, parsePercent } from '../../util/number';\nimport * as layout from '../../util/layout';\nimport sliderMove from '../helper/sliderMove';\nimport { getAxisMainType, collectReferCoordSysModelInfo } from './helper';\nimport { enableHoverEmphasis } from '../../util/states';\nimport { createSymbol, symbolBuildProxies } from '../../util/symbol';\nimport { deprecateLog } from '../../util/log';\nimport { createTextStyle } from '../../label/labelStyle';\nvar Rect = graphic.Rect; // Constants\n\nvar DEFAULT_LOCATION_EDGE_GAP = 7;\nvar DEFAULT_FRAME_BORDER_WIDTH = 1;\nvar DEFAULT_FILLER_SIZE = 30;\nvar DEFAULT_MOVE_HANDLE_SIZE = 7;\nvar HORIZONTAL = 'horizontal';\nvar VERTICAL = 'vertical';\nvar LABEL_GAP = 5;\nvar SHOW_DATA_SHADOW_SERIES_TYPE = ['line', 'bar', 'candlestick', 'scatter'];\nvar REALTIME_ANIMATION_CONFIG = {\n  easing: 'cubicOut',\n  duration: 100\n};\n\nvar SliderZoomView =\n/** @class */\nfunction (_super) {\n  __extends(SliderZoomView, _super);\n\n  function SliderZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SliderZoomView.type;\n    _this._displayables = {};\n    return _this;\n  }\n\n  SliderZoomView.prototype.init = function (ecModel, api) {\n    this.api = api; // A unique handler for each dataZoom component\n\n    this._onBrush = bind(this._onBrush, this);\n    this._onBrushEnd = bind(this._onBrushEnd, this);\n  };\n\n  SliderZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n    _super.prototype.render.apply(this, arguments);\n\n    throttle.createOrUpdate(this, '_dispatchZoomAction', dataZoomModel.get('throttle'), 'fixRate');\n    this._orient = dataZoomModel.getOrient();\n\n    if (dataZoomModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n\n    if (dataZoomModel.noTarget()) {\n      this._clear();\n\n      this.group.removeAll();\n      return;\n    } // Notice: this._resetInterval() should not be executed when payload.type\n    // is 'dataZoom', origin this._range should be maintained, otherwise 'pan'\n    // or 'zoom' info will be missed because of 'throttle' of this.dispatchAction,\n\n\n    if (!payload || payload.type !== 'dataZoom' || payload.from !== this.uid) {\n      this._buildView();\n    }\n\n    this._updateView();\n  };\n\n  SliderZoomView.prototype.dispose = function () {\n    this._clear();\n\n    _super.prototype.dispose.apply(this, arguments);\n  };\n\n  SliderZoomView.prototype._clear = function () {\n    throttle.clear(this, '_dispatchZoomAction');\n    var zr = this.api.getZr();\n    zr.off('mousemove', this._onBrush);\n    zr.off('mouseup', this._onBrushEnd);\n  };\n\n  SliderZoomView.prototype._buildView = function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    this._brushing = false;\n    this._displayables.brushRect = null;\n\n    this._resetLocation();\n\n    this._resetInterval();\n\n    var barGroup = this._displayables.sliderGroup = new graphic.Group();\n\n    this._renderBackground();\n\n    this._renderHandle();\n\n    this._renderDataShadow();\n\n    thisGroup.add(barGroup);\n\n    this._positionGroup();\n  };\n\n  SliderZoomView.prototype._resetLocation = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api;\n    var showMoveHandle = dataZoomModel.get('brushSelect');\n    var moveHandleSize = showMoveHandle ? DEFAULT_MOVE_HANDLE_SIZE : 0; // If some of x/y/width/height are not specified,\n    // auto-adapt according to target grid.\n\n    var coordRect = this._findCoordRect();\n\n    var ecSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }; // Default align by coordinate system rect.\n\n    var positionInfo = this._orient === HORIZONTAL ? {\n      // Why using 'right', because right should be used in vertical,\n      // and it is better to be consistent for dealing with position param merge.\n      right: ecSize.width - coordRect.x - coordRect.width,\n      top: ecSize.height - DEFAULT_FILLER_SIZE - DEFAULT_LOCATION_EDGE_GAP - moveHandleSize,\n      width: coordRect.width,\n      height: DEFAULT_FILLER_SIZE\n    } : {\n      right: DEFAULT_LOCATION_EDGE_GAP,\n      top: coordRect.y,\n      width: DEFAULT_FILLER_SIZE,\n      height: coordRect.height\n    }; // Do not write back to option and replace value 'ph', because\n    // the 'ph' value should be recalculated when resize.\n\n    var layoutParams = layout.getLayoutParams(dataZoomModel.option); // Replace the placeholder value.\n\n    each(['right', 'top', 'width', 'height'], function (name) {\n      if (layoutParams[name] === 'ph') {\n        layoutParams[name] = positionInfo[name];\n      }\n    });\n    var layoutRect = layout.getLayoutRect(layoutParams, ecSize);\n    this._location = {\n      x: layoutRect.x,\n      y: layoutRect.y\n    };\n    this._size = [layoutRect.width, layoutRect.height];\n    this._orient === VERTICAL && this._size.reverse();\n  };\n\n  SliderZoomView.prototype._positionGroup = function () {\n    var thisGroup = this.group;\n    var location = this._location;\n    var orient = this._orient; // Just use the first axis to determine mapping.\n\n    var targetAxisModel = this.dataZoomModel.getFirstTargetAxisModel();\n    var inverse = targetAxisModel && targetAxisModel.get('inverse');\n    var sliderGroup = this._displayables.sliderGroup;\n    var otherAxisInverse = (this._dataShadowInfo || {}).otherAxisInverse; // Transform barGroup.\n\n    sliderGroup.attr(orient === HORIZONTAL && !inverse ? {\n      scaleY: otherAxisInverse ? 1 : -1,\n      scaleX: 1\n    } : orient === HORIZONTAL && inverse ? {\n      scaleY: otherAxisInverse ? 1 : -1,\n      scaleX: -1\n    } : orient === VERTICAL && !inverse ? {\n      scaleY: otherAxisInverse ? -1 : 1,\n      scaleX: 1,\n      rotation: Math.PI / 2\n    } // Dont use Math.PI, considering shadow direction.\n    : {\n      scaleY: otherAxisInverse ? -1 : 1,\n      scaleX: -1,\n      rotation: Math.PI / 2\n    }); // Position barGroup\n\n    var rect = thisGroup.getBoundingRect([sliderGroup]);\n    thisGroup.x = location.x - rect.x;\n    thisGroup.y = location.y - rect.y;\n    thisGroup.markRedraw();\n  };\n\n  SliderZoomView.prototype._getViewExtent = function () {\n    return [0, this._size[0]];\n  };\n\n  SliderZoomView.prototype._renderBackground = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var size = this._size;\n    var barGroup = this._displayables.sliderGroup;\n    var brushSelect = dataZoomModel.get('brushSelect');\n    barGroup.add(new Rect({\n      silent: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: dataZoomModel.get('backgroundColor')\n      },\n      z2: -40\n    })); // Click panel, over shadow, below handles.\n\n    var clickPanel = new Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: 'transparent'\n      },\n      z2: 0,\n      onclick: bind(this._onClickPanel, this)\n    });\n    var zr = this.api.getZr();\n\n    if (brushSelect) {\n      clickPanel.on('mousedown', this._onBrushStart, this);\n      clickPanel.cursor = 'crosshair';\n      zr.on('mousemove', this._onBrush);\n      zr.on('mouseup', this._onBrushEnd);\n    } else {\n      zr.off('mousemove', this._onBrush);\n      zr.off('mouseup', this._onBrushEnd);\n    }\n\n    barGroup.add(clickPanel);\n  };\n\n  SliderZoomView.prototype._renderDataShadow = function () {\n    var info = this._dataShadowInfo = this._prepareDataShadowInfo();\n\n    this._displayables.dataShadowSegs = [];\n\n    if (!info) {\n      return;\n    }\n\n    var size = this._size;\n    var seriesModel = info.series;\n    var data = seriesModel.getRawData();\n    var otherDim = seriesModel.getShadowDim ? seriesModel.getShadowDim() // @see candlestick\n    : info.otherDim;\n\n    if (otherDim == null) {\n      return;\n    }\n\n    var otherDataExtent = data.getDataExtent(otherDim); // Nice extent.\n\n    var otherOffset = (otherDataExtent[1] - otherDataExtent[0]) * 0.3;\n    otherDataExtent = [otherDataExtent[0] - otherOffset, otherDataExtent[1] + otherOffset];\n    var otherShadowExtent = [0, size[1]];\n    var thisShadowExtent = [0, size[0]];\n    var areaPoints = [[size[0], 0], [0, 0]];\n    var linePoints = [];\n    var step = thisShadowExtent[1] / (data.count() - 1);\n    var thisCoord = 0; // Optimize for large data shadow\n\n    var stride = Math.round(data.count() / size[0]);\n    var lastIsEmpty;\n    data.each([otherDim], function (value, index) {\n      if (stride > 0 && index % stride) {\n        thisCoord += step;\n        return;\n      } // FIXME\n      // Should consider axis.min/axis.max when drawing dataShadow.\n      // FIXME\n      // 应该使用统一的空判断？还是在list里进行空判断？\n\n\n      var isEmpty = value == null || isNaN(value) || value === ''; // See #4235.\n\n      var otherCoord = isEmpty ? 0 : linearMap(value, otherDataExtent, otherShadowExtent, true); // Attempt to draw data shadow precisely when there are empty value.\n\n      if (isEmpty && !lastIsEmpty && index) {\n        areaPoints.push([areaPoints[areaPoints.length - 1][0], 0]);\n        linePoints.push([linePoints[linePoints.length - 1][0], 0]);\n      } else if (!isEmpty && lastIsEmpty) {\n        areaPoints.push([thisCoord, 0]);\n        linePoints.push([thisCoord, 0]);\n      }\n\n      areaPoints.push([thisCoord, otherCoord]);\n      linePoints.push([thisCoord, otherCoord]);\n      thisCoord += step;\n      lastIsEmpty = isEmpty;\n    });\n    var dataZoomModel = this.dataZoomModel;\n\n    function createDataShadowGroup(isSelectedArea) {\n      var model = dataZoomModel.getModel(isSelectedArea ? 'selectedDataBackground' : 'dataBackground');\n      var group = new graphic.Group();\n      var polygon = new graphic.Polygon({\n        shape: {\n          points: areaPoints\n        },\n        segmentIgnoreThreshold: 1,\n        style: model.getModel('areaStyle').getAreaStyle(),\n        silent: true,\n        z2: -20\n      });\n      var polyline = new graphic.Polyline({\n        shape: {\n          points: linePoints\n        },\n        segmentIgnoreThreshold: 1,\n        style: model.getModel('lineStyle').getLineStyle(),\n        silent: true,\n        z2: -19\n      });\n      group.add(polygon);\n      group.add(polyline);\n      return group;\n    } // let dataBackgroundModel = dataZoomModel.getModel('dataBackground');\n\n\n    for (var i = 0; i < 3; i++) {\n      var group = createDataShadowGroup(i === 1);\n\n      this._displayables.sliderGroup.add(group);\n\n      this._displayables.dataShadowSegs.push(group);\n    }\n  };\n\n  SliderZoomView.prototype._prepareDataShadowInfo = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var showDataShadow = dataZoomModel.get('showDataShadow');\n\n    if (showDataShadow === false) {\n      return;\n    } // Find a representative series.\n\n\n    var result;\n    var ecModel = this.ecModel;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var seriesModels = dataZoomModel.getAxisProxy(axisDim, axisIndex).getTargetSeriesModels();\n      each(seriesModels, function (seriesModel) {\n        if (result) {\n          return;\n        }\n\n        if (showDataShadow !== true && indexOf(SHOW_DATA_SHADOW_SERIES_TYPE, seriesModel.get('type')) < 0) {\n          return;\n        }\n\n        var thisAxis = ecModel.getComponent(getAxisMainType(axisDim), axisIndex).axis;\n        var otherDim = getOtherDim(axisDim);\n        var otherAxisInverse;\n        var coordSys = seriesModel.coordinateSystem;\n\n        if (otherDim != null && coordSys.getOtherAxis) {\n          otherAxisInverse = coordSys.getOtherAxis(thisAxis).inverse;\n        }\n\n        otherDim = seriesModel.getData().mapDimension(otherDim);\n        result = {\n          thisAxis: thisAxis,\n          series: seriesModel,\n          thisDim: axisDim,\n          otherDim: otherDim,\n          otherAxisInverse: otherAxisInverse\n        };\n      }, this);\n    }, this);\n    return result;\n  };\n\n  SliderZoomView.prototype._renderHandle = function () {\n    var thisGroup = this.group;\n    var displayables = this._displayables;\n    var handles = displayables.handles = [null, null];\n    var handleLabels = displayables.handleLabels = [null, null];\n    var sliderGroup = this._displayables.sliderGroup;\n    var size = this._size;\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api;\n    var borderRadius = dataZoomModel.get('borderRadius') || 0;\n    var brushSelect = dataZoomModel.get('brushSelect');\n    var filler = displayables.filler = new Rect({\n      silent: brushSelect,\n      style: {\n        fill: dataZoomModel.get('fillerColor')\n      },\n      textConfig: {\n        position: 'inside'\n      }\n    });\n    sliderGroup.add(filler); // Frame border.\n\n    sliderGroup.add(new Rect({\n      silent: true,\n      subPixelOptimize: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1],\n        r: borderRadius\n      },\n      style: {\n        stroke: dataZoomModel.get('dataBackgroundColor') // deprecated option\n        || dataZoomModel.get('borderColor'),\n        lineWidth: DEFAULT_FRAME_BORDER_WIDTH,\n        fill: 'rgba(0,0,0,0)'\n      }\n    })); // Left and right handle to resize\n\n    each([0, 1], function (handleIndex) {\n      var iconStr = dataZoomModel.get('handleIcon');\n\n      if (!symbolBuildProxies[iconStr] && iconStr.indexOf('path://') < 0 && iconStr.indexOf('image://') < 0) {\n        // Compatitable with the old icon parsers. Which can use a path string without path://\n        iconStr = 'path://' + iconStr;\n\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateLog('handleIcon now needs \\'path://\\' prefix when using a path string');\n        }\n      }\n\n      var path = createSymbol(iconStr, -1, 0, 2, 2, null, true);\n      path.attr({\n        cursor: getCursor(this._orient),\n        draggable: true,\n        drift: bind(this._onDragMove, this, handleIndex),\n        ondragend: bind(this._onDragEnd, this),\n        onmouseover: bind(this._showDataInfo, this, true),\n        onmouseout: bind(this._showDataInfo, this, false),\n        z2: 5\n      });\n      var bRect = path.getBoundingRect();\n      var handleSize = dataZoomModel.get('handleSize');\n      this._handleHeight = parsePercent(handleSize, this._size[1]);\n      this._handleWidth = bRect.width / bRect.height * this._handleHeight;\n      path.setStyle(dataZoomModel.getModel('handleStyle').getItemStyle());\n      path.style.strokeNoScale = true;\n      path.rectHover = true;\n      path.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'handleStyle']).getItemStyle();\n      enableHoverEmphasis(path);\n      var handleColor = dataZoomModel.get('handleColor'); // deprecated option\n      // Compatitable with previous version\n\n      if (handleColor != null) {\n        path.style.fill = handleColor;\n      }\n\n      sliderGroup.add(handles[handleIndex] = path);\n      var textStyleModel = dataZoomModel.getModel('textStyle');\n      thisGroup.add(handleLabels[handleIndex] = new graphic.Text({\n        silent: true,\n        invisible: true,\n        style: createTextStyle(textStyleModel, {\n          x: 0,\n          y: 0,\n          text: '',\n          verticalAlign: 'middle',\n          align: 'center',\n          fill: textStyleModel.getTextColor(),\n          font: textStyleModel.getFont()\n        }),\n        z2: 10\n      }));\n    }, this); // Handle to move. Only visible when brushSelect is set true.\n\n    var actualMoveZone = filler;\n\n    if (brushSelect) {\n      var moveHandleHeight = parsePercent(dataZoomModel.get('moveHandleSize'), size[1]);\n      var moveHandle_1 = displayables.moveHandle = new graphic.Rect({\n        style: dataZoomModel.getModel('moveHandleStyle').getItemStyle(),\n        silent: true,\n        shape: {\n          r: [0, 0, 2, 2],\n          y: size[1] - 0.5,\n          height: moveHandleHeight\n        }\n      });\n      var iconSize = moveHandleHeight * 0.8;\n      var moveHandleIcon = displayables.moveHandleIcon = createSymbol(dataZoomModel.get('moveHandleIcon'), -iconSize / 2, -iconSize / 2, iconSize, iconSize, '#fff', true);\n      moveHandleIcon.silent = true;\n      moveHandleIcon.y = size[1] + moveHandleHeight / 2 - 0.5;\n      moveHandle_1.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'moveHandleStyle']).getItemStyle();\n      var moveZoneExpandSize = Math.min(size[1] / 2, Math.max(moveHandleHeight, 10));\n      actualMoveZone = displayables.moveZone = new graphic.Rect({\n        invisible: true,\n        shape: {\n          y: size[1] - moveZoneExpandSize,\n          height: moveHandleHeight + moveZoneExpandSize\n        }\n      });\n      actualMoveZone.on('mouseover', function () {\n        api.enterEmphasis(moveHandle_1);\n      }).on('mouseout', function () {\n        api.leaveEmphasis(moveHandle_1);\n      });\n      sliderGroup.add(moveHandle_1);\n      sliderGroup.add(moveHandleIcon);\n      sliderGroup.add(actualMoveZone);\n    }\n\n    actualMoveZone.attr({\n      draggable: true,\n      cursor: getCursor(this._orient),\n      drift: bind(this._onDragMove, this, 'all'),\n      ondragstart: bind(this._showDataInfo, this, true),\n      ondragend: bind(this._onDragEnd, this),\n      onmouseover: bind(this._showDataInfo, this, true),\n      onmouseout: bind(this._showDataInfo, this, false)\n    });\n  };\n\n  SliderZoomView.prototype._resetInterval = function () {\n    var range = this._range = this.dataZoomModel.getPercentRange();\n\n    var viewExtent = this._getViewExtent();\n\n    this._handleEnds = [linearMap(range[0], [0, 100], viewExtent, true), linearMap(range[1], [0, 100], viewExtent, true)];\n  };\n\n  SliderZoomView.prototype._updateInterval = function (handleIndex, delta) {\n    var dataZoomModel = this.dataZoomModel;\n    var handleEnds = this._handleEnds;\n\n    var viewExtend = this._getViewExtent();\n\n    var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    var percentExtent = [0, 100];\n    sliderMove(delta, handleEnds, viewExtend, dataZoomModel.get('zoomLock') ? 'all' : handleIndex, minMaxSpan.minSpan != null ? linearMap(minMaxSpan.minSpan, percentExtent, viewExtend, true) : null, minMaxSpan.maxSpan != null ? linearMap(minMaxSpan.maxSpan, percentExtent, viewExtend, true) : null);\n    var lastRange = this._range;\n    var range = this._range = asc([linearMap(handleEnds[0], viewExtend, percentExtent, true), linearMap(handleEnds[1], viewExtend, percentExtent, true)]);\n    return !lastRange || lastRange[0] !== range[0] || lastRange[1] !== range[1];\n  };\n\n  SliderZoomView.prototype._updateView = function (nonRealtime) {\n    var displaybles = this._displayables;\n    var handleEnds = this._handleEnds;\n    var handleInterval = asc(handleEnds.slice());\n    var size = this._size;\n    each([0, 1], function (handleIndex) {\n      // Handles\n      var handle = displaybles.handles[handleIndex];\n      var handleHeight = this._handleHeight;\n      handle.attr({\n        scaleX: handleHeight / 2,\n        scaleY: handleHeight / 2,\n        // This is a trick, by adding an extra tiny offset to let the default handle's end point align to the drag window.\n        // NOTE: It may affect some custom shapes a bit. But we prefer to have better result by default.\n        x: handleEnds[handleIndex] + (handleIndex ? -1 : 1),\n        y: size[1] / 2 - handleHeight / 2\n      });\n    }, this); // Filler\n\n    displaybles.filler.setShape({\n      x: handleInterval[0],\n      y: 0,\n      width: handleInterval[1] - handleInterval[0],\n      height: size[1]\n    });\n    var viewExtent = {\n      x: handleInterval[0],\n      width: handleInterval[1] - handleInterval[0]\n    }; // Move handle\n\n    if (displaybles.moveHandle) {\n      displaybles.moveHandle.setShape(viewExtent);\n      displaybles.moveZone.setShape(viewExtent); // Force update path on the invisible object\n\n      displaybles.moveZone.getBoundingRect();\n      displaybles.moveHandleIcon && displaybles.moveHandleIcon.attr('x', viewExtent.x + viewExtent.width / 2);\n    } // update clip path of shadow.\n\n\n    var dataShadowSegs = displaybles.dataShadowSegs;\n    var segIntervals = [0, handleInterval[0], handleInterval[1], size[0]];\n\n    for (var i = 0; i < dataShadowSegs.length; i++) {\n      var segGroup = dataShadowSegs[i];\n      var clipPath = segGroup.getClipPath();\n\n      if (!clipPath) {\n        clipPath = new graphic.Rect();\n        segGroup.setClipPath(clipPath);\n      }\n\n      clipPath.setShape({\n        x: segIntervals[i],\n        y: 0,\n        width: segIntervals[i + 1] - segIntervals[i],\n        height: size[1]\n      });\n    }\n\n    this._updateDataInfo(nonRealtime);\n  };\n\n  SliderZoomView.prototype._updateDataInfo = function (nonRealtime) {\n    var dataZoomModel = this.dataZoomModel;\n    var displaybles = this._displayables;\n    var handleLabels = displaybles.handleLabels;\n    var orient = this._orient;\n    var labelTexts = ['', '']; // FIXME\n    // date型，支持formatter，autoformatter（ec2 date.getAutoFormatter）\n\n    if (dataZoomModel.get('showDetail')) {\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        var axis = axisProxy.getAxisModel().axis;\n        var range = this._range;\n        var dataInterval = nonRealtime // See #4434, data and axis are not processed and reset yet in non-realtime mode.\n        ? axisProxy.calculateDataWindow({\n          start: range[0],\n          end: range[1]\n        }).valueWindow : axisProxy.getDataValueWindow();\n        labelTexts = [this._formatLabel(dataInterval[0], axis), this._formatLabel(dataInterval[1], axis)];\n      }\n    }\n\n    var orderedHandleEnds = asc(this._handleEnds.slice());\n    setLabel.call(this, 0);\n    setLabel.call(this, 1);\n\n    function setLabel(handleIndex) {\n      // Label\n      // Text should not transform by barGroup.\n      // Ignore handlers transform\n      var barTransform = graphic.getTransform(displaybles.handles[handleIndex].parent, this.group);\n      var direction = graphic.transformDirection(handleIndex === 0 ? 'right' : 'left', barTransform);\n      var offset = this._handleWidth / 2 + LABEL_GAP;\n      var textPoint = graphic.applyTransform([orderedHandleEnds[handleIndex] + (handleIndex === 0 ? -offset : offset), this._size[1] / 2], barTransform);\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        verticalAlign: orient === HORIZONTAL ? 'middle' : direction,\n        align: orient === HORIZONTAL ? direction : 'center',\n        text: labelTexts[handleIndex]\n      });\n    }\n  };\n\n  SliderZoomView.prototype._formatLabel = function (value, axis) {\n    var dataZoomModel = this.dataZoomModel;\n    var labelFormatter = dataZoomModel.get('labelFormatter');\n    var labelPrecision = dataZoomModel.get('labelPrecision');\n\n    if (labelPrecision == null || labelPrecision === 'auto') {\n      labelPrecision = axis.getPixelPrecision();\n    }\n\n    var valueStr = value == null || isNaN(value) ? '' // FIXME Glue code\n    : axis.type === 'category' || axis.type === 'time' ? axis.scale.getLabel({\n      value: Math.round(value)\n    }) // param of toFixed should less then 20.\n    : value.toFixed(Math.min(labelPrecision, 20));\n    return isFunction(labelFormatter) ? labelFormatter(value, valueStr) : isString(labelFormatter) ? labelFormatter.replace('{value}', valueStr) : valueStr;\n  };\n  /**\n   * @param showOrHide true: show, false: hide\n   */\n\n\n  SliderZoomView.prototype._showDataInfo = function (showOrHide) {\n    // Always show when drgging.\n    showOrHide = this._dragging || showOrHide;\n    var displayables = this._displayables;\n    var handleLabels = displayables.handleLabels;\n    handleLabels[0].attr('invisible', !showOrHide);\n    handleLabels[1].attr('invisible', !showOrHide); // Highlight move handle\n\n    displayables.moveHandle && this.api[showOrHide ? 'enterEmphasis' : 'leaveEmphasis'](displayables.moveHandle, 1);\n  };\n\n  SliderZoomView.prototype._onDragMove = function (handleIndex, dx, dy, event) {\n    this._dragging = true; // For mobile device, prevent screen slider on the button.\n\n    eventTool.stop(event.event); // Transform dx, dy to bar coordination.\n\n    var barTransform = this._displayables.sliderGroup.getLocalTransform();\n\n    var vertex = graphic.applyTransform([dx, dy], barTransform, true);\n\n    var changed = this._updateInterval(handleIndex, vertex[0]);\n\n    var realtime = this.dataZoomModel.get('realtime');\n\n    this._updateView(!realtime); // Avoid dispatch dataZoom repeatly but range not changed,\n    // which cause bad visual effect when progressive enabled.\n\n\n    changed && realtime && this._dispatchZoomAction(true);\n  };\n\n  SliderZoomView.prototype._onDragEnd = function () {\n    this._dragging = false;\n\n    this._showDataInfo(false); // While in realtime mode and stream mode, dispatch action when\n    // drag end will cause the whole view rerender, which is unnecessary.\n\n\n    var realtime = this.dataZoomModel.get('realtime');\n    !realtime && this._dispatchZoomAction(false);\n  };\n\n  SliderZoomView.prototype._onClickPanel = function (e) {\n    var size = this._size;\n\n    var localPoint = this._displayables.sliderGroup.transformCoordToLocal(e.offsetX, e.offsetY);\n\n    if (localPoint[0] < 0 || localPoint[0] > size[0] || localPoint[1] < 0 || localPoint[1] > size[1]) {\n      return;\n    }\n\n    var handleEnds = this._handleEnds;\n    var center = (handleEnds[0] + handleEnds[1]) / 2;\n\n    var changed = this._updateInterval('all', localPoint[0] - center);\n\n    this._updateView();\n\n    changed && this._dispatchZoomAction(false);\n  };\n\n  SliderZoomView.prototype._onBrushStart = function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    this._brushStart = new graphic.Point(x, y);\n    this._brushing = true;\n    this._brushStartTime = +new Date(); // this._updateBrushRect(x, y);\n  };\n\n  SliderZoomView.prototype._onBrushEnd = function (e) {\n    if (!this._brushing) {\n      return;\n    }\n\n    var brushRect = this._displayables.brushRect;\n    this._brushing = false;\n\n    if (!brushRect) {\n      return;\n    }\n\n    brushRect.attr('ignore', true);\n    var brushShape = brushRect.shape;\n    var brushEndTime = +new Date(); // console.log(brushEndTime - this._brushStartTime);\n\n    if (brushEndTime - this._brushStartTime < 200 && Math.abs(brushShape.width) < 5) {\n      // Will treat it as a click\n      return;\n    }\n\n    var viewExtend = this._getViewExtent();\n\n    var percentExtent = [0, 100];\n    this._range = asc([linearMap(brushShape.x, viewExtend, percentExtent, true), linearMap(brushShape.x + brushShape.width, viewExtend, percentExtent, true)]);\n    this._handleEnds = [brushShape.x, brushShape.x + brushShape.width];\n\n    this._updateView();\n\n    this._dispatchZoomAction(false);\n  };\n\n  SliderZoomView.prototype._onBrush = function (e) {\n    if (this._brushing) {\n      // For mobile device, prevent screen slider on the button.\n      eventTool.stop(e.event);\n\n      this._updateBrushRect(e.offsetX, e.offsetY);\n    }\n  };\n\n  SliderZoomView.prototype._updateBrushRect = function (mouseX, mouseY) {\n    var displayables = this._displayables;\n    var dataZoomModel = this.dataZoomModel;\n    var brushRect = displayables.brushRect;\n\n    if (!brushRect) {\n      brushRect = displayables.brushRect = new Rect({\n        silent: true,\n        style: dataZoomModel.getModel('brushStyle').getItemStyle()\n      });\n      displayables.sliderGroup.add(brushRect);\n    }\n\n    brushRect.attr('ignore', false);\n    var brushStart = this._brushStart;\n    var sliderGroup = this._displayables.sliderGroup;\n    var endPoint = sliderGroup.transformCoordToLocal(mouseX, mouseY);\n    var startPoint = sliderGroup.transformCoordToLocal(brushStart.x, brushStart.y);\n    var size = this._size;\n    endPoint[0] = Math.max(Math.min(size[0], endPoint[0]), 0);\n    brushRect.setShape({\n      x: startPoint[0],\n      y: 0,\n      width: endPoint[0] - startPoint[0],\n      height: size[1]\n    });\n  };\n  /**\n   * This action will be throttled.\n   */\n\n\n  SliderZoomView.prototype._dispatchZoomAction = function (realtime) {\n    var range = this._range;\n    this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      dataZoomId: this.dataZoomModel.id,\n      animation: realtime ? REALTIME_ANIMATION_CONFIG : null,\n      start: range[0],\n      end: range[1]\n    });\n  };\n\n  SliderZoomView.prototype._findCoordRect = function () {\n    // Find the grid coresponding to the first axis referred by dataZoom.\n    var rect;\n    var coordSysInfoList = collectReferCoordSysModelInfo(this.dataZoomModel).infoList;\n\n    if (!rect && coordSysInfoList.length) {\n      var coordSys = coordSysInfoList[0].model.coordinateSystem;\n      rect = coordSys.getRect && coordSys.getRect();\n    }\n\n    if (!rect) {\n      var width = this.api.getWidth();\n      var height = this.api.getHeight();\n      rect = {\n        x: width * 0.2,\n        y: height * 0.2,\n        width: width * 0.6,\n        height: height * 0.6\n      };\n    }\n\n    return rect;\n  };\n\n  SliderZoomView.type = 'dataZoom.slider';\n  return SliderZoomView;\n}(DataZoomView);\n\nfunction getOtherDim(thisDim) {\n  // FIXME\n  // 这个逻辑和getOtherAxis里一致，但是写在这里是否不好\n  var map = {\n    x: 'y',\n    y: 'x',\n    radius: 'angle',\n    angle: 'radius'\n  };\n  return map[thisDim];\n}\n\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\n\nexport default SliderZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SliderZoomModel from './SliderZoomModel';\nimport SliderZoomView from './SliderZoomView';\nimport installCommon from './installCommon';\nexport function install(registers) {\n  registers.registerComponentModel(SliderZoomModel);\n  registers.registerComponentView(SliderZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport { install as installDataZoomInside } from './installDataZoomInside';\nimport { install as installDataZoomSlider } from './installDataZoomSlider';\nexport function install(registers) {\n  use(installDataZoomInside);\n  use(installDataZoomSlider); // Do not install './dataZoomSelect',\n  // since it only work for toolbox dataZoom.\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { install as installSimple } from './installSimple';\nimport { install as installAxisPointer } from '../axisPointer/install';\nimport { use } from '../../extension';\nexport function install(registers) {\n  use(installSimple);\n  use(installAxisPointer);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel';\n\nvar SelectDataZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(SelectDataZoomModel, _super);\n\n  function SelectDataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SelectDataZoomModel.type;\n    return _this;\n  }\n\n  SelectDataZoomModel.type = 'dataZoom.select';\n  return SelectDataZoomModel;\n}(DataZoomModel);\n\nexport default SelectDataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView';\n\nvar SelectDataZoomView =\n/** @class */\nfunction (_super) {\n  __extends(SelectDataZoomView, _super);\n\n  function SelectDataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SelectDataZoomView.type;\n    return _this;\n  }\n\n  SelectDataZoomView.type = 'dataZoom.select';\n  return SelectDataZoomView;\n}(DataZoomView);\n\nexport default SelectDataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SelectZoomModel from './SelectZoomModel';\nimport SelectZoomView from './SelectZoomView';\nimport installCommon from './installCommon';\nexport function install(registers) {\n  registers.registerComponentModel(SelectZoomModel);\n  registers.registerComponentView(SelectZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nvar ToolboxFeature =\n/** @class */\nfunction () {\n  function ToolboxFeature() {}\n\n  return ToolboxFeature;\n}();\n\nexport { ToolboxFeature };\nvar features = {};\nexport function registerFeature(name, ctor) {\n  features[name] = ctor;\n}\nexport function getFeature(name) {\n  return features[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as featureManager from './featureManager';\nimport ComponentModel from '../../model/Component';\n\nvar ToolboxModel =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxModel, _super);\n\n  function ToolboxModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ToolboxModel.type;\n    return _this;\n  }\n\n  ToolboxModel.prototype.optionUpdated = function () {\n    _super.prototype.optionUpdated.apply(this, arguments);\n\n    var ecModel = this.ecModel;\n    zrUtil.each(this.option.feature, function (featureOpt, featureName) {\n      var Feature = featureManager.getFeature(featureName);\n\n      if (Feature) {\n        if (Feature.getDefaultOption) {\n          Feature.defaultOption = Feature.getDefaultOption(ecModel);\n        }\n\n        zrUtil.merge(featureOpt, Feature.defaultOption);\n      }\n    });\n  };\n\n  ToolboxModel.type = 'toolbox';\n  ToolboxModel.layoutMode = {\n    type: 'box',\n    ignoreSize: true\n  };\n  ToolboxModel.defaultOption = {\n    show: true,\n    z: 6,\n    zlevel: 0,\n    orient: 'horizontal',\n    left: 'right',\n    top: 'top',\n    // right\n    // bottom\n    backgroundColor: 'transparent',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemSize: 15,\n    itemGap: 8,\n    showTitle: true,\n    iconStyle: {\n      borderColor: '#666',\n      color: 'none'\n    },\n    emphasis: {\n      iconStyle: {\n        borderColor: '#3E98C5'\n      }\n    },\n    // textStyle: {},\n    // feature\n    tooltip: {\n      show: false,\n      position: 'bottom'\n    }\n  };\n  return ToolboxModel;\n}(ComponentModel);\n\nexport default ToolboxModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as textContain from 'zrender/lib/contain/text';\nimport * as graphic from '../../util/graphic';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states';\nimport Model from '../../model/Model';\nimport DataDiffer from '../../data/DataDiffer';\nimport * as listComponentHelper from '../helper/listComponent';\nimport ComponentView from '../../view/Component';\nimport { ToolboxFeature, getFeature } from './featureManager';\nimport { getUID } from '../../util/component';\nimport ZRText from 'zrender/lib/graphic/Text';\n\nvar ToolboxView =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxView, _super);\n\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n\n    var itemSize = +toolboxModel.get('itemSize');\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute(); // Keep for diff.\n\n    this._featureNames = featureNames;\n\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature; // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n\n          if (!Feature) {\n            return;\n          }\n\n          feature = new Feature();\n        }\n\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName]; // If feature does not exsit.\n\n        if (!feature) {\n          return;\n        }\n      }\n\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n      var isToolboxFeature = feature instanceof ToolboxFeature;\n\n      if (!featureName && oldName) {\n        isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n\n      if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n        isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n\n      createIconPaths(featureModel, feature, featureName);\n\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']); // If one feature has mutiple icon. they are orginaized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n\n      if (typeof icons === 'string') {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n\n      if (typeof titles === 'string') {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle(); // Text position calculation\n\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        graphic.setTooltipConfig({\n          el: path,\n          componentModel: toolboxModel,\n          itemName: iconName,\n          formatterParamsExtra: {\n            title: titlesMap[iconName]\n          }\n        }); // graphic.enableHoverEmphasis(path);\n\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = toolboxModel.get('orient') === 'vertical' ? toolboxModel.get('right') == null ? 'right' : 'left' : toolboxModel.get('bottom') == null ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle'); // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n\n          enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            leaveEmphasis(this);\n          }\n\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n\n    listComponentHelper.layout(group, toolboxModel, api); // Render background after group is layout\n    // FIXME\n\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel)); // Adjust icon title positions to avoid them out of screen\n\n    group.eachChild(function (icon) {\n      var titleText = icon.__title; // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.states.emphasis; // May be background element\n\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 8;\n\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  }; // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n\n\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\n\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\n\nexport default ToolboxView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Uint8Array */\n\nimport env from 'zrender/lib/core/env';\nimport { ToolboxFeature } from '../featureManager';\n/* global window, document */\n\nvar SaveAsImage =\n/** @class */\nfunction (_super) {\n  __extends(SaveAsImage, _super);\n\n  function SaveAsImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SaveAsImage.prototype.onclick = function (ecModel, api) {\n    var model = this.model;\n    var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n    var isSvg = api.getZr().painter.getType() === 'svg';\n    var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n    var url = api.getConnectedDataURL({\n      type: type,\n      backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n      connectedBackgroundColor: model.get('connectedBackgroundColor'),\n      excludeComponents: model.get('excludeComponents'),\n      pixelRatio: model.get('pixelRatio')\n    }); // Chrome, Firefox, New Edge\n\n    if (typeof MouseEvent === 'function' && (env.browser.newEdge || !env.browser.ie && !env.browser.edge)) {\n      var $a = document.createElement('a');\n      $a.download = title + '.' + type;\n      $a.target = '_blank';\n      $a.href = url;\n      var evt = new MouseEvent('click', {\n        // some micro front-end framework， window maybe is a Proxy\n        view: document.defaultView,\n        bubbles: true,\n        cancelable: false\n      });\n      $a.dispatchEvent(evt);\n    } // IE or old Edge\n    else {\n        if (window.navigator.msSaveOrOpenBlob || isSvg) {\n          var parts = url.split(','); // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\n          var base64Encoded = parts[0].indexOf('base64') > -1;\n          var bstr = isSvg // should decode the svg data uri first\n          ? decodeURIComponent(parts[1]) : parts[1]; // only `atob` when the data uri is encoded with base64\n          // otherwise, like `svg` data uri exported by zrender,\n          // there will be an error, for it's not encoded with base64.\n          // (just a url-encoded string through `encodeURIComponent`)\n\n          base64Encoded && (bstr = window.atob(bstr));\n          var filename = title + '.' + type;\n\n          if (window.navigator.msSaveOrOpenBlob) {\n            var n = bstr.length;\n            var u8arr = new Uint8Array(n);\n\n            while (n--) {\n              u8arr[n] = bstr.charCodeAt(n);\n            }\n\n            var blob = new Blob([u8arr]);\n            window.navigator.msSaveOrOpenBlob(blob, filename);\n          } else {\n            var frame = document.createElement('iframe');\n            document.body.appendChild(frame);\n            var cw = frame.contentWindow;\n            var doc = cw.document;\n            doc.open('image/svg+xml', 'replace');\n            doc.write(bstr);\n            doc.close();\n            cw.focus();\n            doc.execCommand('SaveAs', true, filename);\n            document.body.removeChild(frame);\n          }\n        } else {\n          var lang = model.get('lang');\n          var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n          var tab = window.open();\n          tab.document.write(html);\n          tab.document.title = title;\n        }\n      }\n  };\n\n  SaveAsImage.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n      title: ecModel.getLocale(['toolbox', 'saveAsImage', 'title']),\n      type: 'png',\n      // Default use option.backgroundColor\n      // backgroundColor: '#fff',\n      connectedBackgroundColor: '#fff',\n      name: '',\n      excludeComponents: ['toolbox'],\n      // use current pixel ratio of device by default\n      // pixelRatio: 1,\n      lang: ecModel.getLocale(['toolbox', 'saveAsImage', 'lang'])\n    };\n    return defaultOption;\n  };\n\n  return SaveAsImage;\n}(ToolboxFeature);\n\nSaveAsImage.prototype.unusable = !env.canvasSupported;\nexport default SaveAsImage;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { ToolboxFeature } from '../featureManager';\nimport { SINGLE_REFERRING } from '../../../util/model';\nvar INNER_STACK_KEYWORD = '__ec_magicType_stack__';\nvar ICON_TYPES = ['line', 'bar', 'stack']; // stack and tiled appears in pair for the title\n\nvar TITLE_TYPES = ['line', 'bar', 'stack', 'tiled'];\nvar radioTypes = [['line', 'bar'], ['stack']];\n\nvar MagicType =\n/** @class */\nfunction (_super) {\n  __extends(MagicType, _super);\n\n  function MagicType() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  MagicType.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon');\n    var icons = {};\n    zrUtil.each(model.get('type'), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n\n  MagicType.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: [],\n      // Icon group\n      icon: {\n        line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n        bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n        // eslint-disable-next-line\n        stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n\n      },\n      // `line`, `bar`, `stack`, `tiled`\n      title: ecModel.getLocale(['toolbox', 'magicType', 'title']),\n      option: {},\n      seriesIndex: {}\n    };\n    return defaultOption;\n  };\n\n  MagicType.prototype.onclick = function (ecModel, api, type) {\n    var model = this.model;\n    var seriesIndex = model.get(['seriesIndex', type]); // Not supported magicType\n\n    if (!seriesOptGenreator[type]) {\n      return;\n    }\n\n    var newOption = {\n      series: []\n    };\n\n    var generateNewSeriesTypes = function (seriesModel) {\n      var seriesType = seriesModel.subType;\n      var seriesId = seriesModel.id;\n      var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n\n      if (newSeriesOpt) {\n        // PENDING If merge original option?\n        zrUtil.defaults(newSeriesOpt, seriesModel.option);\n        newOption.series.push(newSeriesOpt);\n      } // Modify boundaryGap\n\n\n      var coordSys = seriesModel.coordinateSystem;\n\n      if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n        var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n        if (categoryAxis) {\n          var axisDim = categoryAxis.dim;\n          var axisType = axisDim + 'Axis';\n          var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n          var axisIndex = axisModel.componentIndex;\n          newOption[axisType] = newOption[axisType] || [];\n\n          for (var i = 0; i <= axisIndex; i++) {\n            newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n          }\n\n          newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n        }\n      }\n    };\n\n    zrUtil.each(radioTypes, function (radio) {\n      if (zrUtil.indexOf(radio, type) >= 0) {\n        zrUtil.each(radio, function (item) {\n          model.setIconStatus(item, 'normal');\n        });\n      }\n    });\n    model.setIconStatus(type, 'emphasis');\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: seriesIndex == null ? null : {\n        seriesIndex: seriesIndex\n      }\n    }, generateNewSeriesTypes);\n    var newTitle;\n    var currentType = type; // Change title of stack\n\n    if (type === 'stack') {\n      // use titles in model instead of ecModel\n      // as stack and tiled appears in pair, just flip them\n      // no need of checking stack state\n      newTitle = zrUtil.merge({\n        stack: model.option.title.tiled,\n        tiled: model.option.title.stack\n      }, model.option.title);\n\n      if (model.get(['iconStatus', type]) !== 'emphasis') {\n        currentType = 'tiled';\n      }\n    }\n\n    api.dispatchAction({\n      type: 'changeMagicType',\n      currentType: currentType,\n      newOption: newOption,\n      newTitle: newTitle,\n      featureName: 'magicType'\n    });\n  };\n\n  return MagicType;\n}(ToolboxFeature);\n\nvar seriesOptGenreator = {\n  'line': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'line',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'line']) || {}, true);\n    }\n  },\n  'bar': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'bar',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'bar']) || {}, true);\n    }\n  },\n  'stack': function (seriesType, seriesId, seriesModel, model) {\n    var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n\n    if (seriesType === 'line' || seriesType === 'bar') {\n      model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n      return zrUtil.merge({\n        id: seriesId,\n        stack: isStack ? '' : INNER_STACK_KEYWORD\n      }, model.get(['option', 'stack']) || {}, true);\n    }\n  }\n}; // TODO: SELF REGISTERED.\n\necharts.registerAction({\n  type: 'changeMagicType',\n  event: 'magicTypeChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.mergeOption(payload.newOption);\n});\nexport default MagicType;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { ToolboxFeature } from '../featureManager';\nimport { addEventListener } from 'zrender/lib/core/event';\n/* global document */\n\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\n * Group series into two types\n *  1. on category axis, like line, bar\n *  2. others, like scatter, pie\n */\n\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n      var baseAxis = coordSys.getBaseAxis();\n\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\n * Assemble content of series on cateogory axis\n * @inner\n */\n\n\nfunction assembleSeriesWithCategoryAxis(groups) {\n  var tables = [];\n  zrUtil.each(groups, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    })); // @ts-ignore TODO Polar\n\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      var rawData = series.getRawData();\n      columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n        return val;\n      }));\n    }); // Assemble table content\n\n    var lines = [headers.join(ITEM_SPLITER)];\n\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n\n      lines.push(items.join(ITEM_SPLITER));\n    }\n\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * Assemble content of other series\n */\n\n\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return !!str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\n\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\n * If a block is tsv format\n */\n\n\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\n\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\n * @param {string} tsv\n * @return {Object}\n */\n\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n\n  return {\n    series: series,\n    categories: categories\n  };\n}\n\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n\n  for (var i = 0; i < lines.length; i++) {\n    // if line is empty, ignore it.\n    // there is a case that a user forgot to delete `\\n`.\n    var line = trim(lines[i]);\n\n    if (!line) {\n      continue;\n    }\n\n    var items = line.split(itemSplitRegex);\n    var name_1 = '';\n    var value = void 0;\n    var hasName = false;\n\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name_1 = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name_1,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n\n  return {\n    name: seriesName,\n    data: data\n  };\n}\n\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\n\nvar DataView =\n/** @class */\nfunction (_super) {\n  __extends(DataView, _super);\n\n  function DataView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataView.prototype.onclick = function (ecModel, api) {\n    var container = api.getDom();\n    var model = this.model;\n\n    if (this._dom) {\n      container.removeChild(this._dom);\n    }\n\n    var root = document.createElement('div');\n    root.style.cssText = 'position:absolute;left:5px;top:5px;bottom:5px;right:5px;';\n    root.style.backgroundColor = model.get('backgroundColor') || '#fff'; // Create elements\n\n    var header = document.createElement('h4');\n    var lang = model.get('lang') || [];\n    header.innerHTML = lang[0] || model.get('title');\n    header.style.cssText = 'margin: 10px 20px;';\n    header.style.color = model.get('textColor');\n    var viewMain = document.createElement('div');\n    var textarea = document.createElement('textarea');\n    viewMain.style.cssText = 'display:block;width:100%;overflow:auto;';\n    var optionToContent = model.get('optionToContent');\n    var contentToOption = model.get('contentToOption');\n    var result = getContentFromModel(ecModel);\n\n    if (typeof optionToContent === 'function') {\n      var htmlOrDom = optionToContent(api.getOption());\n\n      if (typeof htmlOrDom === 'string') {\n        viewMain.innerHTML = htmlOrDom;\n      } else if (zrUtil.isDom(htmlOrDom)) {\n        viewMain.appendChild(htmlOrDom);\n      }\n    } else {\n      // Use default textarea\n      viewMain.appendChild(textarea);\n      textarea.readOnly = model.get('readOnly');\n      textarea.style.cssText = 'width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;';\n      textarea.style.color = model.get('textColor');\n      textarea.style.borderColor = model.get('textareaBorderColor');\n      textarea.style.backgroundColor = model.get('textareaColor');\n      textarea.value = result.value;\n    }\n\n    var blockMetaList = result.meta;\n    var buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'position:absolute;bottom:0;left:0;right:0;';\n    var buttonStyle = 'float:right;margin-right:20px;border:none;' + 'cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n    var closeButton = document.createElement('div');\n    var refreshButton = document.createElement('div');\n    buttonStyle += ';background-color:' + model.get('buttonColor');\n    buttonStyle += ';color:' + model.get('buttonTextColor');\n    var self = this;\n\n    function close() {\n      container.removeChild(root);\n      self._dom = null;\n    }\n\n    addEventListener(closeButton, 'click', close);\n    addEventListener(refreshButton, 'click', function () {\n      if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line\n          console.warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n        }\n\n        close();\n        return;\n      }\n\n      var newOption;\n\n      try {\n        if (typeof contentToOption === 'function') {\n          newOption = contentToOption(viewMain, api.getOption());\n        } else {\n          newOption = parseContents(textarea.value, blockMetaList);\n        }\n      } catch (e) {\n        close();\n        throw new Error('Data view format error ' + e);\n      }\n\n      if (newOption) {\n        api.dispatchAction({\n          type: 'changeDataView',\n          newOption: newOption\n        });\n      }\n\n      close();\n    });\n    closeButton.innerHTML = lang[1];\n    refreshButton.innerHTML = lang[2];\n    refreshButton.style.cssText = buttonStyle;\n    closeButton.style.cssText = buttonStyle;\n    !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n    buttonContainer.appendChild(closeButton);\n    root.appendChild(header);\n    root.appendChild(viewMain);\n    root.appendChild(buttonContainer);\n    viewMain.style.height = container.clientHeight - 80 + 'px';\n    container.appendChild(root);\n    this._dom = root;\n  };\n\n  DataView.prototype.remove = function (ecModel, api) {\n    this._dom && api.getDom().removeChild(this._dom);\n  };\n\n  DataView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n\n  DataView.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      readOnly: false,\n      optionToContent: null,\n      contentToOption: null,\n      // eslint-disable-next-line\n      icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n      title: ecModel.getLocale(['toolbox', 'dataView', 'title']),\n      lang: ecModel.getLocale(['toolbox', 'dataView', 'lang']),\n      backgroundColor: '#fff',\n      textColor: '#000',\n      textareaColor: '#fff',\n      textareaBorderColor: '#333',\n      buttonColor: '#c23531',\n      buttonTextColor: '#fff'\n    };\n    return defaultOption;\n  };\n\n  return DataView;\n}(ToolboxFeature);\n/**\n * @inner\n */\n\n\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      var newValIsObject = zrUtil.isObject(newVal) && !zrUtil.isArray(newVal);\n\n      if (!newValIsObject) {\n        newVal = {\n          value: newVal\n        };\n      } // original data has name but new data has no name\n\n\n      var shouldDeleteName = original.name != null && newVal.name == null; // Original data has option\n\n      newVal = zrUtil.defaults(newVal, original);\n      shouldDeleteName && delete newVal.name;\n      return newVal;\n    } else {\n      return newVal;\n    }\n  });\n} // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nexport default DataView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { makeInner } from '../../util/model';\nvar each = zrUtil.each;\nvar inner = makeInner();\n/**\n * @param ecModel\n * @param newSnapshot key is dataZoomId\n */\n\nexport function push(ecModel, newSnapshot) {\n  var storedSnapshots = getStoreSnapshots(ecModel); // If previous dataZoom can not be found,\n  // complete an range with current range.\n\n  each(newSnapshot, function (batchItem, dataZoomId) {\n    var i = storedSnapshots.length - 1;\n\n    for (; i >= 0; i--) {\n      var snapshot = storedSnapshots[i];\n\n      if (snapshot[dataZoomId]) {\n        break;\n      }\n    }\n\n    if (i < 0) {\n      // No origin range set, create one by current range.\n      var dataZoomModel = ecModel.queryComponents({\n        mainType: 'dataZoom',\n        subType: 'select',\n        id: dataZoomId\n      })[0];\n\n      if (dataZoomModel) {\n        var percentRange = dataZoomModel.getPercentRange();\n        storedSnapshots[0][dataZoomId] = {\n          dataZoomId: dataZoomId,\n          start: percentRange[0],\n          end: percentRange[1]\n        };\n      }\n    }\n  });\n  storedSnapshots.push(newSnapshot);\n}\nexport function pop(ecModel) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  var head = storedSnapshots[storedSnapshots.length - 1];\n  storedSnapshots.length > 1 && storedSnapshots.pop(); // Find top for all dataZoom.\n\n  var snapshot = {};\n  each(head, function (batchItem, dataZoomId) {\n    for (var i = storedSnapshots.length - 1; i >= 0; i--) {\n      batchItem = storedSnapshots[i][dataZoomId];\n\n      if (batchItem) {\n        snapshot[dataZoomId] = batchItem;\n        break;\n      }\n    }\n  });\n  return snapshot;\n}\nexport function clear(ecModel) {\n  inner(ecModel).snapshots = null;\n}\nexport function count(ecModel) {\n  return getStoreSnapshots(ecModel).length;\n}\n/**\n * History length of each dataZoom may be different.\n * this._history[0] is used to store origin range.\n */\n\nfunction getStoreSnapshots(ecModel) {\n  var store = inner(ecModel);\n\n  if (!store.snapshots) {\n    store.snapshots = [{}];\n  }\n\n  return store.snapshots;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts';\nimport * as history from '../../dataZoom/history';\nimport { ToolboxFeature } from '../featureManager';\n\nvar RestoreOption =\n/** @class */\nfunction (_super) {\n  __extends(RestoreOption, _super);\n\n  function RestoreOption() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  RestoreOption.prototype.onclick = function (ecModel, api) {\n    history.clear(ecModel);\n    api.dispatchAction({\n      type: 'restore',\n      from: this.uid\n    });\n  };\n\n  RestoreOption.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      // eslint-disable-next-line\n      icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n      title: ecModel.getLocale(['toolbox', 'restore', 'title'])\n    };\n    return defaultOption;\n  };\n\n  return RestoreOption;\n}(ToolboxFeature); // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'restore',\n  event: 'restore',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.resetOption('recreate');\n});\nexport default RestoreOption;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { curry, each, map, bind, merge, clone, defaults, assert } from 'zrender/lib/core/util';\nimport Eventful from 'zrender/lib/core/Eventful';\nimport * as graphic from '../../util/graphic';\nimport * as interactionMutex from './interactionMutex';\nimport DataDiffer from '../../data/DataDiffer';\nvar BRUSH_PANEL_GLOBAL = true;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathPow = Math.pow;\nvar COVER_Z = 10000;\nvar UNSELECT_THRESHOLD = 6;\nvar MIN_RESIZE_LINE_WIDTH = 6;\nvar MUTEX_RESOURCE_KEY = 'globalPan';\nvar DIRECTION_MAP = {\n  w: [0, 0],\n  e: [0, 1],\n  n: [1, 0],\n  s: [1, 1]\n};\nvar CURSOR_MAP = {\n  w: 'ew',\n  e: 'ew',\n  n: 'ns',\n  s: 'ns',\n  ne: 'nesw',\n  sw: 'nesw',\n  nw: 'nwse',\n  se: 'nwse'\n};\nvar DEFAULT_BRUSH_OPT = {\n  brushStyle: {\n    lineWidth: 2,\n    stroke: 'rgba(210,219,238,0.3)',\n    fill: '#D2DBEE'\n  },\n  transformable: true,\n  brushMode: 'single',\n  removeOnClick: false\n};\nvar baseUID = 0;\n/**\n * params:\n *     areas: Array.<Array>, coord relates to container group,\n *                             If no container specified, to global.\n *     opt {\n *         isEnd: boolean,\n *         removeOnClick: boolean\n *     }\n */\n\nvar BrushController =\n/** @class */\nfunction (_super) {\n  __extends(BrushController, _super);\n\n  function BrushController(zr) {\n    var _this = _super.call(this) || this;\n    /**\n     * @internal\n     */\n\n\n    _this._track = [];\n    /**\n     * @internal\n     */\n\n    _this._covers = [];\n    _this._handlers = {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(zr);\n    }\n\n    _this._zr = zr;\n    _this.group = new graphic.Group();\n    _this._uid = 'brushController_' + baseUID++;\n    each(pointerHandlers, function (handler, eventName) {\n      this._handlers[eventName] = bind(handler, this);\n    }, _this);\n    return _this;\n  }\n  /**\n   * If set to `false`, select disabled.\n   */\n\n\n  BrushController.prototype.enableBrush = function (brushOption) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n\n    this._brushType && this._doDisableBrush();\n    brushOption.brushType && this._doEnableBrush(brushOption);\n    return this;\n  };\n\n  BrushController.prototype._doEnableBrush = function (brushOption) {\n    var zr = this._zr; // Consider roam, which takes globalPan too.\n\n    if (!this._enableGlobalPan) {\n      interactionMutex.take(zr, MUTEX_RESOURCE_KEY, this._uid);\n    }\n\n    each(this._handlers, function (handler, eventName) {\n      zr.on(eventName, handler);\n    });\n    this._brushType = brushOption.brushType;\n    this._brushOption = merge(clone(DEFAULT_BRUSH_OPT), brushOption, true);\n  };\n\n  BrushController.prototype._doDisableBrush = function () {\n    var zr = this._zr;\n    interactionMutex.release(zr, MUTEX_RESOURCE_KEY, this._uid);\n    each(this._handlers, function (handler, eventName) {\n      zr.off(eventName, handler);\n    });\n    this._brushType = this._brushOption = null;\n  };\n  /**\n   * @param panelOpts If not pass, it is global brush.\n   */\n\n\n  BrushController.prototype.setPanels = function (panelOpts) {\n    if (panelOpts && panelOpts.length) {\n      var panels_1 = this._panels = {};\n      each(panelOpts, function (panelOpts) {\n        panels_1[panelOpts.panelId] = clone(panelOpts);\n      });\n    } else {\n      this._panels = null;\n    }\n\n    return this;\n  };\n\n  BrushController.prototype.mount = function (opt) {\n    opt = opt || {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = true; // should be at first.\n    }\n\n    this._enableGlobalPan = opt.enableGlobalPan;\n    var thisGroup = this.group;\n\n    this._zr.add(thisGroup);\n\n    thisGroup.attr({\n      x: opt.x || 0,\n      y: opt.y || 0,\n      rotation: opt.rotation || 0,\n      scaleX: opt.scaleX || 1,\n      scaleY: opt.scaleY || 1\n    });\n    this._transform = thisGroup.getLocalTransform();\n    return this;\n  }; // eachCover(cb, context): void {\n  //     each(this._covers, cb, context);\n  // }\n\n  /**\n   * Update covers.\n   * @param coverConfigList\n   *        If coverConfigList is null/undefined, all covers removed.\n   */\n\n\n  BrushController.prototype.updateCovers = function (coverConfigList) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n\n    coverConfigList = map(coverConfigList, function (coverConfig) {\n      return merge(clone(DEFAULT_BRUSH_OPT), coverConfig, true);\n    });\n    var tmpIdPrefix = '\\0-brush-index-';\n    var oldCovers = this._covers;\n    var newCovers = this._covers = [];\n    var controller = this;\n    var creatingCover = this._creatingCover;\n    new DataDiffer(oldCovers, coverConfigList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n    return this;\n\n    function getKey(brushOption, index) {\n      return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n    }\n\n    function oldGetKey(cover, index) {\n      return getKey(cover.__brushOption, index);\n    }\n\n    function addOrUpdate(newIndex, oldIndex) {\n      var newBrushInternal = coverConfigList[newIndex]; // Consider setOption in event listener of brushSelect,\n      // where updating cover when creating should be forbiden.\n\n      if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n        newCovers[newIndex] = oldCovers[oldIndex];\n      } else {\n        var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushInternal, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushInternal));\n        updateCoverAfterCreation(controller, cover);\n      }\n    }\n\n    function remove(oldIndex) {\n      if (oldCovers[oldIndex] !== creatingCover) {\n        controller.group.remove(oldCovers[oldIndex]);\n      }\n    }\n  };\n\n  BrushController.prototype.unmount = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!this._mounted) {\n        return;\n      }\n    }\n\n    this.enableBrush(false); // container may 'removeAll' outside.\n\n    clearCovers(this);\n\n    this._zr.remove(this.group);\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = false; // should be at last.\n    }\n\n    return this;\n  };\n\n  BrushController.prototype.dispose = function () {\n    this.unmount();\n    this.off();\n  };\n\n  return BrushController;\n}(Eventful);\n\nfunction createCover(controller, brushOption) {\n  var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n  cover.__brushOption = brushOption;\n  updateZ(cover, brushOption);\n  controller.group.add(cover);\n  return cover;\n}\n\nfunction endCreating(controller, creatingCover) {\n  var coverRenderer = getCoverRenderer(creatingCover);\n\n  if (coverRenderer.endCreating) {\n    coverRenderer.endCreating(controller, creatingCover);\n    updateZ(creatingCover, creatingCover.__brushOption);\n  }\n\n  return creatingCover;\n}\n\nfunction updateCoverShape(controller, cover) {\n  var brushOption = cover.__brushOption;\n  getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n}\n\nfunction updateZ(cover, brushOption) {\n  var z = brushOption.z;\n  z == null && (z = COVER_Z);\n  cover.traverse(function (el) {\n    el.z = z;\n    el.z2 = z; // Consider in given container.\n  });\n}\n\nfunction updateCoverAfterCreation(controller, cover) {\n  getCoverRenderer(cover).updateCommon(controller, cover);\n  updateCoverShape(controller, cover);\n}\n\nfunction getCoverRenderer(cover) {\n  return coverRenderers[cover.__brushOption.brushType];\n} // return target panel or `true` (means global panel)\n\n\nfunction getPanelByPoint(controller, e, localCursorPoint) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panel;\n  var transform = controller._transform;\n  each(panels, function (pn) {\n    pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n  });\n  return panel;\n} // Return a panel or true\n\n\nfunction getPanelByCover(controller, cover) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panelId = cover.__brushOption.panelId; // User may give cover without coord sys info,\n  // which is then treated as global panel.\n\n  return panelId != null ? panels[panelId] : BRUSH_PANEL_GLOBAL;\n}\n\nfunction clearCovers(controller) {\n  var covers = controller._covers;\n  var originalLength = covers.length;\n  each(covers, function (cover) {\n    controller.group.remove(cover);\n  }, controller);\n  covers.length = 0;\n  return !!originalLength;\n}\n\nfunction trigger(controller, opt) {\n  var areas = map(controller._covers, function (cover) {\n    var brushOption = cover.__brushOption;\n    var range = clone(brushOption.range);\n    return {\n      brushType: brushOption.brushType,\n      panelId: brushOption.panelId,\n      range: range\n    };\n  });\n  controller.trigger('brush', {\n    areas: areas,\n    isEnd: !!opt.isEnd,\n    removeOnClick: !!opt.removeOnClick\n  });\n}\n\nfunction shouldShowCover(controller) {\n  var track = controller._track;\n\n  if (!track.length) {\n    return false;\n  }\n\n  var p2 = track[track.length - 1];\n  var p1 = track[0];\n  var dx = p2[0] - p1[0];\n  var dy = p2[1] - p1[1];\n  var dist = mathPow(dx * dx + dy * dy, 0.5);\n  return dist > UNSELECT_THRESHOLD;\n}\n\nfunction getTrackEnds(track) {\n  var tail = track.length - 1;\n  tail < 0 && (tail = 0);\n  return [track[0], track[tail]];\n}\n\n;\n\nfunction createBaseRectCover(rectRangeConverter, controller, brushOption, edgeNameSequences) {\n  var cover = new graphic.Group();\n  cover.add(new graphic.Rect({\n    name: 'main',\n    style: makeStyle(brushOption),\n    silent: true,\n    draggable: true,\n    cursor: 'move',\n    drift: curry(driftRect, rectRangeConverter, controller, cover, ['n', 's', 'w', 'e']),\n    ondragend: curry(trigger, controller, {\n      isEnd: true\n    })\n  }));\n  each(edgeNameSequences, function (nameSequence) {\n    cover.add(new graphic.Rect({\n      name: nameSequence.join(''),\n      style: {\n        opacity: 0\n      },\n      draggable: true,\n      silent: true,\n      invisible: true,\n      drift: curry(driftRect, rectRangeConverter, controller, cover, nameSequence),\n      ondragend: curry(trigger, controller, {\n        isEnd: true\n      })\n    }));\n  });\n  return cover;\n}\n\nfunction updateBaseRect(controller, cover, localRange, brushOption) {\n  var lineWidth = brushOption.brushStyle.lineWidth || 0;\n  var handleSize = mathMax(lineWidth, MIN_RESIZE_LINE_WIDTH);\n  var x = localRange[0][0];\n  var y = localRange[1][0];\n  var xa = x - lineWidth / 2;\n  var ya = y - lineWidth / 2;\n  var x2 = localRange[0][1];\n  var y2 = localRange[1][1];\n  var x2a = x2 - handleSize + lineWidth / 2;\n  var y2a = y2 - handleSize + lineWidth / 2;\n  var width = x2 - x;\n  var height = y2 - y;\n  var widtha = width + lineWidth;\n  var heighta = height + lineWidth;\n  updateRectShape(controller, cover, 'main', x, y, width, height);\n\n  if (brushOption.transformable) {\n    updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n    updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n    updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n    updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n  }\n}\n\nfunction updateCommon(controller, cover) {\n  var brushOption = cover.__brushOption;\n  var transformable = brushOption.transformable;\n  var mainEl = cover.childAt(0);\n  mainEl.useStyle(makeStyle(brushOption));\n  mainEl.attr({\n    silent: !transformable,\n    cursor: transformable ? 'move' : 'default'\n  });\n  each([['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']], function (nameSequence) {\n    var el = cover.childOfName(nameSequence.join(''));\n    var globalDir = nameSequence.length === 1 ? getGlobalDirection1(controller, nameSequence[0]) : getGlobalDirection2(controller, nameSequence);\n    el && el.attr({\n      silent: !transformable,\n      invisible: !transformable,\n      cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n    });\n  });\n}\n\nfunction updateRectShape(controller, cover, name, x, y, w, h) {\n  var el = cover.childOfName(name);\n  el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n}\n\nfunction makeStyle(brushOption) {\n  return defaults({\n    strokeNoScale: true\n  }, brushOption.brushStyle);\n}\n\nfunction formatRectRange(x, y, x2, y2) {\n  var min = [mathMin(x, x2), mathMin(y, y2)];\n  var max = [mathMax(x, x2), mathMax(y, y2)];\n  return [[min[0], max[0]], [min[1], max[1]] // y range\n  ];\n}\n\nfunction getTransform(controller) {\n  return graphic.getTransform(controller.group);\n}\n\nfunction getGlobalDirection1(controller, localDirName) {\n  var map = {\n    w: 'left',\n    e: 'right',\n    n: 'top',\n    s: 'bottom'\n  };\n  var inverseMap = {\n    left: 'w',\n    right: 'e',\n    top: 'n',\n    bottom: 's'\n  };\n  var dir = graphic.transformDirection(map[localDirName], getTransform(controller));\n  return inverseMap[dir];\n}\n\nfunction getGlobalDirection2(controller, localDirNameSeq) {\n  var globalDir = [getGlobalDirection1(controller, localDirNameSeq[0]), getGlobalDirection1(controller, localDirNameSeq[1])];\n  (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n  return globalDir.join('');\n}\n\nfunction driftRect(rectRangeConverter, controller, cover, dirNameSequence, dx, dy) {\n  var brushOption = cover.__brushOption;\n  var rectRange = rectRangeConverter.toRectRange(brushOption.range);\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(dirNameSequence, function (dirName) {\n    var ind = DIRECTION_MAP[dirName];\n    rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n  });\n  brushOption.range = rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction driftPolygon(controller, cover, dx, dy) {\n  var range = cover.__brushOption.range;\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(range, function (point) {\n    point[0] += localDelta[0];\n    point[1] += localDelta[1];\n  });\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction toLocalDelta(controller, dx, dy) {\n  var thisGroup = controller.group;\n  var localD = thisGroup.transformCoordToLocal(dx, dy);\n  var localZero = thisGroup.transformCoordToLocal(0, 0);\n  return [localD[0] - localZero[0], localD[1] - localZero[1]];\n}\n\nfunction clipByPanel(controller, cover, data) {\n  var panel = getPanelByCover(controller, cover);\n  return panel && panel !== BRUSH_PANEL_GLOBAL ? panel.clipPath(data, controller._transform) : clone(data);\n}\n\nfunction pointsToRect(points) {\n  var xmin = mathMin(points[0][0], points[1][0]);\n  var ymin = mathMin(points[0][1], points[1][1]);\n  var xmax = mathMax(points[0][0], points[1][0]);\n  var ymax = mathMax(points[0][1], points[1][1]);\n  return {\n    x: xmin,\n    y: ymin,\n    width: xmax - xmin,\n    height: ymax - ymin\n  };\n}\n\nfunction resetCursor(controller, e, localCursorPoint) {\n  if ( // Check active\n  !controller._brushType // resetCursor should be always called when mouse is in zr area,\n  // but not called when mouse is out of zr area to avoid bad influence\n  // if `mousemove`, `mouseup` are triggered from `document` event.\n  || isOutsideZrArea(controller, e.offsetX, e.offsetY)) {\n    return;\n  }\n\n  var zr = controller._zr;\n  var covers = controller._covers;\n  var currPanel = getPanelByPoint(controller, e, localCursorPoint); // Check whether in covers.\n\n  if (!controller._dragging) {\n    for (var i = 0; i < covers.length; i++) {\n      var brushOption = covers[i].__brushOption;\n\n      if (currPanel && (currPanel === BRUSH_PANEL_GLOBAL || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n        // Use cursor style set on cover.\n        return;\n      }\n    }\n  }\n\n  currPanel && zr.setCursorStyle('crosshair');\n}\n\nfunction preventDefault(e) {\n  var rawE = e.event;\n  rawE.preventDefault && rawE.preventDefault();\n}\n\nfunction mainShapeContain(cover, x, y) {\n  return cover.childOfName('main').contain(x, y);\n}\n\nfunction updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n  var creatingCover = controller._creatingCover;\n  var panel = controller._creatingPanel;\n  var thisBrushOption = controller._brushOption;\n  var eventParams;\n\n  controller._track.push(localCursorPoint.slice());\n\n  if (shouldShowCover(controller) || creatingCover) {\n    if (panel && !creatingCover) {\n      thisBrushOption.brushMode === 'single' && clearCovers(controller);\n      var brushOption = clone(thisBrushOption);\n      brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n      brushOption.panelId = panel === BRUSH_PANEL_GLOBAL ? null : panel.panelId;\n      creatingCover = controller._creatingCover = createCover(controller, brushOption);\n\n      controller._covers.push(creatingCover);\n    }\n\n    if (creatingCover) {\n      var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n      var coverBrushOption = creatingCover.__brushOption;\n      coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n\n      if (isEnd) {\n        endCreating(controller, creatingCover);\n        coverRenderer.updateCommon(controller, creatingCover);\n      }\n\n      updateCoverShape(controller, creatingCover);\n      eventParams = {\n        isEnd: isEnd\n      };\n    }\n  } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n    // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n    // But a single click do not clear covers, because user may have casual\n    // clicks (for example, click on other component and do not expect covers\n    // disappear).\n    // Only some cover removed, trigger action, but not every click trigger action.\n    if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n      eventParams = {\n        isEnd: isEnd,\n        removeOnClick: true\n      };\n    }\n  }\n\n  return eventParams;\n}\n\nfunction determineBrushType(brushType, panel) {\n  if (brushType === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(panel && panel.defaultBrushType, 'MUST have defaultBrushType when brushType is \"atuo\"');\n    }\n\n    return panel.defaultBrushType;\n  }\n\n  return brushType;\n}\n\nvar pointerHandlers = {\n  mousedown: function (e) {\n    if (this._dragging) {\n      // In case some browser do not support globalOut,\n      // and release mouse out side the browser.\n      handleDragEnd(this, e);\n    } else if (!e.target || !e.target.draggable) {\n      preventDefault(e);\n      var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n      this._creatingCover = null;\n      var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n\n      if (panel) {\n        this._dragging = true;\n        this._track = [localCursorPoint.slice()];\n      }\n    }\n  },\n  mousemove: function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = this.group.transformCoordToLocal(x, y);\n    resetCursor(this, e, localCursorPoint);\n\n    if (this._dragging) {\n      preventDefault(e);\n      var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n      eventParams && trigger(this, eventParams);\n    }\n  },\n  mouseup: function (e) {\n    handleDragEnd(this, e);\n  }\n};\n\nfunction handleDragEnd(controller, e) {\n  if (controller._dragging) {\n    preventDefault(e);\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = controller.group.transformCoordToLocal(x, y);\n    var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\n    controller._dragging = false;\n    controller._track = [];\n    controller._creatingCover = null; // trigger event shoule be at final, after procedure will be nested.\n\n    eventParams && trigger(controller, eventParams);\n  }\n}\n\nfunction isOutsideZrArea(controller, x, y) {\n  var zr = controller._zr;\n  return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\n}\n/**\n * key: brushType\n */\n\n\nvar coverRenderers = {\n  lineX: getLineRenderer(0),\n  lineY: getLineRenderer(1),\n  rect: {\n    createCover: function (controller, brushOption) {\n      function returnInput(range) {\n        return range;\n      }\n\n      return createBaseRectCover({\n        toRectRange: returnInput,\n        fromRectRange: returnInput\n      }, controller, brushOption, [['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      updateBaseRect(controller, cover, localRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  },\n  polygon: {\n    createCover: function (controller, brushOption) {\n      var cover = new graphic.Group(); // Do not use graphic.Polygon because graphic.Polyline do not close the\n      // border of the shape when drawing, which is a better experience for user.\n\n      cover.add(new graphic.Polyline({\n        name: 'main',\n        style: makeStyle(brushOption),\n        silent: true\n      }));\n      return cover;\n    },\n    getCreatingRange: function (localTrack) {\n      return localTrack;\n    },\n    endCreating: function (controller, cover) {\n      cover.remove(cover.childAt(0)); // Use graphic.Polygon close the shape.\n\n      cover.add(new graphic.Polygon({\n        name: 'main',\n        draggable: true,\n        drift: curry(driftPolygon, controller, cover),\n        ondragend: curry(trigger, controller, {\n          isEnd: true\n        })\n      }));\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      cover.childAt(0).setShape({\n        points: clipByPanel(controller, cover, localRange)\n      });\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  }\n};\n\nfunction getLineRenderer(xyIndex) {\n  return {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover({\n        toRectRange: function (range) {\n          var rectRange = [range, [0, 100]];\n          xyIndex && rectRange.reverse();\n          return rectRange;\n        },\n        fromRectRange: function (rectRange) {\n          return rectRange[xyIndex];\n        }\n      }, controller, brushOption, [[['w'], ['e']], [['n'], ['s']]][xyIndex]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      var min = mathMin(ends[0][xyIndex], ends[1][xyIndex]);\n      var max = mathMax(ends[0][xyIndex], ends[1][xyIndex]);\n      return [min, max];\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      var otherExtent; // If brushWidth not specified, fit the panel.\n\n      var panel = getPanelByCover(controller, cover);\n\n      if (panel !== BRUSH_PANEL_GLOBAL && panel.getLinearBrushOtherExtent) {\n        otherExtent = panel.getLinearBrushOtherExtent(xyIndex);\n      } else {\n        var zr = controller._zr;\n        otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n      }\n\n      var rectRange = [localRange, otherExtent];\n      xyIndex && rectRange.reverse();\n      updateBaseRect(controller, cover, rectRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  };\n}\n\nexport default BrushController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Avoid that: mouse click on a elements that is over geo or graph,\n * but roam is triggered.\n */\n\nexport function onIrrelevantElement(e, api, targetCoordSysModel) {\n  var model = api.getComponentByElement(e.topTarget); // If model is axisModel, it works only if it is injected with coordinateSystem.\n\n  var coordSys = model && model.coordinateSystem;\n  return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES.hasOwnProperty(model.mainType) && coordSys && coordSys.model !== targetCoordSysModel;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport { onIrrelevantElement } from './cursorHelper';\nimport * as graphicUtil from '../../util/graphic';\nexport function makeRectPanelClipPath(rect) {\n  rect = normalizeRect(rect);\n  return function (localPoints) {\n    return graphicUtil.clipPointsByRect(localPoints, rect);\n  };\n}\nexport function makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\n  rect = normalizeRect(rect);\n  return function (xyIndex) {\n    var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\n    var brushWidth = idx ? rect.width : rect.height;\n    var base = idx ? rect.x : rect.y;\n    return [base, base + (brushWidth || 0)];\n  };\n}\nexport function makeRectIsTargetByCursor(rect, api, targetModel) {\n  var boundingRect = normalizeRect(rect);\n  return function (e, localCursorPoint) {\n    return boundingRect.contain(localCursorPoint[0], localCursorPoint[1]) && !onIrrelevantElement(e, api, targetModel);\n  };\n} // Consider width/height is negative.\n\nfunction normalizeRect(rect) {\n  return BoundingRect.create(rect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, indexOf, curry, assert, map, createHashMap } from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport * as brushHelper from './brushHelper';\nimport { parseFinder as modelUtilParseFinder } from '../../util/model'; // FIXME\n// how to genarialize to more coordinate systems.\n\nvar INCLUDE_FINDER_MAIN_TYPES = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap'];\n\nvar BrushTargetManager =\n/** @class */\nfunction () {\n  /**\n   * @param finder contains Index/Id/Name of xAxis/yAxis/geo/grid\n   *        Each can be {number|Array.<number>}. like: {xAxisIndex: [3, 4]}\n   * @param opt.include include coordinate system types.\n   */\n  function BrushTargetManager(finder, ecModel, opt) {\n    var _this = this;\n\n    this._targetInfoList = [];\n    var foundCpts = parseFinder(ecModel, finder);\n    each(targetInfoBuilders, function (builder, type) {\n      if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\n        builder(foundCpts, _this._targetInfoList);\n      }\n    });\n  }\n\n  BrushTargetManager.prototype.setOutputRanges = function (areas, ecModel) {\n    this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      (area.coordRanges || (area.coordRanges = [])).push(coordRange); // area.coordRange is the first of area.coordRanges\n\n      if (!area.coordRange) {\n        area.coordRange = coordRange; // In 'category' axis, coord to pixel is not reversible, so we can not\n        // rebuild range by coordRange accrately, which may bring trouble when\n        // brushing only one item. So we use __rangeOffset to rebuilding range\n        // by coordRange. And this it only used in brush component so it is no\n        // need to be adapted to coordRanges.\n\n        var result = coordConvert[area.brushType](0, coordSys, coordRange);\n        area.__rangeOffset = {\n          offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\n          xyMinMax: result.xyMinMax\n        };\n      }\n    });\n    return areas;\n  };\n\n  BrushTargetManager.prototype.matchOutputRanges = function (areas, ecModel, cb) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n\n      if (targetInfo && targetInfo !== true) {\n        each(targetInfo.coordSyses, function (coordSys) {\n          var result = coordConvert[area.brushType](1, coordSys, area.range, true);\n          cb(area, result.values, coordSys, ecModel);\n        });\n      }\n    }, this);\n  };\n  /**\n   * the `areas` is `BrushModel.areas`.\n   * Called in layout stage.\n   * convert `area.coordRange` to global range and set panelId to `area.range`.\n   */\n\n\n  BrushTargetManager.prototype.setInputRanges = function (areas, ecModel) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!targetInfo || targetInfo === true || area.coordRange, 'coordRange must be specified when coord index specified.');\n        assert(!targetInfo || targetInfo !== true || area.range, 'range must be specified in global brush.');\n      }\n\n      area.range = area.range || []; // convert coordRange to global range and set panelId.\n\n      if (targetInfo && targetInfo !== true) {\n        area.panelId = targetInfo.panelId; // (1) area.range shoule always be calculate from coordRange but does\n        // not keep its original value, for the sake of the dataZoom scenario,\n        // where area.coordRange remains unchanged but area.range may be changed.\n        // (2) Only support converting one coordRange to pixel range in brush\n        // component. So do not consider `coordRanges`.\n        // (3) About __rangeOffset, see comment above.\n\n        var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\n        var rangeOffset = area.__rangeOffset;\n        area.range = rangeOffset ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax)) : result.values;\n      }\n    }, this);\n  };\n\n  BrushTargetManager.prototype.makePanelOpts = function (api, getDefaultBrushType) {\n    return map(this._targetInfoList, function (targetInfo) {\n      var rect = targetInfo.getPanelRect();\n      return {\n        panelId: targetInfo.panelId,\n        defaultBrushType: getDefaultBrushType ? getDefaultBrushType(targetInfo) : null,\n        clipPath: brushHelper.makeRectPanelClipPath(rect),\n        isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\n        getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect)\n      };\n    });\n  };\n\n  BrushTargetManager.prototype.controlSeries = function (area, seriesModel, ecModel) {\n    // Check whether area is bound in coord, and series do not belong to that coord.\n    // If do not do this check, some brush (like lineX) will controll all axes.\n    var targetInfo = this.findTargetInfo(area, ecModel);\n    return targetInfo === true || targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0;\n  };\n  /**\n   * If return Object, a coord found.\n   * If reutrn true, global found.\n   * Otherwise nothing found.\n   */\n\n\n  BrushTargetManager.prototype.findTargetInfo = function (area, ecModel) {\n    var targetInfoList = this._targetInfoList;\n    var foundCpts = parseFinder(ecModel, area);\n\n    for (var i = 0; i < targetInfoList.length; i++) {\n      var targetInfo = targetInfoList[i];\n      var areaPanelId = area.panelId;\n\n      if (areaPanelId) {\n        if (targetInfo.panelId === areaPanelId) {\n          return targetInfo;\n        }\n      } else {\n        for (var j = 0; j < targetInfoMatchers.length; j++) {\n          if (targetInfoMatchers[j](foundCpts, targetInfo)) {\n            return targetInfo;\n          }\n        }\n      }\n    }\n\n    return true;\n  };\n\n  return BrushTargetManager;\n}();\n\nfunction formatMinMax(minMax) {\n  minMax[0] > minMax[1] && minMax.reverse();\n  return minMax;\n}\n\nfunction parseFinder(ecModel, finder) {\n  return modelUtilParseFinder(ecModel, finder, {\n    includeMainTypes: INCLUDE_FINDER_MAIN_TYPES\n  });\n}\n\nvar targetInfoBuilders = {\n  grid: function (foundCpts, targetInfoList) {\n    var xAxisModels = foundCpts.xAxisModels;\n    var yAxisModels = foundCpts.yAxisModels;\n    var gridModels = foundCpts.gridModels; // Remove duplicated.\n\n    var gridModelMap = createHashMap();\n    var xAxesHas = {};\n    var yAxesHas = {};\n\n    if (!xAxisModels && !yAxisModels && !gridModels) {\n      return;\n    }\n\n    each(xAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n    });\n    each(yAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      yAxesHas[gridModel.id] = true;\n    });\n    each(gridModels, function (gridModel) {\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n      yAxesHas[gridModel.id] = true;\n    });\n    gridModelMap.each(function (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      var cartesians = [];\n      each(grid.getCartesians(), function (cartesian, index) {\n        if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0 || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\n          cartesians.push(cartesian);\n        }\n      });\n      targetInfoList.push({\n        panelId: 'grid--' + gridModel.id,\n        gridModel: gridModel,\n        coordSysModel: gridModel,\n        // Use the first one as the representitive coordSys.\n        coordSys: cartesians[0],\n        coordSyses: cartesians,\n        getPanelRect: panelRectBuilders.grid,\n        xAxisDeclared: xAxesHas[gridModel.id],\n        yAxisDeclared: yAxesHas[gridModel.id]\n      });\n    });\n  },\n  geo: function (foundCpts, targetInfoList) {\n    each(foundCpts.geoModels, function (geoModel) {\n      var coordSys = geoModel.coordinateSystem;\n      targetInfoList.push({\n        panelId: 'geo--' + geoModel.id,\n        geoModel: geoModel,\n        coordSysModel: geoModel,\n        coordSys: coordSys,\n        coordSyses: [coordSys],\n        getPanelRect: panelRectBuilders.geo\n      });\n    });\n  }\n};\nvar targetInfoMatchers = [// grid\nfunction (foundCpts, targetInfo) {\n  var xAxisModel = foundCpts.xAxisModel;\n  var yAxisModel = foundCpts.yAxisModel;\n  var gridModel = foundCpts.gridModel;\n  !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\n  !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\n  return gridModel && gridModel === targetInfo.gridModel;\n}, // geo\nfunction (foundCpts, targetInfo) {\n  var geoModel = foundCpts.geoModel;\n  return geoModel && geoModel === targetInfo.geoModel;\n}];\nvar panelRectBuilders = {\n  grid: function () {\n    // grid is not Transformable.\n    return this.coordSys.master.getRect().clone();\n  },\n  geo: function () {\n    var coordSys = this.coordSys;\n    var rect = coordSys.getBoundingRect().clone(); // geo roam and zoom transform\n\n    rect.applyTransform(graphic.getTransform(coordSys));\n    return rect;\n  }\n};\nvar coordConvert = {\n  lineX: curry(axisConvert, 0),\n  lineY: curry(axisConvert, 1),\n  rect: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xminymin = to ? coordSys.pointToData([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp);\n    var xmaxymax = to ? coordSys.pointToData([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp);\n    var values = [formatMinMax([xminymin[0], xmaxymax[0]]), formatMinMax([xminymin[1], xmaxymax[1]])];\n    return {\n      values: values,\n      xyMinMax: values\n    };\n  },\n  polygon: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    var values = map(rangeOrCoordRange, function (item) {\n      var p = to ? coordSys.pointToData(item, clamp) : coordSys.dataToPoint(item, clamp);\n      xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\n      xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\n      xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\n      xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\n      return p;\n    });\n    return {\n      values: values,\n      xyMinMax: xyMinMax\n    };\n  }\n};\n\nfunction axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(coordSys.type === 'cartesian2d', 'lineX/lineY brush is available only in cartesian2d.');\n  }\n\n  var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\n  var values = formatMinMax(map([0, 1], function (i) {\n    return to ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i]), true) : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\n  }));\n  var xyMinMax = [];\n  xyMinMax[axisNameIndex] = values;\n  xyMinMax[1 - axisNameIndex] = [NaN, NaN];\n  return {\n    values: values,\n    xyMinMax: xyMinMax\n  };\n}\n\nvar diffProcessor = {\n  lineX: curry(axisDiffProcessor, 0),\n  lineY: curry(axisDiffProcessor, 1),\n  rect: function (values, refer, scales) {\n    return [[values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]], [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]];\n  },\n  polygon: function (values, refer, scales) {\n    return map(values, function (item, idx) {\n      return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\n    });\n  }\n};\n\nfunction axisDiffProcessor(axisNameIndex, values, refer, scales) {\n  return [values[0] - scales[axisNameIndex] * refer[0], values[1] - scales[axisNameIndex] * refer[1]];\n} // We have to process scale caused by dataZoom manually,\n// although it might be not accurate.\n// Return [0~1, 0~1]\n\n\nfunction getScales(xyMinMaxCurr, xyMinMaxOrigin) {\n  var sizeCurr = getSize(xyMinMaxCurr);\n  var sizeOrigin = getSize(xyMinMaxOrigin);\n  var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\n  isNaN(scales[0]) && (scales[0] = 1);\n  isNaN(scales[1]) && (scales[1] = 1);\n  return scales;\n}\n\nfunction getSize(xyMinMax) {\n  return xyMinMax ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]] : [NaN, NaN];\n}\n\nexport default BrushTargetManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // TODO depends on DataZoom and Brush\n\nimport * as zrUtil from 'zrender/lib/core/util';\nimport BrushController from '../../helper/BrushController';\nimport BrushTargetManager from '../../helper/BrushTargetManager';\nimport * as history from '../../dataZoom/history';\nimport sliderMove from '../../helper/sliderMove';\nimport { ToolboxFeature } from '../featureManager';\nimport { makeInternalComponentId, parseFinder } from '../../../util/model';\nimport { registerInternalOptionCreator } from '../../../model/internalComponentCreator';\nvar each = zrUtil.each;\nvar DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\nvar ICON_TYPES = ['zoom', 'back'];\n\nvar DataZoomFeature =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomFeature, _super);\n\n  function DataZoomFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\n    if (!this._brushController) {\n      this._brushController = new BrushController(api.getZr());\n\n      this._brushController.on('brush', zrUtil.bind(this._onBrush, this)).mount();\n    }\n\n    updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n    updateBackBtnStatus(featureModel, ecModel);\n  };\n\n  DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\n    handlers[type].call(this);\n  };\n\n  DataZoomFeature.prototype.remove = function (ecModel, api) {\n    this._brushController && this._brushController.unmount();\n  };\n\n  DataZoomFeature.prototype.dispose = function (ecModel, api) {\n    this._brushController && this._brushController.dispose();\n  };\n\n  DataZoomFeature.prototype._onBrush = function (eventParam) {\n    var areas = eventParam.areas;\n\n    if (!eventParam.isEnd || !areas.length) {\n      return;\n    }\n\n    var snapshot = {};\n    var ecModel = this.ecModel;\n\n    this._brushController.updateCovers([]); // remove cover\n\n\n    var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, {\n      include: ['grid']\n    });\n    brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      if (coordSys.type !== 'cartesian2d') {\n        return;\n      }\n\n      var brushType = area.brushType;\n\n      if (brushType === 'rect') {\n        setBatch('x', coordSys, coordRange[0]);\n        setBatch('y', coordSys, coordRange[1]);\n      } else {\n        setBatch({\n          lineX: 'x',\n          lineY: 'y'\n        }[brushType], coordSys, coordRange);\n      }\n    });\n    history.push(ecModel, snapshot);\n\n    this._dispatchZoomAction(snapshot);\n\n    function setBatch(dimName, coordSys, minMax) {\n      var axis = coordSys.getAxis(dimName);\n      var axisModel = axis.model;\n      var dataZoomModel = findDataZoom(dimName, axisModel, ecModel); // Restrict range.\n\n      var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n\n      if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n        minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n      }\n\n      dataZoomModel && (snapshot[dataZoomModel.id] = {\n        dataZoomId: dataZoomModel.id,\n        startValue: minMax[0],\n        endValue: minMax[1]\n      });\n    }\n\n    function findDataZoom(dimName, axisModel, ecModel) {\n      var found;\n      ecModel.eachComponent({\n        mainType: 'dataZoom',\n        subType: 'select'\n      }, function (dzModel) {\n        var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n        has && (found = dzModel);\n      });\n      return found;\n    }\n  };\n\n  ;\n\n  DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\n    var batch = []; // Convert from hash map to array.\n\n    each(snapshot, function (batchItem, dataZoomId) {\n      batch.push(zrUtil.clone(batchItem));\n    });\n    batch.length && this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      batch: batch\n    });\n  };\n\n  DataZoomFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      filterMode: 'filter',\n      // Icon group\n      icon: {\n        zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n        back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n      },\n      // `zoom`, `back`\n      title: ecModel.getLocale(['toolbox', 'dataZoom', 'title']),\n      brushStyle: {\n        borderWidth: 0,\n        color: 'rgba(210,219,238,0.2)'\n      }\n    };\n    return defaultOption;\n  };\n\n  return DataZoomFeature;\n}(ToolboxFeature);\n\nvar handlers = {\n  zoom: function () {\n    var nextActive = !this._isZoomActive;\n    this.api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'dataZoomSelect',\n      dataZoomSelectActive: nextActive\n    });\n  },\n  back: function () {\n    this._dispatchZoomAction(history.pop(this.ecModel));\n  }\n};\n\nfunction makeAxisFinder(dzFeatureModel) {\n  var setting = {\n    xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\n    yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\n    xAxisId: dzFeatureModel.get('xAxisId', true),\n    yAxisId: dzFeatureModel.get('yAxisId', true)\n  }; // If both `xAxisIndex` `xAxisId` not set, it means 'all'.\n  // If both `yAxisIndex` `yAxisId` not set, it means 'all'.\n  // Some old cases set like this below to close yAxis control but leave xAxis control:\n  // `{ feature: { dataZoom: { yAxisIndex: false } }`.\n\n  if (setting.xAxisIndex == null && setting.xAxisId == null) {\n    setting.xAxisIndex = 'all';\n  }\n\n  if (setting.yAxisIndex == null && setting.yAxisId == null) {\n    setting.yAxisIndex = 'all';\n  }\n\n  return setting;\n}\n\nfunction updateBackBtnStatus(featureModel, ecModel) {\n  featureModel.setIconStatus('back', history.count(ecModel) > 1 ? 'emphasis' : 'normal');\n}\n\nfunction updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n  var zoomActive = view._isZoomActive;\n\n  if (payload && payload.type === 'takeGlobalCursor') {\n    zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n  }\n\n  view._isZoomActive = zoomActive;\n  featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n  var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, {\n    include: ['grid']\n  });\n  var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\n    return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n  });\n\n  view._brushController.setPanels(panels).enableBrush(zoomActive && panels.length ? {\n    brushType: 'auto',\n    brushStyle: featureModel.getModel('brushStyle').getItemStyle()\n  } : false);\n}\n\nregisterInternalOptionCreator('dataZoom', function (ecModel) {\n  var toolboxModel = ecModel.getComponent('toolbox', 0);\n  var featureDataZoomPath = ['feature', 'dataZoom'];\n\n  if (!toolboxModel || toolboxModel.get(featureDataZoomPath) == null) {\n    return;\n  }\n\n  var dzFeatureModel = toolboxModel.getModel(featureDataZoomPath);\n  var dzOptions = [];\n  var finder = makeAxisFinder(dzFeatureModel);\n  var finderResult = parseFinder(ecModel, finder);\n  each(finderResult.xAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex');\n  });\n  each(finderResult.yAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex');\n  });\n\n  function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\n    var axisIndex = axisModel.componentIndex;\n    var newOpt = {\n      type: 'select',\n      $fromToolbox: true,\n      // Default to be filter\n      filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\n      // Id for merge mapping.\n      id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\n    };\n    newOpt[axisIndexPropName] = axisIndex;\n    dzOptions.push(newOpt);\n  }\n\n  return dzOptions;\n});\nexport default DataZoomFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport { install as installDataZoomSelect } from '../../component/dataZoom/installDataZoomSelect';\nimport ToolboxModel from './ToolboxModel';\nimport ToolboxView from './ToolboxView'; // TODOD: REGISTER IN INSTALL\n\nimport { registerFeature } from './featureManager';\nimport SaveAsImage from './feature/SaveAsImage';\nimport MagicType from './feature/MagicType';\nimport DataView from './feature/DataView';\nimport Restore from './feature/Restore';\nimport DataZoom from './feature/DataZoom';\nexport function install(registers) {\n  registers.registerComponentModel(ToolboxModel);\n  registers.registerComponentView(ToolboxView);\n  registerFeature('saveAsImage', SaveAsImage);\n  registerFeature('magicType', MagicType);\n  registerFeature('dataView', DataView);\n  registerFeature('dataZoom', DataZoom);\n  registerFeature('restore', Restore);\n  use(installDataZoomSelect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component';\nimport List from '../../data/List';\nimport { each, isObject, clone } from 'zrender/lib/core/util';\nimport { convertOptionIdName, getDataItemValue } from '../../util/model';\n\nvar TimelineModel =\n/** @class */\nfunction (_super) {\n  __extends(TimelineModel, _super);\n\n  function TimelineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TimelineModel.type;\n    _this.layoutMode = 'box';\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  TimelineModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n\n    this._initData();\n  };\n  /**\n   * @override\n   */\n\n\n  TimelineModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n\n    this._initData();\n  };\n\n  TimelineModel.prototype.setCurrentIndex = function (currentIndex) {\n    if (currentIndex == null) {\n      currentIndex = this.option.currentIndex;\n    }\n\n    var count = this._data.count();\n\n    if (this.option.loop) {\n      currentIndex = (currentIndex % count + count) % count;\n    } else {\n      currentIndex >= count && (currentIndex = count - 1);\n      currentIndex < 0 && (currentIndex = 0);\n    }\n\n    this.option.currentIndex = currentIndex;\n  };\n  /**\n   * @return {number} currentIndex\n   */\n\n\n  TimelineModel.prototype.getCurrentIndex = function () {\n    return this.option.currentIndex;\n  };\n  /**\n   * @return {boolean}\n   */\n\n\n  TimelineModel.prototype.isIndexMax = function () {\n    return this.getCurrentIndex() >= this._data.count() - 1;\n  };\n  /**\n   * @param {boolean} state true: play, false: stop\n   */\n\n\n  TimelineModel.prototype.setPlayState = function (state) {\n    this.option.autoPlay = !!state;\n  };\n  /**\n   * @return {boolean} true: play, false: stop\n   */\n\n\n  TimelineModel.prototype.getPlayState = function () {\n    return !!this.option.autoPlay;\n  };\n  /**\n   * @private\n   */\n\n\n  TimelineModel.prototype._initData = function () {\n    var thisOption = this.option;\n    var dataArr = thisOption.data || [];\n    var axisType = thisOption.axisType;\n    var names = this._names = [];\n    var processedDataArr;\n\n    if (axisType === 'category') {\n      processedDataArr = [];\n      each(dataArr, function (item, index) {\n        var value = convertOptionIdName(getDataItemValue(item), '');\n        var newItem;\n\n        if (isObject(item)) {\n          newItem = clone(item);\n          newItem.value = index;\n        } else {\n          newItem = index;\n        }\n\n        processedDataArr.push(newItem);\n        names.push(value);\n      });\n    } else {\n      processedDataArr = dataArr;\n    }\n\n    var dimType = {\n      category: 'ordinal',\n      time: 'time',\n      value: 'number'\n    }[axisType] || 'number';\n    var data = this._data = new List([{\n      name: 'value',\n      type: dimType\n    }], this);\n    data.initData(processedDataArr, names);\n  };\n\n  TimelineModel.prototype.getData = function () {\n    return this._data;\n  };\n  /**\n   * @public\n   * @return {Array.<string>} categoreis\n   */\n\n\n  TimelineModel.prototype.getCategories = function () {\n    if (this.get('axisType') === 'category') {\n      return this._names.slice();\n    }\n  };\n\n  TimelineModel.type = 'timeline';\n  /**\n   * @protected\n   */\n\n  TimelineModel.defaultOption = {\n    zlevel: 0,\n    z: 4,\n    show: true,\n    axisType: 'time',\n    realtime: true,\n    left: '20%',\n    top: null,\n    right: '20%',\n    bottom: 0,\n    width: null,\n    height: 40,\n    padding: 5,\n    controlPosition: 'left',\n    autoPlay: false,\n    rewind: false,\n    loop: true,\n    playInterval: 2000,\n    currentIndex: 0,\n    itemStyle: {},\n    label: {\n      color: '#000'\n    },\n    data: []\n  };\n  return TimelineModel;\n}(ComponentModel);\n\nexport default TimelineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport TimelineModel from './TimelineModel';\nimport { DataFormatMixin } from '../../model/mixin/dataFormat';\nimport { mixin } from 'zrender/lib/core/util';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar SliderTimelineModel =\n/** @class */\nfunction (_super) {\n  __extends(SliderTimelineModel, _super);\n\n  function SliderTimelineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SliderTimelineModel.type;\n    return _this;\n  }\n\n  SliderTimelineModel.type = 'timeline.slider';\n  /**\n   * @protected\n   */\n\n  SliderTimelineModel.defaultOption = inheritDefaultOption(TimelineModel.defaultOption, {\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderWidth: 0,\n    orient: 'horizontal',\n    inverse: false,\n    tooltip: {\n      trigger: 'item' // data item may also have tootip attr.\n\n    },\n    symbol: 'circle',\n    symbolSize: 12,\n    lineStyle: {\n      show: true,\n      width: 2,\n      color: '#DAE1F5'\n    },\n    label: {\n      position: 'auto',\n      // When using number, label position is not\n      // restricted by viewRect.\n      // positive: right/bottom, negative: left/top\n      show: true,\n      interval: 'auto',\n      rotate: 0,\n      // formatter: null,\n      // 其余属性默认使用全局文本样式，详见TEXTSTYLE\n      color: '#A4B1D7'\n    },\n    itemStyle: {\n      color: '#A4B1D7',\n      borderWidth: 1\n    },\n    checkpointStyle: {\n      symbol: 'circle',\n      symbolSize: 15,\n      color: '#316bf3',\n      borderColor: '#fff',\n      borderWidth: 2,\n      shadowBlur: 2,\n      shadowOffsetX: 1,\n      shadowOffsetY: 1,\n      shadowColor: 'rgba(0, 0, 0, 0.3)',\n      // borderColor: 'rgba(194,53,49, 0.5)',\n      animation: true,\n      animationDuration: 300,\n      animationEasing: 'quinticInOut'\n    },\n    controlStyle: {\n      show: true,\n      showPlayBtn: true,\n      showPrevBtn: true,\n      showNextBtn: true,\n      itemSize: 24,\n      itemGap: 12,\n      position: 'left',\n      playIcon: 'path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z',\n      stopIcon: 'path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z',\n      // eslint-disable-next-line max-len\n      nextIcon: 'M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z',\n      // eslint-disable-next-line max-len\n      prevIcon: 'M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z',\n      prevBtnSize: 18,\n      nextBtnSize: 18,\n      color: '#A4B1D7',\n      borderColor: '#A4B1D7',\n      borderWidth: 1\n    },\n    emphasis: {\n      label: {\n        show: true,\n        // 其余属性默认使用全局文本样式，详见TEXTSTYLE\n        color: '#6f778d'\n      },\n      itemStyle: {\n        color: '#316BF3'\n      },\n      controlStyle: {\n        color: '#316BF3',\n        borderColor: '#316BF3',\n        borderWidth: 2\n      }\n    },\n    progress: {\n      lineStyle: {\n        color: '#316BF3'\n      },\n      itemStyle: {\n        color: '#316BF3'\n      },\n      label: {\n        color: '#6f778d'\n      }\n    },\n    data: []\n  });\n  return SliderTimelineModel;\n}(TimelineModel);\n\nmixin(SliderTimelineModel, DataFormatMixin.prototype);\nexport default SliderTimelineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\n\nvar TimelineView =\n/** @class */\nfunction (_super) {\n  __extends(TimelineView, _super);\n\n  function TimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TimelineView.type;\n    return _this;\n  }\n\n  TimelineView.type = 'timeline';\n  return TimelineView;\n}(ComponentView);\n\nexport default TimelineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../../coord/Axis';\n/**\n * Extend axis 2d\n */\n\nvar TimelineAxis =\n/** @class */\nfunction (_super) {\n  __extends(TimelineAxis, _super);\n\n  function TimelineAxis(dim, scale, coordExtent, axisType) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n\n    _this.type = axisType || 'value';\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  TimelineAxis.prototype.getLabelModel = function () {\n    // Force override\n    return this.model.getModel('label');\n  };\n  /**\n   * @override\n   */\n\n\n  TimelineAxis.prototype.isHorizontal = function () {\n    return this.model.get('orient') === 'horizontal';\n  };\n\n  return TimelineAxis;\n}(Axis);\n\nexport default TimelineAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport * as matrix from 'zrender/lib/core/matrix';\nimport * as graphic from '../../util/graphic';\nimport { createTextStyle } from '../../label/labelStyle';\nimport * as layout from '../../util/layout';\nimport TimelineView from './TimelineView';\nimport TimelineAxis from './TimelineAxis';\nimport { createSymbol } from '../../util/symbol';\nimport * as numberUtil from '../../util/number';\nimport { merge, each, extend, isString, bind, defaults, retrieve2 } from 'zrender/lib/core/util';\nimport OrdinalScale from '../../scale/Ordinal';\nimport TimeScale from '../../scale/Time';\nimport IntervalScale from '../../scale/Interval';\nimport { parsePercent } from 'zrender/lib/contain/text';\nimport { makeInner } from '../../util/model';\nimport { getECData } from '../../util/innerStore';\nimport { enableHoverEmphasis } from '../../util/states';\nimport { createTooltipMarkup } from '../tooltip/tooltipMarkup';\nvar PI = Math.PI;\nvar labelDataIndexStore = makeInner();\n\nvar SliderTimelineView =\n/** @class */\nfunction (_super) {\n  __extends(SliderTimelineView, _super);\n\n  function SliderTimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SliderTimelineView.type;\n    return _this;\n  }\n\n  SliderTimelineView.prototype.init = function (ecModel, api) {\n    this.api = api;\n  };\n  /**\n   * @override\n   */\n\n\n  SliderTimelineView.prototype.render = function (timelineModel, ecModel, api) {\n    this.model = timelineModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    this.group.removeAll();\n\n    if (timelineModel.get('show', true)) {\n      var layoutInfo_1 = this._layout(timelineModel, api);\n\n      var mainGroup_1 = this._createGroup('_mainGroup');\n\n      var labelGroup = this._createGroup('_labelGroup');\n\n      var axis_1 = this._axis = this._createAxis(layoutInfo_1, timelineModel);\n\n      timelineModel.formatTooltip = function (dataIndex) {\n        var name = axis_1.scale.getLabel({\n          value: dataIndex\n        });\n        return createTooltipMarkup('nameValue', {\n          noName: true,\n          value: name\n        });\n      };\n\n      each(['AxisLine', 'AxisTick', 'Control', 'CurrentPointer'], function (name) {\n        this['_render' + name](layoutInfo_1, mainGroup_1, axis_1, timelineModel);\n      }, this);\n\n      this._renderAxisLabel(layoutInfo_1, labelGroup, axis_1, timelineModel);\n\n      this._position(layoutInfo_1, timelineModel);\n    }\n\n    this._doPlayStop();\n\n    this._updateTicksStatus();\n  };\n  /**\n   * @override\n   */\n\n\n  SliderTimelineView.prototype.remove = function () {\n    this._clearTimer();\n\n    this.group.removeAll();\n  };\n  /**\n   * @override\n   */\n\n\n  SliderTimelineView.prototype.dispose = function () {\n    this._clearTimer();\n  };\n\n  SliderTimelineView.prototype._layout = function (timelineModel, api) {\n    var labelPosOpt = timelineModel.get(['label', 'position']);\n    var orient = timelineModel.get('orient');\n    var viewRect = getViewRect(timelineModel, api);\n    var parsedLabelPos; // Auto label offset.\n\n    if (labelPosOpt == null || labelPosOpt === 'auto') {\n      parsedLabelPos = orient === 'horizontal' ? viewRect.y + viewRect.height / 2 < api.getHeight() / 2 ? '-' : '+' : viewRect.x + viewRect.width / 2 < api.getWidth() / 2 ? '+' : '-';\n    } else if (isString(labelPosOpt)) {\n      parsedLabelPos = {\n        horizontal: {\n          top: '-',\n          bottom: '+'\n        },\n        vertical: {\n          left: '-',\n          right: '+'\n        }\n      }[orient][labelPosOpt];\n    } else {\n      // is number\n      parsedLabelPos = labelPosOpt;\n    }\n\n    var labelAlignMap = {\n      horizontal: 'center',\n      vertical: parsedLabelPos >= 0 || parsedLabelPos === '+' ? 'left' : 'right'\n    };\n    var labelBaselineMap = {\n      horizontal: parsedLabelPos >= 0 || parsedLabelPos === '+' ? 'top' : 'bottom',\n      vertical: 'middle'\n    };\n    var rotationMap = {\n      horizontal: 0,\n      vertical: PI / 2\n    }; // Position\n\n    var mainLength = orient === 'vertical' ? viewRect.height : viewRect.width;\n    var controlModel = timelineModel.getModel('controlStyle');\n    var showControl = controlModel.get('show', true);\n    var controlSize = showControl ? controlModel.get('itemSize') : 0;\n    var controlGap = showControl ? controlModel.get('itemGap') : 0;\n    var sizePlusGap = controlSize + controlGap; // Special label rotate.\n\n    var labelRotation = timelineModel.get(['label', 'rotate']) || 0;\n    labelRotation = labelRotation * PI / 180; // To radian.\n\n    var playPosition;\n    var prevBtnPosition;\n    var nextBtnPosition;\n    var controlPosition = controlModel.get('position', true);\n    var showPlayBtn = showControl && controlModel.get('showPlayBtn', true);\n    var showPrevBtn = showControl && controlModel.get('showPrevBtn', true);\n    var showNextBtn = showControl && controlModel.get('showNextBtn', true);\n    var xLeft = 0;\n    var xRight = mainLength; // position[0] means left, position[1] means middle.\n\n    if (controlPosition === 'left' || controlPosition === 'bottom') {\n      showPlayBtn && (playPosition = [0, 0], xLeft += sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [xLeft, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    } else {\n      // 'top' 'right'\n      showPlayBtn && (playPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [0, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    }\n\n    var axisExtent = [xLeft, xRight];\n\n    if (timelineModel.get('inverse')) {\n      axisExtent.reverse();\n    }\n\n    return {\n      viewRect: viewRect,\n      mainLength: mainLength,\n      orient: orient,\n      rotation: rotationMap[orient],\n      labelRotation: labelRotation,\n      labelPosOpt: parsedLabelPos,\n      labelAlign: timelineModel.get(['label', 'align']) || labelAlignMap[orient],\n      labelBaseline: timelineModel.get(['label', 'verticalAlign']) || timelineModel.get(['label', 'baseline']) || labelBaselineMap[orient],\n      // Based on mainGroup.\n      playPosition: playPosition,\n      prevBtnPosition: prevBtnPosition,\n      nextBtnPosition: nextBtnPosition,\n      axisExtent: axisExtent,\n      controlSize: controlSize,\n      controlGap: controlGap\n    };\n  };\n\n  SliderTimelineView.prototype._position = function (layoutInfo, timelineModel) {\n    // Position is be called finally, because bounding rect is needed for\n    // adapt content to fill viewRect (auto adapt offset).\n    // Timeline may be not all in the viewRect when 'offset' is specified\n    // as a number, because it is more appropriate that label aligns at\n    // 'offset' but not the other edge defined by viewRect.\n    var mainGroup = this._mainGroup;\n    var labelGroup = this._labelGroup;\n    var viewRect = layoutInfo.viewRect;\n\n    if (layoutInfo.orient === 'vertical') {\n      // transform to horizontal, inverse rotate by left-top point.\n      var m = matrix.create();\n      var rotateOriginX = viewRect.x;\n      var rotateOriginY = viewRect.y + viewRect.height;\n      matrix.translate(m, m, [-rotateOriginX, -rotateOriginY]);\n      matrix.rotate(m, m, -PI / 2);\n      matrix.translate(m, m, [rotateOriginX, rotateOriginY]);\n      viewRect = viewRect.clone();\n      viewRect.applyTransform(m);\n    }\n\n    var viewBound = getBound(viewRect);\n    var mainBound = getBound(mainGroup.getBoundingRect());\n    var labelBound = getBound(labelGroup.getBoundingRect());\n    var mainPosition = [mainGroup.x, mainGroup.y];\n    var labelsPosition = [labelGroup.x, labelGroup.y];\n    labelsPosition[0] = mainPosition[0] = viewBound[0][0];\n    var labelPosOpt = layoutInfo.labelPosOpt;\n\n    if (labelPosOpt == null || isString(labelPosOpt)) {\n      // '+' or '-'\n      var mainBoundIdx = labelPosOpt === '+' ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      toBound(labelsPosition, labelBound, viewBound, 1, 1 - mainBoundIdx);\n    } else {\n      var mainBoundIdx = labelPosOpt >= 0 ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      labelsPosition[1] = mainPosition[1] + labelPosOpt;\n    }\n\n    mainGroup.setPosition(mainPosition);\n    labelGroup.setPosition(labelsPosition);\n    mainGroup.rotation = labelGroup.rotation = layoutInfo.rotation;\n    setOrigin(mainGroup);\n    setOrigin(labelGroup);\n\n    function setOrigin(targetGroup) {\n      targetGroup.originX = viewBound[0][0] - targetGroup.x;\n      targetGroup.originY = viewBound[1][0] - targetGroup.y;\n    }\n\n    function getBound(rect) {\n      // [[xmin, xmax], [ymin, ymax]]\n      return [[rect.x, rect.x + rect.width], [rect.y, rect.y + rect.height]];\n    }\n\n    function toBound(fromPos, from, to, dimIdx, boundIdx) {\n      fromPos[dimIdx] += to[dimIdx][boundIdx] - from[dimIdx][boundIdx];\n    }\n  };\n\n  SliderTimelineView.prototype._createAxis = function (layoutInfo, timelineModel) {\n    var data = timelineModel.getData();\n    var axisType = timelineModel.get('axisType');\n    var scale = createScaleByModel(timelineModel, axisType); // Customize scale. The `tickValue` is `dataIndex`.\n\n    scale.getTicks = function () {\n      return data.mapArray(['value'], function (value) {\n        return {\n          value: value\n        };\n      });\n    };\n\n    var dataExtent = data.getDataExtent('value');\n    scale.setExtent(dataExtent[0], dataExtent[1]);\n    scale.niceTicks();\n    var axis = new TimelineAxis('value', scale, layoutInfo.axisExtent, axisType);\n    axis.model = timelineModel;\n    return axis;\n  };\n\n  SliderTimelineView.prototype._createGroup = function (key) {\n    var newGroup = this[key] = new graphic.Group();\n    this.group.add(newGroup);\n    return newGroup;\n  };\n\n  SliderTimelineView.prototype._renderAxisLine = function (layoutInfo, group, axis, timelineModel) {\n    var axisExtent = axis.getExtent();\n\n    if (!timelineModel.get(['lineStyle', 'show'])) {\n      return;\n    }\n\n    var line = new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        y1: 0,\n        x2: axisExtent[1],\n        y2: 0\n      },\n      style: extend({\n        lineCap: 'round'\n      }, timelineModel.getModel('lineStyle').getLineStyle()),\n      silent: true,\n      z2: 1\n    });\n    group.add(line);\n    var progressLine = this._progressLine = new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        x2: this._currentPointer ? this._currentPointer.x : axisExtent[0],\n        y1: 0,\n        y2: 0\n      },\n      style: defaults({\n        lineCap: 'round',\n        lineWidth: line.style.lineWidth\n      }, timelineModel.getModel(['progress', 'lineStyle']).getLineStyle()),\n      silent: true,\n      z2: 1\n    });\n    group.add(progressLine);\n  };\n\n  SliderTimelineView.prototype._renderAxisTick = function (layoutInfo, group, axis, timelineModel) {\n    var _this = this;\n\n    var data = timelineModel.getData(); // Show all ticks, despite ignoring strategy.\n\n    var ticks = axis.scale.getTicks();\n    this._tickSymbols = []; // The value is dataIndex, see the costomized scale.\n\n    each(ticks, function (tick) {\n      var tickCoord = axis.dataToCoord(tick.value);\n      var itemModel = data.getItemModel(tick.value);\n      var itemStyleModel = itemModel.getModel('itemStyle');\n      var hoverStyleModel = itemModel.getModel(['emphasis', 'itemStyle']);\n      var progressStyleModel = itemModel.getModel(['progress', 'itemStyle']);\n      var symbolOpt = {\n        x: tickCoord,\n        y: 0,\n        onclick: bind(_this._changeTimeline, _this, tick.value)\n      };\n      var el = giveSymbol(itemModel, itemStyleModel, group, symbolOpt);\n      el.ensureState('emphasis').style = hoverStyleModel.getItemStyle();\n      el.ensureState('progress').style = progressStyleModel.getItemStyle();\n      enableHoverEmphasis(el);\n      var ecData = getECData(el);\n\n      if (itemModel.get('tooltip')) {\n        ecData.dataIndex = tick.value;\n        ecData.dataModel = timelineModel;\n      } else {\n        ecData.dataIndex = ecData.dataModel = null;\n      }\n\n      _this._tickSymbols.push(el);\n    });\n  };\n\n  SliderTimelineView.prototype._renderAxisLabel = function (layoutInfo, group, axis, timelineModel) {\n    var _this = this;\n\n    var labelModel = axis.getLabelModel();\n\n    if (!labelModel.get('show')) {\n      return;\n    }\n\n    var data = timelineModel.getData();\n    var labels = axis.getViewLabels();\n    this._tickLabels = [];\n    each(labels, function (labelItem) {\n      // The tickValue is dataIndex, see the costomized scale.\n      var dataIndex = labelItem.tickValue;\n      var itemModel = data.getItemModel(dataIndex);\n      var normalLabelModel = itemModel.getModel('label');\n      var hoverLabelModel = itemModel.getModel(['emphasis', 'label']);\n      var progressLabelModel = itemModel.getModel(['progress', 'label']);\n      var tickCoord = axis.dataToCoord(labelItem.tickValue);\n      var textEl = new graphic.Text({\n        x: tickCoord,\n        y: 0,\n        rotation: layoutInfo.labelRotation - layoutInfo.rotation,\n        onclick: bind(_this._changeTimeline, _this, dataIndex),\n        silent: false,\n        style: createTextStyle(normalLabelModel, {\n          text: labelItem.formattedLabel,\n          align: layoutInfo.labelAlign,\n          verticalAlign: layoutInfo.labelBaseline\n        })\n      });\n      textEl.ensureState('emphasis').style = createTextStyle(hoverLabelModel);\n      textEl.ensureState('progress').style = createTextStyle(progressLabelModel);\n      group.add(textEl);\n      enableHoverEmphasis(textEl);\n      labelDataIndexStore(textEl).dataIndex = dataIndex;\n\n      _this._tickLabels.push(textEl);\n    });\n  };\n\n  SliderTimelineView.prototype._renderControl = function (layoutInfo, group, axis, timelineModel) {\n    var controlSize = layoutInfo.controlSize;\n    var rotation = layoutInfo.rotation;\n    var itemStyle = timelineModel.getModel('controlStyle').getItemStyle();\n    var hoverStyle = timelineModel.getModel(['emphasis', 'controlStyle']).getItemStyle();\n    var playState = timelineModel.getPlayState();\n    var inverse = timelineModel.get('inverse', true);\n    makeBtn(layoutInfo.nextBtnPosition, 'next', bind(this._changeTimeline, this, inverse ? '-' : '+'));\n    makeBtn(layoutInfo.prevBtnPosition, 'prev', bind(this._changeTimeline, this, inverse ? '+' : '-'));\n    makeBtn(layoutInfo.playPosition, playState ? 'stop' : 'play', bind(this._handlePlayClick, this, !playState), true);\n\n    function makeBtn(position, iconName, onclick, willRotate) {\n      if (!position) {\n        return;\n      }\n\n      var iconSize = parsePercent(retrieve2(timelineModel.get(['controlStyle', iconName + 'BtnSize']), controlSize), controlSize);\n      var rect = [0, -iconSize / 2, iconSize, iconSize];\n      var btn = makeControlIcon(timelineModel, iconName + 'Icon', rect, {\n        x: position[0],\n        y: position[1],\n        originX: controlSize / 2,\n        originY: 0,\n        rotation: willRotate ? -rotation : 0,\n        rectHover: true,\n        style: itemStyle,\n        onclick: onclick\n      });\n      btn.ensureState('emphasis').style = hoverStyle;\n      group.add(btn);\n      enableHoverEmphasis(btn);\n    }\n  };\n\n  SliderTimelineView.prototype._renderCurrentPointer = function (layoutInfo, group, axis, timelineModel) {\n    var data = timelineModel.getData();\n    var currentIndex = timelineModel.getCurrentIndex();\n    var pointerModel = data.getItemModel(currentIndex).getModel('checkpointStyle');\n    var me = this;\n    var callback = {\n      onCreate: function (pointer) {\n        pointer.draggable = true;\n        pointer.drift = bind(me._handlePointerDrag, me);\n        pointer.ondragend = bind(me._handlePointerDragend, me);\n        pointerMoveTo(pointer, me._progressLine, currentIndex, axis, timelineModel, true);\n      },\n      onUpdate: function (pointer) {\n        pointerMoveTo(pointer, me._progressLine, currentIndex, axis, timelineModel);\n      }\n    }; // Reuse when exists, for animation and drag.\n\n    this._currentPointer = giveSymbol(pointerModel, pointerModel, this._mainGroup, {}, this._currentPointer, callback);\n  };\n\n  SliderTimelineView.prototype._handlePlayClick = function (nextState) {\n    this._clearTimer();\n\n    this.api.dispatchAction({\n      type: 'timelinePlayChange',\n      playState: nextState,\n      from: this.uid\n    });\n  };\n\n  SliderTimelineView.prototype._handlePointerDrag = function (dx, dy, e) {\n    this._clearTimer();\n\n    this._pointerChangeTimeline([e.offsetX, e.offsetY]);\n  };\n\n  SliderTimelineView.prototype._handlePointerDragend = function (e) {\n    this._pointerChangeTimeline([e.offsetX, e.offsetY], true);\n  };\n\n  SliderTimelineView.prototype._pointerChangeTimeline = function (mousePos, trigger) {\n    var toCoord = this._toAxisCoord(mousePos)[0];\n\n    var axis = this._axis;\n    var axisExtent = numberUtil.asc(axis.getExtent().slice());\n    toCoord > axisExtent[1] && (toCoord = axisExtent[1]);\n    toCoord < axisExtent[0] && (toCoord = axisExtent[0]);\n    this._currentPointer.x = toCoord;\n\n    this._currentPointer.markRedraw();\n\n    this._progressLine.shape.x2 = toCoord;\n\n    this._progressLine.dirty();\n\n    var targetDataIndex = this._findNearestTick(toCoord);\n\n    var timelineModel = this.model;\n\n    if (trigger || targetDataIndex !== timelineModel.getCurrentIndex() && timelineModel.get('realtime')) {\n      this._changeTimeline(targetDataIndex);\n    }\n  };\n\n  SliderTimelineView.prototype._doPlayStop = function () {\n    var _this = this;\n\n    this._clearTimer();\n\n    if (this.model.getPlayState()) {\n      this._timer = setTimeout(function () {\n        // Do not cache\n        var timelineModel = _this.model;\n\n        _this._changeTimeline(timelineModel.getCurrentIndex() + (timelineModel.get('rewind', true) ? -1 : 1));\n      }, this.model.get('playInterval'));\n    }\n  };\n\n  SliderTimelineView.prototype._toAxisCoord = function (vertex) {\n    var trans = this._mainGroup.getLocalTransform();\n\n    return graphic.applyTransform(vertex, trans, true);\n  };\n\n  SliderTimelineView.prototype._findNearestTick = function (axisCoord) {\n    var data = this.model.getData();\n    var dist = Infinity;\n    var targetDataIndex;\n    var axis = this._axis;\n    data.each(['value'], function (value, dataIndex) {\n      var coord = axis.dataToCoord(value);\n      var d = Math.abs(coord - axisCoord);\n\n      if (d < dist) {\n        dist = d;\n        targetDataIndex = dataIndex;\n      }\n    });\n    return targetDataIndex;\n  };\n\n  SliderTimelineView.prototype._clearTimer = function () {\n    if (this._timer) {\n      clearTimeout(this._timer);\n      this._timer = null;\n    }\n  };\n\n  SliderTimelineView.prototype._changeTimeline = function (nextIndex) {\n    var currentIndex = this.model.getCurrentIndex();\n\n    if (nextIndex === '+') {\n      nextIndex = currentIndex + 1;\n    } else if (nextIndex === '-') {\n      nextIndex = currentIndex - 1;\n    }\n\n    this.api.dispatchAction({\n      type: 'timelineChange',\n      currentIndex: nextIndex,\n      from: this.uid\n    });\n  };\n\n  SliderTimelineView.prototype._updateTicksStatus = function () {\n    var currentIndex = this.model.getCurrentIndex();\n    var tickSymbols = this._tickSymbols;\n    var tickLabels = this._tickLabels;\n\n    if (tickSymbols) {\n      for (var i = 0; i < tickSymbols.length; i++) {\n        tickSymbols && tickSymbols[i] && tickSymbols[i].toggleState('progress', i < currentIndex);\n      }\n    }\n\n    if (tickLabels) {\n      for (var i = 0; i < tickLabels.length; i++) {\n        tickLabels && tickLabels[i] && tickLabels[i].toggleState('progress', labelDataIndexStore(tickLabels[i]).dataIndex <= currentIndex);\n      }\n    }\n  };\n\n  SliderTimelineView.type = 'timeline.slider';\n  return SliderTimelineView;\n}(TimelineView);\n\nfunction createScaleByModel(model, axisType) {\n  axisType = axisType || model.get('type');\n\n  if (axisType) {\n    switch (axisType) {\n      // Buildin scale\n      case 'category':\n        return new OrdinalScale({\n          ordinalMeta: model.getCategories(),\n          extent: [Infinity, -Infinity]\n        });\n\n      case 'time':\n        return new TimeScale({\n          locale: model.ecModel.getLocaleModel(),\n          useUTC: model.ecModel.get('useUTC')\n        });\n\n      default:\n        // default to be value\n        return new IntervalScale();\n    }\n  }\n}\n\nfunction getViewRect(model, api) {\n  return layout.getLayoutRect(model.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  }, model.get('padding'));\n}\n\nfunction makeControlIcon(timelineModel, objPath, rect, opts) {\n  var style = opts.style;\n  var icon = graphic.createIcon(timelineModel.get(['controlStyle', objPath]), opts || {}, new BoundingRect(rect[0], rect[1], rect[2], rect[3])); // TODO createIcon won't use style in opt.\n\n  if (style) {\n    icon.setStyle(style);\n  }\n\n  return icon;\n}\n/**\n * Create symbol or update symbol\n * opt: basic position and event handlers\n */\n\n\nfunction giveSymbol(hostModel, itemStyleModel, group, opt, symbol, callback) {\n  var color = itemStyleModel.get('color');\n\n  if (!symbol) {\n    var symbolType = hostModel.get('symbol');\n    symbol = createSymbol(symbolType, -1, -1, 2, 2, color);\n    symbol.setStyle('strokeNoScale', true);\n    group.add(symbol);\n    callback && callback.onCreate(symbol);\n  } else {\n    symbol.setColor(color);\n    group.add(symbol); // Group may be new, also need to add.\n\n    callback && callback.onUpdate(symbol);\n  } // Style\n\n\n  var itemStyle = itemStyleModel.getItemStyle(['color']);\n  symbol.setStyle(itemStyle); // Transform and events.\n\n  opt = merge({\n    rectHover: true,\n    z2: 100\n  }, opt, true);\n  var symbolSize = hostModel.get('symbolSize');\n  symbolSize = symbolSize instanceof Array ? symbolSize.slice() : [+symbolSize, +symbolSize];\n  opt.scaleX = symbolSize[0] / 2;\n  opt.scaleY = symbolSize[1] / 2;\n  var symbolOffset = hostModel.get('symbolOffset');\n\n  if (symbolOffset) {\n    opt.x = opt.x || 0;\n    opt.y = opt.y || 0;\n    opt.x += numberUtil.parsePercent(symbolOffset[0], symbolSize[0]);\n    opt.y += numberUtil.parsePercent(symbolOffset[1], symbolSize[1]);\n  }\n\n  var symbolRotate = hostModel.get('symbolRotate');\n  opt.rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  symbol.attr(opt); // FIXME\n  // (1) When symbol.style.strokeNoScale is true and updateTransform is not performed,\n  // getBoundingRect will return wrong result.\n  // (This is supposed to be resolved in zrender, but it is a little difficult to\n  // leverage performance and auto updateTransform)\n  // (2) All of ancesters of symbol do not scale, so we can just updateTransform symbol.\n\n  symbol.updateTransform();\n  return symbol;\n}\n\nfunction pointerMoveTo(pointer, progressLine, dataIndex, axis, timelineModel, noAnimation) {\n  if (pointer.dragging) {\n    return;\n  }\n\n  var pointerModel = timelineModel.getModel('checkpointStyle');\n  var toCoord = axis.dataToCoord(timelineModel.getData().get('value', dataIndex));\n\n  if (noAnimation || !pointerModel.get('animation', true)) {\n    pointer.attr({\n      x: toCoord,\n      y: 0\n    });\n    progressLine && progressLine.attr({\n      shape: {\n        x2: toCoord\n      }\n    });\n  } else {\n    var animationCfg = {\n      duration: pointerModel.get('animationDuration', true),\n      easing: pointerModel.get('animationEasing', true)\n    };\n    pointer.stopAnimation(null, true);\n    pointer.animateTo({\n      x: toCoord,\n      y: 0\n    }, animationCfg);\n    progressLine && progressLine.animateTo({\n      shape: {\n        x2: toCoord\n      }\n    }, animationCfg);\n  }\n}\n\nexport default SliderTimelineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { defaults } from 'zrender/lib/core/util';\nexport function installTimelineAction(registers) {\n  registers.registerAction({\n    type: 'timelineChange',\n    event: 'timelineChanged',\n    update: 'prepareAndUpdate'\n  }, function (payload, ecModel) {\n    var timelineModel = ecModel.getComponent('timeline');\n\n    if (timelineModel && payload.currentIndex != null) {\n      timelineModel.setCurrentIndex(payload.currentIndex);\n\n      if (!timelineModel.get('loop', true) && timelineModel.isIndexMax()) {\n        timelineModel.setPlayState(false);\n      }\n    } // Set normalized currentIndex to payload.\n\n\n    ecModel.resetOption('timeline', {\n      replaceMerge: timelineModel.get('replaceMerge', true)\n    });\n    return defaults({\n      currentIndex: timelineModel.option.currentIndex\n    }, payload);\n  });\n  registers.registerAction({\n    type: 'timelinePlayChange',\n    event: 'timelinePlayChanged',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var timelineModel = ecModel.getComponent('timeline');\n\n    if (timelineModel && payload.playState != null) {\n      timelineModel.setPlayState(payload.playState);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util';\nexport default function timelinePreprocessor(option) {\n  var timelineOpt = option && option.timeline;\n\n  if (!zrUtil.isArray(timelineOpt)) {\n    timelineOpt = timelineOpt ? [timelineOpt] : [];\n  }\n\n  zrUtil.each(timelineOpt, function (opt) {\n    if (!opt) {\n      return;\n    }\n\n    compatibleEC2(opt);\n  });\n}\n\nfunction compatibleEC2(opt) {\n  var type = opt.type;\n  var ec2Types = {\n    'number': 'value',\n    'time': 'time'\n  }; // Compatible with ec2\n\n  if (ec2Types[type]) {\n    opt.axisType = ec2Types[type];\n    delete opt.type;\n  }\n\n  transferItem(opt);\n\n  if (has(opt, 'controlPosition')) {\n    var controlStyle = opt.controlStyle || (opt.controlStyle = {});\n\n    if (!has(controlStyle, 'position')) {\n      controlStyle.position = opt.controlPosition;\n    }\n\n    if (controlStyle.position === 'none' && !has(controlStyle, 'show')) {\n      controlStyle.show = false;\n      delete controlStyle.position;\n    }\n\n    delete opt.controlPosition;\n  }\n\n  zrUtil.each(opt.data || [], function (dataItem) {\n    if (zrUtil.isObject(dataItem) && !zrUtil.isArray(dataItem)) {\n      if (!has(dataItem, 'value') && has(dataItem, 'name')) {\n        // In ec2, using name as value.\n        dataItem.value = dataItem.name;\n      }\n\n      transferItem(dataItem);\n    }\n  });\n}\n\nfunction transferItem(opt) {\n  var itemStyle = opt.itemStyle || (opt.itemStyle = {});\n  var itemStyleEmphasis = itemStyle.emphasis || (itemStyle.emphasis = {}); // Transfer label out\n\n  var label = opt.label || opt.label || {};\n  var labelNormal = label.normal || (label.normal = {});\n  var excludeLabelAttr = {\n    normal: 1,\n    emphasis: 1\n  };\n  zrUtil.each(label, function (value, name) {\n    if (!excludeLabelAttr[name] && !has(labelNormal, name)) {\n      labelNormal[name] = value;\n    }\n  });\n\n  if (itemStyleEmphasis.label && !has(label, 'emphasis')) {\n    label.emphasis = itemStyleEmphasis.label;\n    delete itemStyleEmphasis.label;\n  }\n}\n\nfunction has(obj, attr) {\n  return obj.hasOwnProperty(attr);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport SliderTimelineModel from './SliderTimelineModel';\nimport SliderTimelineView from './SliderTimelineView';\nimport { installTimelineAction } from './timelineAction';\nimport preprocessor from './preprocessor';\nexport function install(registers) {\n  registers.registerComponentModel(SliderTimelineModel);\n  registers.registerComponentView(SliderTimelineView);\n  registers.registerSubTypeDefaulter('timeline', function () {\n    // Only slider now.\n    return 'slider';\n  });\n  installTimelineAction(registers);\n  registers.registerPreprocessor(preprocessor);\n}","\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { Trade, PairHistory, PlotConfig } from '@/types';\nimport randomColor from '@/shared/randomColor';\nimport { roundTimeframe } from '@/shared/timemath';\nimport ECharts from 'vue-echarts';\n\nimport { use } from 'echarts/core';\nimport { EChartsOption, SeriesOption, ScatterSeriesOption } from 'echarts';\nimport { CanvasRenderer } from 'echarts/renderers';\nimport { CandlestickChart, LineChart, BarChart, ScatterChart } from 'echarts/charts';\nimport {\n  AxisPointerComponent,\n  CalendarComponent,\n  DatasetComponent,\n  DataZoomComponent,\n  GridComponent,\n  LegendComponent,\n  TimelineComponent,\n  TitleComponent,\n  TooltipComponent,\n  ToolboxComponent,\n  VisualMapComponent,\n  VisualMapPiecewiseComponent,\n} from 'echarts/components';\n\nuse([\n  AxisPointerComponent,\n  CalendarComponent,\n  DatasetComponent,\n  DataZoomComponent,\n  GridComponent,\n  LegendComponent,\n  ToolboxComponent,\n  TimelineComponent,\n  TitleComponent,\n  TooltipComponent,\n  VisualMapComponent,\n  VisualMapPiecewiseComponent,\n\n  CandlestickChart,\n  BarChart,\n  LineChart,\n  ScatterChart,\n  CanvasRenderer,\n]);\n\n// Chart default options\nconst MARGINLEFT = '4%';\nconst MARGINRIGHT = '1%';\n\n// Binance colors\nconst upColor = '#2ed191';\nconst upBorderColor = '#19d189';\nconst downColor = '#f84960';\nconst downBorderColor = '#e33249';\n\nconst buySignalColor = '#00ff26';\nconst sellSignalColor = '#faba25';\nconst tradeBuyColor = 'cyan';\nconst tradeSellColor = 'pink';\n\n@Component({\n  components: { 'v-chart': ECharts },\n})\nexport default class CandleChart extends Vue {\n  $refs!: {\n    candleChart: typeof ECharts;\n  };\n\n  @Prop({ required: false, default: [] }) readonly trades!: Array<Trade>;\n\n  @Prop({ required: true }) readonly dataset!: PairHistory;\n\n  @Prop({ default: true }) readonly useUTC!: boolean;\n\n  @Prop({ required: true }) plotConfig!: PlotConfig;\n\n  @Prop({ default: 'dark' }) theme!: string;\n\n  buyData = [] as Array<number>[];\n\n  sellData = [] as Array<number>[];\n\n  chartOptions: EChartsOption = {};\n\n  @Watch('dataset')\n  datasetChanged() {\n    this.updateChart();\n  }\n\n  @Watch('plotConfig')\n  plotConfigChanged() {\n    this.initializeChartOptions();\n  }\n\n  get strategy() {\n    return this.dataset ? this.dataset.strategy : '';\n  }\n\n  get pair() {\n    return this.dataset ? this.dataset.pair : '';\n  }\n\n  get timeframe() {\n    return this.dataset ? this.dataset.timeframe : '';\n  }\n\n  get timeframems() {\n    return this.dataset ? this.dataset.timeframe_ms : 0;\n  }\n\n  get datasetColumns() {\n    return this.dataset ? this.dataset.columns : [];\n  }\n\n  get hasData() {\n    return this.dataset !== null && typeof this.dataset === 'object';\n  }\n\n  get filteredTrades() {\n    return this.trades.filter((item: Trade) => item.pair === this.pair);\n  }\n\n  mounted() {\n    this.initializeChartOptions();\n  }\n\n  get chartTitle() {\n    return `${this.strategy} - ${this.pair} - ${this.timeframe}`;\n  }\n\n  initializeChartOptions() {\n    this.chartOptions = {\n      title: [\n        {\n          text: this.chartTitle,\n          show: true,\n        },\n      ],\n      backgroundColor: 'rgba(0, 0, 0, 0)',\n      useUTC: this.useUTC,\n      animation: false,\n      legend: {\n        // Initial legend, further entries are pushed to the below list\n        data: ['Candles', 'Volume', 'Buy', 'Sell'],\n        right: '1%',\n      },\n      tooltip: {\n        show: true,\n        trigger: 'axis',\n        backgroundColor: 'rgba(80,80,80,0.7)',\n        borderWidth: 0,\n        textStyle: {\n          color: '#fff',\n        },\n        axisPointer: {\n          type: 'cross',\n          lineStyle: {\n            color: '#cccccc',\n            width: 1,\n            opacity: 1,\n          },\n        },\n        // positioning copied from https://echarts.apache.org/en/option.html#tooltip.position\n        position(pos, params, dom, rect, size) {\n          // tooltip will be fixed on the right if mouse hovering on the left,\n          // and on the left if hovering on the right.\n          const obj = { top: 60 };\n          obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)]] = 5;\n          return obj;\n        },\n      },\n      axisPointer: {\n        link: [{ xAxisIndex: 'all' }],\n        label: {\n          backgroundColor: '#777',\n        },\n      },\n      xAxis: [\n        {\n          type: 'time',\n          scale: true,\n          boundaryGap: false,\n          axisLine: { onZero: false },\n          axisTick: { show: true },\n          axisLabel: { show: true },\n          position: 'top',\n          splitLine: { show: false },\n          splitNumber: 20,\n          min: 'dataMin',\n          max: 'dataMax',\n        },\n        {\n          type: 'time',\n          gridIndex: 1,\n          scale: true,\n          boundaryGap: false,\n          axisLine: { onZero: false },\n          axisTick: { show: false },\n          axisLabel: { show: false },\n          splitLine: { show: false },\n          splitNumber: 20,\n          min: 'dataMin',\n          max: 'dataMax',\n        },\n      ],\n      yAxis: [\n        {\n          scale: true,\n        },\n        {\n          scale: true,\n          gridIndex: 1,\n          splitNumber: 2,\n          axisLabel: { show: false },\n          axisLine: { show: false },\n          axisTick: { show: false },\n          splitLine: { show: false },\n        },\n      ],\n      dataZoom: [\n        // Start values are recalculated once the data is known\n        {\n          type: 'inside',\n          xAxisIndex: [0, 1],\n          start: 80,\n          end: 100,\n        },\n        {\n          show: true,\n          xAxisIndex: [0, 1],\n          type: 'slider',\n          bottom: 10,\n          start: 80,\n          end: 100,\n        },\n      ],\n      // visualMap: {\n      //   //  TODO: this would allow to colorize volume bars (if we'd want this)\n      //   //  Needs green / red indicator column in data.\n      //   show: true,\n      //   seriesIndex: 1,\n      //   dimension: 5,\n      //   pieces: [\n      //     {\n      //       max: 500000.0,\n      //       color: downColor,\n      //     },\n      //     {\n      //       min: 500000.0,\n      //       color: upColor,\n      //     },\n      //   ],\n      // },\n    };\n\n    console.log('Initialized');\n    this.updateChart(true);\n  }\n\n  updateChart(initial = false) {\n    if (!this.hasData) {\n      return;\n    }\n    if (this.chartOptions?.title) {\n      this.chartOptions.title[0].text = this.chartTitle;\n    }\n    const colDate = this.dataset.columns.findIndex((el) => el === '__date_ts');\n    const colOpen = this.dataset.columns.findIndex((el) => el === 'open');\n    const colHigh = this.dataset.columns.findIndex((el) => el === 'high');\n    const colLow = this.dataset.columns.findIndex((el) => el === 'low');\n    const colClose = this.dataset.columns.findIndex((el) => el === 'close');\n    const colVolume = this.dataset.columns.findIndex((el) => el === 'volume');\n    const colBuyData = this.dataset.columns.findIndex((el) => el === '_buy_signal_open');\n    const colSellData = this.dataset.columns.findIndex((el) => el === '_sell_signal_open');\n    const subplotCount =\n      'subplots' in this.plotConfig ? Object.keys(this.plotConfig.subplots).length : 0;\n\n    if (this.chartOptions?.dataZoom && Array.isArray(this.chartOptions?.dataZoom)) {\n      // Only set zoom once ...\n      if (initial) {\n        const startingZoom = (1 - 250 / this.dataset.length) * 100;\n        this.chartOptions.dataZoom.forEach((el, i) => {\n          if (this.chartOptions && this.chartOptions.dataZoom) {\n            this.chartOptions.dataZoom[i].start = startingZoom;\n          }\n        });\n      } else {\n        // Remove start/end settings after chart initialization to avoid chart resetting\n        this.chartOptions.dataZoom.forEach((el, i) => {\n          if (this.chartOptions && this.chartOptions.dataZoom) {\n            delete this.chartOptions.dataZoom[i].start;\n            delete this.chartOptions.dataZoom[i].end;\n          }\n        });\n      }\n    }\n\n    const options: EChartsOption = {\n      dataset: {\n        source: this.dataset.data,\n      },\n      grid: [\n        {\n          left: MARGINLEFT,\n          right: MARGINRIGHT,\n          // Grid Layout from bottom to top\n          bottom: `${subplotCount * 10 + 10}%`,\n        },\n        {\n          // Volume\n          left: MARGINLEFT,\n          right: MARGINRIGHT,\n          // Grid Layout from bottom to top\n          bottom: `${subplotCount * 10 + 5}%`,\n          height: '10%',\n        },\n      ],\n\n      series: [\n        {\n          name: 'Candles',\n          type: 'candlestick',\n          barWidth: '80%',\n          itemStyle: {\n            color: upColor,\n            color0: downColor,\n            borderColor: upBorderColor,\n            borderColor0: downBorderColor,\n          },\n          encode: {\n            x: colDate,\n            // open, close, low, high\n            y: [colOpen, colClose, colLow, colHigh],\n          },\n        },\n        {\n          name: 'Volume',\n          type: 'bar',\n          xAxisIndex: 1,\n          yAxisIndex: 1,\n          itemStyle: {\n            color: '#777777',\n          },\n          large: true,\n          encode: {\n            x: colDate,\n            y: colVolume,\n          },\n        },\n        {\n          name: 'Buy',\n          type: 'scatter',\n          symbol: 'triangle',\n          symbolSize: 10,\n          xAxisIndex: 0,\n          yAxisIndex: 0,\n          itemStyle: {\n            color: buySignalColor,\n          },\n          encode: {\n            x: colDate,\n            y: colBuyData,\n          },\n        },\n        {\n          name: 'Sell',\n          type: 'scatter',\n          symbol: 'diamond',\n          symbolSize: 8,\n          xAxisIndex: 0,\n          yAxisIndex: 0,\n          itemStyle: {\n            color: sellSignalColor,\n          },\n          encode: {\n            x: colDate,\n            y: colSellData,\n          },\n        },\n      ],\n    };\n\n    // Merge this into original data\n    Object.assign(this.chartOptions, options);\n\n    if ('main_plot' in this.plotConfig) {\n      Object.entries(this.plotConfig.main_plot).forEach(([key, value]) => {\n        const col = this.dataset.columns.findIndex((el) => el === key);\n        if (col > 1) {\n          if (!Array.isArray(this.chartOptions.legend) && this.chartOptions.legend?.data) {\n            this.chartOptions.legend.data.push(key);\n          }\n          const sp: SeriesOption = {\n            name: key,\n            type: value.type || 'line',\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            itemStyle: {\n              color: value.color,\n            },\n            encode: {\n              x: colDate,\n              y: col,\n            },\n            showSymbol: false,\n          };\n          if (Array.isArray(this.chartOptions.series)) {\n            this.chartOptions.series.push(sp);\n          }\n        } else {\n          console.log(`element ${key} for main plot not found in columns.`);\n        }\n      });\n    }\n\n    // START Subplots\n    if ('subplots' in this.plotConfig) {\n      let plotIndex = 2;\n      Object.entries(this.plotConfig.subplots).forEach(([key, value]) => {\n        // define yaxis\n        if (Array.isArray(this.chartOptions.yAxis)) {\n          this.chartOptions.yAxis.push({\n            scale: true,\n            gridIndex: plotIndex,\n            name: key,\n            nameLocation: 'middle',\n            nameGap: 60,\n            axisLabel: { show: true },\n            axisLine: { show: false },\n            axisTick: { show: false },\n            splitLine: { show: false },\n          });\n        }\n        if (Array.isArray(this.chartOptions.xAxis)) {\n          this.chartOptions.xAxis.push({\n            type: 'time',\n            scale: true,\n            gridIndex: plotIndex,\n            boundaryGap: false,\n            axisLine: { onZero: false },\n            axisTick: { show: false },\n            axisLabel: { show: false },\n            splitLine: { show: false },\n            splitNumber: 20,\n          });\n        }\n        if (Array.isArray(this.chartOptions.dataZoom)) {\n          this.chartOptions.dataZoom.forEach((el) =>\n            el.xAxisIndex && Array.isArray(el.xAxisIndex) ? el.xAxisIndex.push(plotIndex) : null,\n          );\n        }\n        if (this.chartOptions.grid && Array.isArray(this.chartOptions.grid)) {\n          this.chartOptions.grid.push({\n            left: MARGINLEFT,\n            right: MARGINRIGHT,\n            bottom: `${plotIndex * 8}%`,\n            height: '8%',\n          });\n        }\n        Object.entries(value).forEach(([sk, sv]) => {\n          // entries per subplot\n          const col = this.dataset.columns.findIndex((el) => el === sk);\n          if (col > 0) {\n            if (!Array.isArray(this.chartOptions.legend) && this.chartOptions.legend?.data) {\n              this.chartOptions.legend.data.push(sk);\n            }\n            const sp: SeriesOption = {\n              name: sk,\n              type: sv.type || 'line',\n              xAxisIndex: plotIndex,\n              yAxisIndex: plotIndex,\n              itemStyle: {\n                color: sv.color || randomColor(),\n              },\n              encode: {\n                x: colDate,\n                y: col,\n              },\n              showSymbol: false,\n            };\n            if (this.chartOptions.series && Array.isArray(this.chartOptions.series)) {\n              this.chartOptions.series.push(sp);\n            }\n          } else {\n            console.log(`element ${sk} was not found in the columns.`);\n          }\n        });\n\n        plotIndex += 1;\n      });\n    }\n    // END Subplots\n    // Last subplot should show xAxis labels\n    // if (options.xAxis && Array.isArray(options.xAxis)) {\n    //   options.xAxis[options.xAxis.length - 1].axisLabel.show = true;\n    //   options.xAxis[options.xAxis.length - 1].axisTick.show = true;\n    // }\n    if (this.chartOptions.grid && Array.isArray(this.chartOptions.grid)) {\n      // Last subplot is bottom\n      this.chartOptions.grid[this.chartOptions.grid.length - 1].bottom = '50px';\n      delete this.chartOptions.grid[this.chartOptions.grid.length - 1].top;\n    }\n    const { trades, tradesClose } = this.getTradeEntries();\n\n    const name = 'Trades';\n    const nameClose = 'Trades Close';\n    if (!Array.isArray(this.chartOptions.legend) && this.chartOptions.legend?.data) {\n      this.chartOptions.legend.data.push(name);\n    }\n    const sp: ScatterSeriesOption = {\n      name,\n      type: 'scatter',\n      xAxisIndex: 0,\n      yAxisIndex: 0,\n      itemStyle: {\n        color: tradeBuyColor,\n      },\n      data: trades,\n    };\n    if (Array.isArray(this.chartOptions?.series)) {\n      this.chartOptions.series.push(sp);\n    }\n    if (!Array.isArray(this.chartOptions.legend) && this.chartOptions.legend?.data) {\n      this.chartOptions.legend.data.push(nameClose);\n    }\n    const closeSeries: ScatterSeriesOption = {\n      name: nameClose,\n      type: 'scatter',\n      xAxisIndex: 0,\n      yAxisIndex: 0,\n      itemStyle: {\n        color: tradeSellColor,\n      },\n      data: tradesClose,\n    };\n    if (this.chartOptions.series && Array.isArray(this.chartOptions.series)) {\n      this.chartOptions.series.push(closeSeries);\n    }\n\n    console.log('chartOptions', this.chartOptions);\n\n    this.$refs.candleChart.setOption(this.chartOptions);\n  }\n\n  /** Return trade entries for charting */\n  getTradeEntries() {\n    const trades: (string | number)[][] = [];\n    const tradesClose: (string | number)[][] = [];\n    for (let i = 0, len = this.filteredTrades.length; i < len; i += 1) {\n      const trade: Trade = this.filteredTrades[i];\n      if (\n        trade.open_timestamp >= this.dataset.data_start_ts &&\n        trade.open_timestamp <= this.dataset.data_stop_ts\n      ) {\n        trades.push([roundTimeframe(this.timeframems, trade.open_timestamp), trade.open_rate]);\n      }\n      if (\n        trade.close_timestamp !== undefined &&\n        trade.close_timestamp < this.dataset.data_stop_ts &&\n        trade.close_timestamp > this.dataset.data_start_ts\n      ) {\n        if (trade.close_date !== undefined && trade.close_rate !== undefined) {\n          tradesClose.push([\n            roundTimeframe(this.timeframems, trade.close_timestamp),\n            trade.close_rate,\n          ]);\n        }\n      }\n    }\n    return { trades, tradesClose };\n  }\n\n  // createSignalData(colDate: number, colOpen: number, colBuy: number, colSell: number): void {\n  // Calculate Buy and sell Series\n  // if (!this.signalsCalculated) {\n  //   // Generate Buy and sell array (using open rate to display marker)\n  //   for (let i = 0, len = this.dataset.data.length; i < len; i += 1) {\n  //     if (this.dataset.data[i][colBuy] === 1) {\n  //       this.buyData.push([this.dataset.data[i][colDate], this.dataset.data[i][colOpen]]);\n  //     }\n  //     if (this.dataset.data[i][colSell] === 1) {\n  //       this.sellData.push([this.dataset.data[i][colDate], this.dataset.data[i][colOpen]]);\n  //     }\n  //   }\n  //   this.signalsCalculated = true;\n  // }\n  // }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CandleChart.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CandleChart.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CandleChart.vue?vue&type=template&id=45287fd8&scoped=true&\"\nimport script from \"./CandleChart.vue?vue&type=script&lang=ts&\"\nexport * from \"./CandleChart.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CandleChart.vue?vue&type=style&index=0&id=45287fd8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"45287fd8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.columns)?_c('div',[_c('div',{staticClass:\"col-mb-3 ml-2\"},[_c('b-form-radio-group',{staticClass:\"w-100\",attrs:{\"options\":_vm.plotOptions,\"buttons\":\"\",\"button-variant\":\"outline-primary\"},model:{value:(_vm.plotOption),callback:function ($$v) {_vm.plotOption=$$v},expression:\"plotOption\"}})],1),(_vm.plotOption == 'subplots')?_c('div',{staticClass:\"col-mb-3\"},[_c('hr'),_c('b-form-group',{attrs:{\"label\":\"Subplot\",\"label-for\":\"FieldSel\"}},[_c('b-form-select',{attrs:{\"id\":\"FieldSel\",\"options\":_vm.subplots,\"select-size\":4},model:{value:(_vm.selSubPlot),callback:function ($$v) {_vm.selSubPlot=$$v},expression:\"selSubPlot\"}})],1)],1):_vm._e(),(_vm.plotOption == 'subplots')?_c('b-form-group',{attrs:{\"label\":\"New subplot\",\"label-for\":\"newSubplot\"}},[_c('b-input-group',{attrs:{\"size\":\"sm\"}},[_c('b-form-input',{staticClass:\"addPlot\",attrs:{\"id\":\"newSubplot\"},model:{value:(_vm.newSubplotName),callback:function ($$v) {_vm.newSubplotName=$$v},expression:\"newSubplotName\"}}),_c('b-input-group-append',[_c('b-button',{on:{\"click\":_vm.addSubplot}},[_vm._v(\"+\")]),(_vm.selSubPlot)?_c('b-button',{on:{\"click\":_vm.delSubplot}},[_vm._v(\"-\")]):_vm._e()],1)],1)],1):_vm._e(),_c('hr'),_c('div',{staticClass:\"row\"},[_c('b-form-group',{staticClass:\"col\",attrs:{\"label\":\"Add indicator\",\"label-for\":\"indicatorSelector\"}},[_c('b-form-select',{attrs:{\"id\":\"indicatorSelector\",\"options\":_vm.columns,\"select-size\":4},model:{value:(_vm.selAvailableIndicator),callback:function ($$v) {_vm.selAvailableIndicator=$$v},expression:\"selAvailableIndicator\"}})],1),_c('div',{staticClass:\"col-1 px-0 text-center\"},[_c('b-button',{staticClass:\"mt-5\",attrs:{\"variant\":\"primary\",\"title\":\"Add indicator to plot\",\"size\":\"sm\",\"disabled\":!_vm.selAvailableIndicator},on:{\"click\":_vm.addIndicator}},[_vm._v(\" > \")]),_c('b-button',{attrs:{\"variant\":\"primary\",\"title\":\"Remove indicator to plot\",\"size\":\"sm\",\"disabled\":!_vm.selIndicator},on:{\"click\":_vm.removeIndicator}},[_vm._v(\" < \")])],1),_c('b-form-group',{staticClass:\"col\",attrs:{\"label\":\"Used indicators\",\"label-for\":\"selectedIndicators\"}},[_c('b-form-select',{attrs:{\"id\":\"selectedIndicators\",\"options\":_vm.usedColumns,\"select-size\":4},model:{value:(_vm.selIndicator),callback:function ($$v) {_vm.selIndicator=$$v},expression:\"selIndicator\"}})],1)],1),_c('b-form-group',{attrs:{\"label\":\"Choose type\",\"label-for\":\"plotTypeSelector\"}},[_c('b-form-select',{attrs:{\"id\":\"plotTypeSelector\",\"options\":_vm.availableGraphTypes},model:{value:(_vm.graphType),callback:function ($$v) {_vm.graphType=$$v},expression:\"graphType\"}})],1),_c('hr'),_c('b-form-group',{attrs:{\"label\":\"Color\",\"label-for\":\"colsel\",\"size\":\"sm\"}},[_c('b-input-group',[_c('b-input-group-prepend',[_c('div',{staticClass:\"colorbox mr-2\",style:({ 'background-color': _vm.selColor })})]),_c('b-form-input',{attrs:{\"id\":\"colsel\",\"size\":\"sm\"},model:{value:(_vm.selColor),callback:function ($$v) {_vm.selColor=$$v},expression:\"selColor\"}}),_c('b-input-group-append',[_c('b-button',{attrs:{\"variant\":\"primary\",\"size\":\"sm\"},on:{\"click\":_vm.newColor}},[_vm._v(\"↻\")])],1)],1)],1),_c('hr'),_c('b-form-group',{attrs:{\"label\":\"Plot config name\",\"label-for\":\"idPlotConfigName\"}},[_c('b-form-input',{attrs:{\"id\":\"idPlotConfigName\",\"options\":_vm.availableGraphTypes},model:{value:(_vm.plotConfigName),callback:function ($$v) {_vm.plotConfigName=$$v},expression:\"plotConfigName\"}})],1),_c('div',{staticClass:\"row\"},[_c('b-button',{staticClass:\"ml-3\",attrs:{\"variant\":\"primary\",\"size\":\"sm\"},on:{\"click\":_vm.loadPlotConfig}},[_vm._v(\"Load\")]),_c('b-button',{staticClass:\"ml-1\",attrs:{\"variant\":\"primary\",\"size\":\"sm\"},on:{\"click\":_vm.loadPlotConfigFromStrategy}},[_vm._v(\" Load from strategy \")]),_c('b-button',{staticClass:\"ml-1\",attrs:{\"variant\":\"primary\",\"size\":\"sm\",\"data-toggle\":\"tooltip\",\"title\":\"Save configuration\"},on:{\"click\":_vm.savePlotConfig}},[_vm._v(\"Save\")]),_c('b-button',{staticClass:\"ml-1\",attrs:{\"id\":\"showButton\",\"variant\":\"primary\",\"size\":\"sm\",\"title\":\"Show configuration for easy transfer to a strategy\"},on:{\"click\":function($event){_vm.showConfig = !_vm.showConfig}}},[_vm._v(\"Show\")]),(_vm.showConfig)?_c('b-button',{staticClass:\"ml-1\",attrs:{\"variant\":\"primary\",\"size\":\"sm\",\"title\":\"Load configuration from text box below\"},on:{\"click\":_vm.loadConfigFromString}},[_vm._v(\"Load from String\")]):_vm._e()],1),(_vm.showConfig)?_c('div',{staticClass:\"col-mb-5 ml-2 mt-2\"},[_c('b-textarea',{staticClass:\"textArea\",attrs:{\"id\":\"TextArea\",\"size\":\"sm\",\"state\":_vm.tempPlotConfigValid},model:{value:(_vm.plotConfigJson),callback:function ($$v) {_vm.plotConfigJson=$$v},expression:\"plotConfigJson\"}})],1):_vm._e()],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Emit } from 'vue-property-decorator';\nimport { namespace } from 'vuex-class';\nimport { PlotConfig, EMPTY_PLOTCONFIG } from '@/types';\nimport randomColor from '@/shared/randomColor';\nimport { getCustomPlotConfig } from '@/shared/storage';\n\nconst ftbot = namespace('ftbot');\n\n@Component({})\nexport default class PlotConfigurator extends Vue {\n  @Prop({ required: true }) value!: PlotConfig;\n\n  @Prop({ required: true }) columns!: Array<string>;\n\n  @Emit('input')\n  emitPlotConfig() {\n    return this.plotConfig;\n  }\n\n  @ftbot.Action getStrategyPlotConfig;\n\n  @ftbot.State strategyPlotConfig;\n\n  plotConfig: PlotConfig = EMPTY_PLOTCONFIG;\n\n  plotOptions = [\n    { text: 'Main Plot', value: 'main_plot' },\n    { text: 'Subplots', value: 'subplots' },\n  ];\n\n  plotOption = 'main_plot';\n\n  plotConfigName = 'default';\n\n  newSubplotName = '';\n\n  selAvailableIndicator = '';\n\n  selIndicator = '';\n\n  graphType = 'line';\n\n  availableGraphTypes = ['line', 'bar', 'scatter'];\n\n  showConfig = false;\n\n  selSubPlot = '';\n\n  tempPlotConfig?: PlotConfig = undefined;\n\n  tempPlotConfigValid = true;\n\n  selColor = randomColor();\n\n  @ftbot.Mutation saveCustomPlotConfig;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  @ftbot.Mutation updatePlotConfigName!: (plotConfigName: string) => void;\n\n  @ftbot.State('plotConfigName') usedPlotConfigName!: string;\n\n  get plotConfigJson() {\n    return JSON.stringify(this.plotConfig, null, 2);\n  }\n\n  set plotConfigJson(newValue: string) {\n    try {\n      this.tempPlotConfig = JSON.parse(newValue);\n      // TODO: Should Validate schema validity (should be PlotConfig type...)\n      this.tempPlotConfigValid = true;\n    } catch (err) {\n      this.tempPlotConfigValid = false;\n    }\n  }\n\n  get subplots() {\n    // Subplot keys (for selection window)\n    return Object.keys(this.plotConfig.subplots);\n  }\n\n  get usedColumns() {\n    if (this.isMainPlot) {\n      return Object.keys(this.plotConfig.main_plot);\n    }\n    if (this.selSubPlot in this.plotConfig[this.plotOption]) {\n      return Object.keys(this.plotConfig[this.plotOption][this.selSubPlot]);\n    }\n    return [];\n  }\n\n  get isMainPlot() {\n    return this.plotOption === 'main_plot';\n  }\n\n  mounted() {\n    this.plotConfig = this.value;\n    this.plotConfigName = this.usedPlotConfigName;\n  }\n\n  newColor() {\n    this.selColor = randomColor();\n  }\n\n  addIndicator() {\n    console.log(this.plotConfig);\n\n    const { plotConfig } = this;\n    if (this.isMainPlot) {\n      console.log(`Adding ${this.selAvailableIndicator} to MainPlot`);\n      plotConfig[this.plotOption][this.selAvailableIndicator] = {\n        color: this.selColor,\n        type: this.graphType,\n      };\n    } else {\n      console.log(`Adding ${this.selAvailableIndicator} to ${this.selSubPlot}`);\n      plotConfig[this.plotOption][this.selSubPlot][this.selAvailableIndicator] = {\n        color: this.selColor,\n        type: this.graphType,\n      };\n    }\n\n    this.plotConfig = { ...plotConfig };\n    this.selAvailableIndicator = '';\n    // Reset random color\n    this.newColor();\n    this.emitPlotConfig();\n  }\n\n  removeIndicator() {\n    console.log(this.plotConfig);\n    const { plotConfig } = this;\n    if (this.isMainPlot) {\n      console.log(`Removing ${this.selIndicator} from MainPlot`);\n      delete plotConfig[this.plotOption][this.selIndicator];\n    } else {\n      console.log(`Removing ${this.selIndicator} from ${this.selSubPlot}`);\n      delete plotConfig[this.plotOption][this.selSubPlot][this.selIndicator];\n    }\n\n    this.plotConfig = { ...plotConfig };\n    console.log(this.plotConfig);\n    this.selIndicator = '';\n    this.emitPlotConfig();\n  }\n\n  addSubplot() {\n    this.plotConfig.subplots = {\n      ...this.plotConfig.subplots,\n      [this.newSubplotName]: {},\n    };\n    this.selSubPlot = this.newSubplotName;\n    this.newSubplotName = '';\n    console.log(this.plotConfig);\n    this.emitPlotConfig();\n  }\n\n  delSubplot() {\n    delete this.plotConfig.subplots[this.selSubPlot];\n    this.plotConfig.subplots = { ...this.plotConfig.subplots };\n  }\n\n  savePlotConfig() {\n    this.saveCustomPlotConfig({ [this.plotConfigName]: this.plotConfig });\n  }\n\n  loadPlotConfig() {\n    this.plotConfig = getCustomPlotConfig(this.plotConfigName);\n    console.log(this.plotConfig);\n    console.log('loading config');\n    this.emitPlotConfig();\n  }\n\n  loadConfigFromString() {\n    // this.plotConfig = JSON.parse();\n    if (this.tempPlotConfig !== undefined && this.tempPlotConfigValid) {\n      this.plotConfig = this.tempPlotConfig;\n      this.emitPlotConfig();\n    }\n  }\n\n  async loadPlotConfigFromStrategy() {\n    await this.getStrategyPlotConfig();\n    this.plotConfig = this.strategyPlotConfig;\n    this.emitPlotConfig();\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlotConfigurator.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlotConfigurator.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PlotConfigurator.vue?vue&type=template&id=b343617c&scoped=true&\"\nimport script from \"./PlotConfigurator.vue?vue&type=script&lang=ts&\"\nexport * from \"./PlotConfigurator.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PlotConfigurator.vue?vue&type=style&index=0&id=b343617c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b343617c\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { Getter, namespace } from 'vuex-class';\nimport {\n  Trade,\n  PairHistory,\n  EMPTY_PLOTCONFIG,\n  PlotConfig,\n  PairCandlePayload,\n  PairHistoryPayload,\n} from '@/types';\nimport CandleChart from '@/components/charts/CandleChart.vue';\nimport PlotConfigurator from '@/components/charts/PlotConfigurator.vue';\nimport { getCustomPlotConfig, getPlotConfigName } from '@/shared/storage';\nimport { BotStoreGetters } from '@/store/modules/ftbot';\n\nconst ftbot = namespace('ftbot');\n\n@Component({ components: { CandleChart, PlotConfigurator } })\nexport default class CandleChartContainer extends Vue {\n  @Prop({ required: true }) readonly availablePairs!: string[];\n\n  @Prop({ required: true }) readonly timeframe!: string;\n\n  @Prop({ required: false, default: () => [] }) readonly trades!: Array<Trade>;\n\n  @Prop({ required: false, default: false }) historicView!: boolean;\n\n  /** Only required if historicView is true */\n  @Prop({ required: false, default: false }) timerange!: string;\n\n  /**\n   * Only required if historicView is true\n   */\n  @Prop({ required: false, default: false }) strategy!: string;\n\n  pair = '';\n\n  useUTC = true;\n\n  plotConfig: PlotConfig = { ...EMPTY_PLOTCONFIG };\n\n  plotConfigName = '';\n\n  @Getter getChartTheme!: string;\n\n  @ftbot.State availablePlotConfigNames!: Array<string>;\n\n  @ftbot.Action setPlotConfigName;\n\n  @ftbot.State candleData!: PairHistory;\n\n  @ftbot.State history!: PairHistory;\n\n  @ftbot.Getter [BotStoreGetters.selectedPair]!: string;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  @ftbot.Action public getPairCandles!: (payload: PairCandlePayload) => void;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  @ftbot.Action public getPairHistory!: (payload: PairHistoryPayload) => void;\n\n  get dataset(): PairHistory {\n    if (this.historicView) {\n      return this.history[`${this.pair}__${this.timeframe}`];\n    }\n    return this.candleData[`${this.pair}__${this.timeframe}`];\n  }\n\n  get datasetColumns() {\n    return this.dataset ? this.dataset.columns : [];\n  }\n\n  get hasDataset(): boolean {\n    return !!this.dataset;\n  }\n\n  mounted() {\n    this.plotConfigName = getPlotConfigName();\n    this.plotConfig = getCustomPlotConfig(this.plotConfigName);\n  }\n\n  plotConfigChanged() {\n    console.log('plotConfigChanged');\n    this.plotConfig = getCustomPlotConfig(this.plotConfigName);\n    this.setPlotConfigName(this.plotConfigName);\n  }\n\n  showConfigurator() {\n    this.$bvModal.show('plotConfiguratorModal');\n  }\n\n  refresh() {\n    if (this.pair && this.timeframe) {\n      if (this.historicView) {\n        this.getPairHistory({\n          pair: this.pair,\n          timeframe: this.timeframe,\n          timerange: this.timerange,\n          strategy: this.strategy,\n        });\n      } else {\n        this.getPairCandles({ pair: this.pair, timeframe: this.timeframe, limit: 500 });\n      }\n    }\n  }\n\n  @Watch('availablePairs')\n  watchAvailablePairs() {\n    if (!this.availablePairs.find((pair) => pair === this.pair)) {\n      [this.pair] = this.availablePairs;\n      this.refresh();\n    }\n  }\n\n  @Watch(BotStoreGetters.selectedPair)\n  watchSelectedPair() {\n    this.pair = this.selectedPair;\n    this.refresh();\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CandleChartContainer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CandleChartContainer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CandleChartContainer.vue?vue&type=template&id=076bba22&scoped=true&\"\nimport script from \"./CandleChartContainer.vue?vue&type=script&lang=ts&\"\nexport * from \"./CandleChartContainer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"076bba22\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}